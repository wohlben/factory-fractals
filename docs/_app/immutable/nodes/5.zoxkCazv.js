var Tt=Object.defineProperty;var Rt=(u,t,a)=>t in u?Tt(u,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[t]=a;var Z=(u,t,a)=>Rt(u,typeof t!="symbol"?t+"":t,a);import{c as he,t as x,a as _,b as He}from"../chunks/B2N7zt_S.js";import{al as St,aH as qt,$ as Nt,k as Et,q as Ye,F as Ot,M as At,l as jt,u as Mt,U as Ct,p as Ie,f as Q,t as M,g as e,e as P,a as ye,b as ve,s as f,c,r as d,h as U,n as Dt,P as bt,aI as Vt}from"../chunks/DKycTyQU.js";import{d as Oe,s as D,e as Ft,a as zt}from"../chunks/bPv9y2md.js";import{i as A}from"../chunks/DgLyW3V9.js";import{s as Ue,r as tt,a as ot,L as st}from"../chunks/BKv5Hnwn.js";import{t as Lt,s as le,c as at,b as Jt,o as lt}from"../chunks/Xa_5A0IR.js";import{s as Ve,a as J}from"../chunks/DihnOsDB.js";import{D as R,e as me,i as xe,I as Ht}from"../chunks/BZ_lMHHJ.js";import{w as Pe,d as X,g as Ee}from"../chunks/C3ysPMtx.js";import{a as rt,o as Ut}from"../chunks/De4B0248.js";import{p as it}from"../chunks/fW3SM2ok.js";import{s as ct}from"../chunks/DMSeiAlF.js";function De(u,t,a){Ye&&Ot();var r=u,s=Ct,n,i=St()?qt:Nt;Et(()=>{i(s,s=t())&&(n&&At(n),n=jt(()=>a(r)))}),Ye&&(r=Mt)}function $e(u,t,a,r){var s=u.__style;if(Ye||s!==t){var n=Lt(t);(!Ye||n!==u.getAttribute("style"))&&(n==null?u.removeAttribute("style"):u.style.cssText=n),u.__style=t}return r}const Gt=!1,Kt=({params:u,url:t})=>{const{id:a}=u,r=Number(a),s=t.searchParams.get("depth"),n=t.searchParams.get("targetAmount");return{recipeId:r,depth:s&&parseInt(s)||1,targetAmount:n&&parseInt(n)||1}},Ur=Object.freeze(Object.defineProperty({__proto__:null,load:Kt,prerender:Gt},Symbol.toStringTag,{value:"Module"})),Zt=()=>{const u=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(u){const t=JSON.parse(u);return Object.keys(t).forEach(a=>{_t[a].find(r=>r===t[a])||(t[a]=ft[a],console.log(a,t[a]))}),Pe(t)}},Qt=()=>{const u=localStorage==null?void 0:localStorage.getItem("defaultInterval");if(u){const t=JSON.parse(u),a=t==null?void 0:t.interval;if(Object.values(Wt).includes(a))return Pe(a)}return Pe(null)},_t={Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[0,.125,.2,.25]},ft={Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:0},Wt={cycle:null,minute:60*60,second:60},ge={defaultTier:Zt()??Pe(ft),availableTiers:_t,defaultInterval:Qt(),factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,2:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{0:null,.125:1141,.2:1142,.25:1143}}};class Xt{constructor(t,a,r,s,n,i,l){this.recipeId=t,this.itemId=a,this.targetAmount=r,this.targetInterval=s,this.tier=n,this.proliferator=i,this.timeSpend=l}}const Je=(u,t)=>{const a={...u};return Object.entries(t).forEach(([r,s])=>{const n=Number(r);a[n]=(a[n]??0)+s}),a};class et extends Xt{constructor(a,r,s,n,i=0,l=1,o){var B;const g=!!(r&&(R.canBeExtracted[r]||R.canBeMined[r]));!a&&!g&&(a=(B=R.alternativeRecipe[r])==null?void 0:B[0]);const m=Pe(a),b=a?R.recipe[a]:void 0;let p=b==null?void 0:b.Results.findIndex(T=>r===T);const h=!r;!r&&(p??-1)>=0&&(r=b==null?void 0:b.Results[p??0]);const S=Pe(r),k=Pe((b==null?void 0:b.ResultCounts[p??0])??o??1),q=s?X([S,s],([T,N])=>N[T]):k,y=Pe(b!=null&&b.Type?Ee(ge.defaultTier)[b.Type]:1),v=Pe(Ee(ge.defaultTier).Proliferator),w=Pe(Ee(ge.defaultInterval)??null),I=X([m,y],([T,N])=>{var O;return((O=R.recipe[T])==null?void 0:O.TimeSpend)/N});n||(n=w);super(m,S,q,n,y,v,I);Z(this,"amountEditable");Z(this,"manualAmount",Pe());Z(this,"manualInterval");Z(this,"children",Pe([]));Z(this,"canBeMined",X(this.itemId,a=>R.canBeMined[a]));Z(this,"canBeExtracted",X(this.itemId,a=>R.canBeExtracted[a]));Z(this,"item",X(this.itemId,a=>R.item[a]));Z(this,"recipe",X(this.recipeId,a=>R.recipe[a]));Z(this,"header",X([this.itemId,this.recipe],([a,r])=>{var o;const s=a??((o=r==null?void 0:r.Results)==null?void 0:o[0]);if(!s)return;const n=R.item[s],i=n.IconPath.split("/"),l=i[i.length-1];return l&&[rt+`/dsp_sprites/${l}.png`,n.Name]}));Z(this,"options",X(this.itemId,a=>R.alternativeRecipe[a]));Z(this,"timeSpendChanged",X(this.timeSpend,(a,r)=>{r(!!a);const s=setTimeout(()=>r(!a),1400);return()=>clearTimeout(s)}));Z(this,"relativeSpeed",X([this.targetInterval,this.timeSpend],([a,r])=>a?a/r:1));Z(this,"requiredBuildings",X([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([a,r,s,n,i])=>{const l=r==null?void 0:r.Results.findIndex(g=>s===g),o=a/(r==null?void 0:r.ResultCounts[l])/n;return isNaN(o)?a:o}));Z(this,"providedItemsPerInterval",X([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([a,r,s,n,i])=>{if(!a&&n&&(R.canBeMined[n]||R.canBeExtracted[n]))return{[n]:i};const l={};return a==null||a.Results.forEach((o,g)=>{l[o]=a.ResultCounts[g]*r*s}),l}));Z(this,"childrenProvideItemsPerInterval",X(this.children,(a,r)=>{const s=new Array(a.length),n=a.map((l,o)=>l.providedItemsPerInterval.subscribe(g=>{s[o]=g;const m=s.filter(b=>!!b).reduce((b,p)=>Je(b,p),{});r(m)})),i=s.filter(l=>!!l).reduce((l,o)=>Je(l,o),{});return r(i),()=>n.forEach(l=>l())}));Z(this,"requiredBuildingsByRecipeId",X([this.children,this.recipeId,this.requiredBuildings],([a,r,s],n)=>{const i=new Array(a.length),l=a.map((g,m)=>g.requiredBuildingsByRecipeId.subscribe(b=>{i[m]=b;const p=i.filter(h=>!!h).reduce((h,S)=>Je(h,S),{});if(r){const h=r;p[h]=(p[h]??0)+s}n(p)})),o=i.filter(g=>!!g).reduce((g,m)=>Je(g,m),{});if(r){const g=r;o[g]=(o[g]??0)+s}return n(o),()=>l.forEach(g=>g())}));Z(this,"fabsByType",X(this.requiredBuildingsByRecipeId,a=>Object.entries(a).reduce((r,[s,n])=>{const i=Number(s),l=R.recipe[i].Type;return r[l]=(r[l]??0)+Math.ceil(n),r},{})));Z(this,"childrenByItemId",X(this.children,(a,r)=>{const s=new Array(a.length),n=a.map((l,o)=>l.itemId.subscribe(g=>{s[o]=[g,l];const m=s.filter(b=>!!b).reduce((b,[p,h])=>(b[p]=h,b),{});r(m)})),i=s.filter(l=>!!l).reduce((l,[o,g])=>(l[o]=g,l),{});return r(i),()=>n.forEach(l=>l())}));Z(this,"requiredItemsPerInterval",X([this.recipe,this.relativeSpeed,this.requiredBuildings],([a,r,s])=>{const n={};return a==null||a.Items.forEach((i,l)=>n[i]=a.ItemCounts[l]*r*s),n}));Z(this,"deficitRequiredItemsPerInterval",X([this.recipe,this.relativeSpeed,this.requiredBuildings],([a,r,s])=>{const n={};return a==null||a.Items.forEach((i,l)=>n[i]=-(a.ItemCounts[l]*r*s)),n}));Z(this,"inputsOutputs",X([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([a,r,s])=>{const n=new Set;return Object.keys(r).forEach(i=>{n.add(Number(i))}),Object.keys(a??{}).forEach(i=>{n.add(Number(i))}),Object.keys(s).forEach(i=>{n.add(Number(i))}),n}));Z(this,"surplus",X([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([a,r,s,n])=>{const i=Je(a,s);return Object.entries(r).forEach(([l,o])=>i[Number(l)]=(i[Number(l)]??0)-o),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));Z(this,"deficit",X([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([a,r])=>{const s={...a};return Object.entries(r).forEach(([n,i])=>s[Number(n)]=(s[Number(n)]??0)-i),Object.entries(s).filter(([,n])=>n>=0).forEach(([n])=>delete s[Number(n)]),s}));Z(this,"deficitByItemId",X([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([a,r,s,n,i],l)=>{const o=new Array(a.length),g=a.map((b,p)=>b.deficitByItemId.subscribe(h=>{o[p]=h;const S=o.filter(k=>!!k).reduce((k,q)=>Je(k,q),s?r:{[n]:-i});l(S)})),m=o.filter(b=>!!b).reduce((b,p)=>Je(b,p),s?r:{[n]:-i});return l(m),()=>g.forEach(b=>b())}));Z(this,"totals",X([this.itemId,this.requiredBuildings,this.children],([a,r,s])=>{const n={};return n[a]=r,s.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,o])=>{const g=Number(l);n[g]=(n[g]??0)+o})}),n}));this.depth=i,this.amountEditable=h,this.manualAmount=k,this.manualInterval=w,l>i&&this.children.set(this.dbd(l))}setAmount(a){this.manualAmount.set(a)}setRecipeId(a){this.recipeId.set(a),this.expand()}deleteChild(a){this.children.update(r=>{const s=r.findIndex(n=>Ee(n.itemId)===a);return r.splice(s,1),r})}setInterval(a){this.manualInterval.set(a)}expand(){this.children.set(this.dbd())}planFor(a){const r=Ee(this.targetInterval);this.children.update(s=>(s.push(new et(void 0,a,this.requiredItemsPerInterval,r?this.targetInterval:this.timeSpend,this.depth+1)),s))}dbd(a){const r=Ee(this.targetInterval),s=[],n=Ee(this.recipe);return n==null||n.Items.forEach((i,l)=>{var m;if(!((m=R.alternativeRecipe[i])!=null&&m.length))return;const o=new et(void 0,i,this.requiredItemsPerInterval,r?this.targetInterval:this.timeSpend,this.depth+1,a);s.push(o);const g=Ee(o.providedItemsPerInterval);Object.entries(g).forEach(([b,p])=>{})}),s}}var Yt=x('<img class="h-6" alt="">');function Re(u,t){Ie(t,!0);let a=P(()=>R.item[t.itemId]);const r=P(()=>{var o;return(o=e(a))==null?void 0:o.IconPath.split("/")}),s=P(()=>e(r)&&e(r)[e(r).length-1]),n=P(()=>e(s)&&rt+`/dsp_sprites/${e(s)}.png`);var i=he(),l=Q(i);De(l,()=>t.itemId,o=>{var g=Yt();M(()=>Ue(g,"src",e(n))),_(o,g)}),_(u,i),ye()}var $t=(u,t,a)=>t(e(a)),ea=x("<button> <!></button>"),ta=x('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),aa=(u,t)=>U(t,!0),ra=x('<button class="text-center min-w-16 h-10 rounded-l-lg dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-600 hover:bg-slate-400 py-2 px-3 flex justify-around items-end gap-2 relative  "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function na(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(l,"$recipe",a),n=()=>J(o,"$tier",a),i=()=>J(g,"$requiredBuildings",a);let{recipe:l,tier:o,requiredBuildings:g}=t.planner,m=ve(!1);const b=q=>{t.planner.tier.set(q),U(m,!1)};var p=he(),h=Q(p);{var S=q=>{var y=ta(),v=f(c(y),2);me(v,1,()=>ge.availableTiers[s().Type],xe,(w,I)=>{var B=ea();let T;B.__click=[$t,b,I];var N=c(B),O=f(N);Re(O,{get itemId(){var C;return ge.factoryItems[(C=s())==null?void 0:C.Type][e(I)]}}),d(B),M(C=>{T=le(B,1,"px-2 py-1 outline-slate-600 dark:hover:bg-slate-600 hover:bg-slate-400 text-sm  rounded",null,T,C),D(N,`${e(I)??""} `)},[()=>({"outline-1":e(I)===n(),active:e(I)===n()})]),_(w,B)}),d(y),_(q,y)},k=q=>{var y=ra();y.__click=[aa,m];var v=c(y),w=c(v);Re(w,{get itemId(){var O;return ge.factoryItems[(O=s())==null?void 0:O.Type][n()]}}),d(v);var I=f(v,2),B=c(I);d(I);var T=f(I,2),N=c(T,!0);d(T),d(y),M(O=>{D(B,`tier ${n()??""}`),D(N,O)},[()=>Math.round(i()*100)/100]),_(q,y)};A(h,q=>{e(m)?q(S):q(k,!1)})}_(u,p),ye(),r()}Oe(["click"]);var la=x('<div class="flex gap-1 relative justify-center"><!> <span class="absolute  mx-auto text-center top-0 px-1    rounded-3xl bg-white/70 dark:bg-black/30  "> </span></div>');function ht(u,t){const a=i=>{switch(!0){case i<=6:return[[2001,1]];case i<=12:return[[2002,1]];case i<=30:return[[2003,1]];default:const l=Math.ceil(Math.ceil(i)/30),o=Math.ceil(l/4);return[[2014,o>1?4:l],[2003,o]]}};let r=P(()=>a(t.outputs));var s=he(),n=Q(s);me(n,17,()=>e(r),xe,(i,l)=>{var o=he(),g=Q(o);{var m=b=>{var p=la(),h=c(p);Re(h,{get itemId(){return e(l)[0]}});var S=f(h,2),k=c(S,!0);d(S),d(p),M(()=>D(k,e(l)[1])),_(b,p)};A(g,b=>{e(l)[1]>0&&b(m)})}_(i,o)}),_(u,s)}var sa=(u,t)=>U(t,!e(t)),ia=x('<button class="flex  dark:odd:bg-gray-950 odd:bg-gray-100 gap-2 px-2 items-center dark:hover:bg-gray-700 hover:bg-gray-300 w-full group "><span><!></span> <span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs "> </span> <em class="text-right flex-grow"> </em> <span class="flex w-18 justify-end gap-1"><!></span></button>');function da(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(n,"$defaultTier",a);let{defaultTier:n}=ge,i=ve(!0),l=P(()=>R.recipe[Number(t.recipeId)]),o=P(()=>s()[e(l).Type]/e(l).TimeSpend),g=P(()=>e(l).ResultCounts.reduce((j,K)=>K+j,0)),m=P(()=>t.requiredBuildings*e(o)*e(g)*60/(e(i)?t.devisor:1)),b=P(()=>Math.round(e(m)*100)/100);var p=ia();p.__click=[sa,i];var h=c(p);let S;var k=c(h);{var q=j=>{var K=He("🔓");_(j,K)},y=j=>{var K=He("🔒");_(j,K)};A(k,j=>{e(i)?j(q):j(y,!1)})}d(h);var v=f(h,2),w=c(v,!0);d(v);var I=f(v,4),B=c(I,!0);d(I);var T=f(I,2),N=c(T);d(T);var O=f(T,2),C=c(O);d(O);var V=f(O,2),te=c(V);ht(te,{get outputs(){return e(m)}}),d(V),d(p),M((j,K)=>{var be;S=le(h,1,"w-4 group-hover:opacity-100",null,S,j),D(w,K),D(B,((be=e(l))==null?void 0:be.Name)??"recipe"+t.recipeId),D(N,`tier ${s()[e(l).Type]??""}`),D(C,`${e(b)??""}/s`)},[()=>({"opacity-0":e(i)}),()=>Math.round(t.requiredBuildings/(e(i)?t.devisor:1)*100)/100]),_(u,p),ye(),r()}Oe(["click"]);var oa=x('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300"><span> </span> <span class="text-right flex-grow"> </span></div>'),ca=x('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300 px-1"><span> </span></div>'),ua=x('<div><h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function va(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(o,"$fabsByType",a),n=()=>J(l,"$requiredBuildingsByRecipeId",a),i=()=>J(b,"$deficitByItemId",a);let{requiredBuildingsByRecipeId:l,fabsByType:o,recipe:g,requiredBuildings:m,deficitByItemId:b}=t.planner;var p=ua(),h=f(c(p),2);me(h,5,()=>Object.entries(s()),xe,(q,y)=>{var v=oa();const w=P(()=>{const[O,C]=e(y);return{fabType:O,requiredFabs:C}});var I=c(v),B=c(I,!0);d(I);var T=f(I,2),N=c(T,!0);d(T),d(v),M(O=>{D(B,e(w).fabType),D(N,O)},[()=>Math.ceil(e(w).requiredFabs/t.devisor)]),_(q,v)}),d(h);var S=f(h,4);me(S,1,()=>Object.entries(n()??{}),xe,(q,y,v,w)=>{const I=P(()=>{const[B,T]=e(y);return{recipeId:B,requiredBuildings:T}});da(q,{get recipeId(){return e(I).recipeId},get requiredBuildings(){return e(I).requiredBuildings},get devisor(){return t.devisor}})});var k=f(S,4);me(k,5,()=>Object.entries(i()),xe,(q,y)=>{var v=ca();const w=P(()=>{const[T]=e(y);return{itemId:T}});var I=c(v),B=c(I,!0);d(I),d(v),M(()=>D(B,R.item[e(w).itemId].Name)),_(q,v)}),d(k),d(p),_(u,p),ye(),r()}var ga=(u,t)=>{var a;return(a=t.close)==null?void 0:a.call(t)},ba=(u,t)=>{var a;return(a=t.close)==null?void 0:a.call(t)},_a=x('<button class="dark:bg-slate-800 dark:hover:bg-slate-700 bg-slate-200 hover:bg-slate-300 w-12 py-2 absolute right-0 top-0 h-full">✖️</button>'),fa=x('<h6 class="flex items-center justify-between sticky top-0  bg-gray-50/70 dark:bg-gray-950/70"><!> <!></h6>'),ha=x('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl dark:bg-black opacity-70 top-0 left-0 z-20 cursor-default " aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-50 dark:bg-gray-950  dark:text-amber-50 fixed outline-1 rounded-2xl outline-slate-600 overflow-y-scroll z-70 flex flex-col  gap-2 scroll-mt-20"><!> <!></dialog>',1);function Xe(u,t){Ie(t,!0),Ut(()=>{var o;return(o=t.close)==null?void 0:o.call(t)});var a=ha(),r=Q(a);r.__click=[ga,t];var s=f(r,2),n=c(s);{var i=o=>{var g=fa(),m=c(g);ct(m,()=>t.header??Dt);var b=f(m,2);{var p=h=>{var S=_a();S.__click=[ba,t],_(h,S)};A(b,h=>{t.close&&h(p)})}d(g),_(o,g)};A(n,o=>{(t.header||t.close)&&o(i)})}var l=f(n,2);ct(l,()=>t.children),d(s),Ft("scroll",r,o=>{o.stopImmediatePropagation()}),_(u,a),ye()}Oe(["click"]);var pa=x('<img class="h-6" alt="">');function ut(u,t){Ie(t,!0);const a=P(()=>t.filename.split("/")),r=P(()=>e(a)&&e(a)[e(a).length-1]),s=P(()=>e(r)&&rt+`/dsp_sprites/${e(r)}.png`);var n=pa();M(()=>Ue(n,"src",e(s))),_(u,n),ye()}var ma=(u,t)=>{var a;return(a=t.deletecb)==null?void 0:a.call(t)},xa=x(`<style scoped="">input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* display: none; <- Crashes Chrome on hover */
            -webkit-appearance: none;
            margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
        }

        input[type=number] {
            -moz-appearance: textfield;
        }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),Ia=x('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),ya=x("<button><!></button>");function ka(u,t){Ie(t,!0);let a=ve(it(t.targetAmount));bt(()=>{t.planner.amountEditable&&t.targetAmount!==e(a)&&t.planner.setAmount(e(a))});var r=ya();r.__click=[ma,t];let s;var n=c(r);{var i=o=>{var g=xa(),m=f(Q(g),2),b=c(m);{var p=k=>{ut(k,{get filename(){return t.recipe.IconPath}})},h=k=>{const q=P(()=>{var y,v;return(v=(y=t.recipe)==null?void 0:y.Results)==null?void 0:v[0]});Re(k,{get itemId(){return e(q)}})};A(b,k=>{var q;(q=t.recipe)!=null&&q.IconPath?k(p):k(h,!1)})}var S=f(b,2);tt(S),d(m),at(S,()=>e(a),k=>U(a,k)),_(o,g)},l=o=>{var g=Ia(),m=f(c(g),2);{var b=k=>{ut(k,{get filename(){return t.recipe.IconPath}})},p=k=>{Re(k,{get itemId(){return t.itemId}})};A(m,k=>{var q;(q=t.recipe)!=null&&q.IconPath?k(b):k(p,!1)})}var h=f(m,2),S=c(h,!0);d(h),d(g),M(k=>{$e(h,`padding-left: ${t.planner.depth*1.1}rem`),D(S,k)},[()=>Math.round(t.targetAmount*100)/100]),_(o,g)};A(n,o=>{t.planner.amountEditable?o(i):o(l,!1)})}d(r),M(o=>{r.disabled=!t.deletecb||!t.planner,s=le(r,1,"dark:bg-slate-800 bg-slate-200  text-center rounded-r-lg  outline-slate-500",null,s,o)},[()=>({"dark:hover:bg-red-700":!t.planner.amountEditable,"hover:bg-red-300":!t.planner.amountEditable,"outline-1":t.planner.amountEditable})]),_(u,r),ye()}Oe(["click"]);var wa=x('<h3 class="dark:bg-blue-800 bg-blue-300 py-2 px-4  text-center w-full"><input class="w-24" type="number"> <span class="text-xs dark:text-slate-400 text-slate-700">x</span> <span class="w-14 text-right"> </span> <span> </span></h3>'),Ba=(u,t)=>U(t,!1),Pa=x('<!> <button class="dark:bg-green-800 bg-green-200 dark:hover:bg-green-700 hover:bg-green-300 py-2 rounded-xl mt-auto">close</button>',1),Ta=x("<option><!> </option>"),Ra=x("<option> </option>"),Sa=x('<a class="dark:bg-gray-800 bg-gray-200 dark:hover:bg-slate-700 hover:bg-slate-300">➡️</a>'),qa=x('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),Na=x('<a class="dark:bg-gray-800 dark:hover:bg-slate-700 bg-gray-200 hover:bg-slate-300">➡️</a>'),Ea=(u,t)=>U(t,!0),Oa=x('<button class="py-1 rounded-xl px-4 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300">🔎</button>'),Aa=x('<span class="flex-grow"> <!></span> <!>',1),ja=x('<div class="ml-auto"><!></div>'),Ma=(u,t,a,r)=>{var s;return e(t)<0&&((s=R.producedVia[e(a)])==null?void 0:s.length)>0&&r.planner.planFor(e(a))},Ca=x('<div class="flex items-center"><span class="pl-2">📝</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Da=x('<div class="flex items-center"><span class="px-3.5"></span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Va=x("<div><!></div>"),Fa=x('<div class="flex gap-2 dark:hover:bg-gray-700 hover:bg-gray-300"><button><!></button> <!></div>'),za=x('<div class="flex flex-col gap-0.5 "></div>'),La=x('<!> <div class="flex gap-1 max-w-2xl items-center dark:hover:bg-gray-700 hover:bg-gray-300  flex-wrap @container"><!> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function pt(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(I,"$recipeId",a),n=()=>J(B,"$requiredBuildings",a),i=()=>J(w,"$recipe",a),l=()=>J(v,"$itemId",a),o=()=>J(O,"$targetAmount",a),g=()=>J(K,"$options",a),m=()=>J(y,"$item",a),b=()=>J(T,"$children",a),p=()=>J(j,"$inputsOutputs",a),h=()=>J(V,"$providedItemsPerInterval",a),S=()=>J(C,"$childrenProvideItemsPerInterval",a),k=()=>J(te,"$requiredItemsPerInterval",a),q=()=>J(N,"$childrenByItemId",a);let{item:y,itemId:v,recipe:w,recipeId:I,requiredBuildings:B,children:T,childrenByItemId:N,targetAmount:O,childrenProvideItemsPerInterval:C,providedItemsPerInterval:V,requiredItemsPerInterval:te,inputsOutputs:j,options:K,header:be}=t.planner,de=ve(it(s())),ae=ve(!1);bt(()=>{e(de)!==s()&&t.planner.setRecipeId(e(de))});let _e=ve(1),$=P(()=>!e(_e)||isNaN(e(_e))?1:e(_e)),we=P(()=>Math.ceil(n()/e($)));var Te=La(),ee=Q(Te);{var ce=se=>{Xe(se,{close:()=>U(ae,!1),header:ue=>{var G=wa(),ke=c(G);tt(ke);var Y=f(ke,4),Se=c(Y,!0);d(Y);var Me=f(Y,2),z=c(Me);d(Me),d(G),M(()=>{D(Se,e(we)),D(z,`${i().Name??""}s`)}),at(ke,()=>e(_e),L=>U(_e,L)),_(ue,G)},children:(ue,G)=>{var ke=Pa(),Y=Q(ke);va(Y,{get planner(){return t.planner},get devisor(){return e($)}});var Se=f(Y,2);Se.__click=[Ba,ae],_(ue,ke)},$$slots:{default:!0}})};A(ee,se=>{e(ae)&&se(ce)})}var E=f(ee,2),W=c(E);ka(W,{get planner(){return t.planner},get recipe(){return i()},get itemId(){return l()},get targetAmount(){return o()},get deletecb(){return t.deletecb}});var F=f(W,2),H=c(F),re=c(H);{var pe=se=>{var oe=qa(),ue=Q(oe),G=c(ue);{var ke=z=>{var L=Ta();L.value=(L.__value=void 0)==null?"":void 0;var ie=c(L);{var Ge=qe=>{var Ne=He("orbital collector");_(qe,Ne)},Ze=qe=>{var Ne=He("mining");_(qe,Ne)};A(ie,qe=>{R.canBeExtracted[l()]?qe(Ge):qe(Ze,!1)})}var Ce=f(ie);d(L),M(()=>{ot(L,s()===void 0),D(Ce,` (${m().Name??""})`)}),_(z,L)};A(G,z=>{(R.canBeExtracted[l()]||R.canBeMined[l()])&&z(ke)})}var Y=f(G);me(Y,1,g,xe,(z,L)=>{var ie=Ra(),Ge={},Ze=c(ie,!0);d(ie),M(()=>{Ge!==(Ge=R.recipe[e(L)].ID)&&(ie.value=(ie.__value=R.recipe[e(L)].ID)==null?"":R.recipe[e(L)].ID),ot(ie,s()===R.recipe[e(L)].ID),D(Ze,R.recipe[e(L)].Name)}),_(z,ie)}),d(ue);var Se=f(ue,2);{var Me=z=>{var L=Sa();M(ie=>Ue(L,"href",ie),[()=>st.recipe(i().ID)+"?targetAmount="+Math.round(n())+"&depth=10"]),_(z,L)};A(Se,z=>{!t.planner.amountEditable&&i()&&z(Me)})}Jt(ue,()=>e(de),z=>U(de,z)),_(se,oe)},Be=se=>{var oe=Aa(),ue=Q(oe),G=c(ue),ke=f(G);{var Y=z=>{var L=Na();M(ie=>Ue(L,"href",ie),[()=>st.recipe(i().ID)+"?targetAmount="+Math.round(n())+"&depth=10"]),_(z,L)};A(ke,z=>{t.planner.amountEditable||z(Y)})}d(ue);var Se=f(ue,2);{var Me=z=>{var L=Oa();L.__click=[Ea,ae],_(z,L)};A(Se,z=>{b().length>1&&!t.planner.amountEditable&&z(Me)})}M(()=>{var z;return D(G,`${((z=i())==null?void 0:z.Name)??""} `)}),_(se,oe)};A(re,se=>{l()&&(g().length>1||g().length>=1&&R.canBeExtracted[l()]||R.canBeMined[l()])?se(pe):se(Be,!1)})}d(H),d(F);var Ae=f(F,2);{var Fe=se=>{var oe=ja(),ue=c(oe);na(ue,{get planner(){return t.planner}}),d(oe),_(se,oe)};A(Ae,se=>{n()&&s()&&se(Fe)})}d(E);var Ke=f(E,2);{var Qe=se=>{var oe=za();me(oe,5,p,xe,(ue,G)=>{var ke=he();const Y=P(()=>{var z,L,ie;return(((z=h())==null?void 0:z[e(G)])??0)+(((L=S())==null?void 0:L[e(G)])??0)-(((ie=k())==null?void 0:ie[e(G)])??0)}),Se=P(()=>q()[e(G)]);var Me=Q(ke);De(Me,()=>e(G),z=>{var L=he(),ie=Q(L);{var Ge=Ce=>{pt(Ce,{get planner(){return e(Se)},deletecb:()=>t.planner.deleteChild(e(G))})},Ze=Ce=>{var qe=Fa(),Ne=c(qe);let dt;Ne.__click=[Ma,Y,G,t];var xt=c(Ne);{var It=fe=>{var ne=Ca(),ze=f(c(ne),2);Re(ze,{get itemId(){return e(G)}});var je=f(ze,2),Le=c(je,!0);d(je),d(ne),M(We=>{$e(je,`padding-left: ${(t.planner.depth+.5)*1.1}rem`),D(Le,We)},[()=>Math.round(e(Y)*100)/100]),_(fe,ne)},yt=(fe,ne)=>{{var ze=je=>{var Le=Da(),We=f(c(Le),2);Re(We,{get itemId(){return e(G)}});var nt=f(We,2),Bt=c(nt,!0);d(nt),d(Le),M(Pt=>{$e(nt,`padding-left: ${(t.planner.depth+.5)*1.1}rem`),D(Bt,Pt)},[()=>Math.round(e(Y)*100)/100]),_(je,Le)};A(fe,je=>{e(G)!==l()&&e(Y)!==0&&je(ze)},ne)}};A(xt,fe=>{var ne;e(Y)<0&&((ne=R.producedVia[e(G)])==null?void 0:ne.length)>0?fe(It):fe(yt,!1)})}d(Ne);var kt=f(Ne,2);{var wt=fe=>{var ne=Va();let ze;var je=c(ne);Ht(je,{get itemId(){return e(G)}}),d(ne),M(Le=>ze=le(ne,1,"flex gap-2 items-center ",null,ze,Le),[()=>({"text-green-500":e(Y)>0,"text-red-500":e(Y)<0})]),_(fe,ne)};A(kt,fe=>{e(G)!==l()&&e(Y)!==0&&fe(wt)})}d(qe),M(fe=>{var ne;dt=le(Ne,1,"dark:bg-slate-800 bg-slate-200   text-center rounded-r-lg",null,dt,fe),Ne.disabled=e(Y)>0||!((ne=R.producedVia[e(G)])!=null&&ne.length)},[()=>{var fe,ne;return{"dark:hover:bg-green-800":e(Y)<0&&((fe=R.producedVia[e(G)])==null?void 0:fe.length)>0,"hover:bg-green-200":e(Y)<0&&((ne=R.producedVia[e(G)])==null?void 0:ne.length)>0}}]),_(Ce,qe)};A(ie,Ce=>{e(Se)?Ce(Ge):Ce(Ze,!1)})}_(z,L)}),_(ue,ke)}),d(oe),_(se,oe)};A(Ke,se=>{var oe;((oe=p())==null?void 0:oe.size)>0&&se(Qe)})}_(u,Te),ye(),r()}Oe(["click"]);var Ja=x('<img class="h-6" alt="">');function Ha(u,t){Ie(t,!0);let a=P(()=>R.recipe[t.recipeId]);const r=P(()=>{var o;return(o=e(a))==null?void 0:o.IconPath.split("/")}),s=P(()=>e(r)&&e(r)[e(r).length-1]),n=P(()=>e(s)&&rt+`/dsp_sprites/${e(s)}.png`);var i=he(),l=Q(i);De(l,()=>t.recipeId,o=>{var g=he(),m=Q(g);{var b=h=>{var S=Ja();M(()=>Ue(S,"src",e(n))),_(h,S)},p=h=>{const S=P(()=>{var k,q;return(q=(k=e(a))==null?void 0:k.Results)==null?void 0:q[0]});Re(h,{get itemId(){return e(S)}})};A(m,h=>{e(s)?h(b):h(p,!1)})}_(o,g)}),_(u,i),ye()}var Ua=x('<label for="recipeName" class="py-2 text-center">ingredient or recipe name</label> <input id="recipeName">',1),Ga=x('<div class="flex flex-col items-stretch group w-full "><a class="  dark:hover:bg-slate-700 hover:bg-slate-300  md:px-4 md:py-2 w-full flex gap-2"><span class="w-8"><!></span><span class="flex-grow"> </span></a></div>'),Ka=x('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur bg-gray-50/70  dark:bg-gray-950/70 lg:dark:bg-transparent lg:bg-transparent "><!> <!></div> <!>',1);function vt(u,t){Ie(t,!0);let a=ve(it([])),r=lt(),s=lt(),n=lt(),i=ve(""),l=P(()=>t.recipeName??e(i)),o=P(()=>e(l)?R.items.filter(v=>{var w;return v.Name.toLowerCase().includes((w=e(l))==null?void 0:w.toLowerCase())}).map(v=>v.ID):[]),g=P(()=>(()=>{const v=new Set;return e(o).forEach(w=>{for(const I of R.relatedRecipes[w]??[])v.add(I)}),v})()),m=P(()=>R.recipees.filter(v=>e(a).length>0?e(a).includes(v.Type):!0).filter(v=>e(l)?e(g).has(v.ID):!0).filter(v=>r.checked===null?!0:r.checked?R.buildableRecipees.has(v.ID):!R.buildableRecipees.has(v.ID)).filter(v=>s.checked===null?!0:s.checked?R.fluidRecipees.has(v.ID):!R.fluidRecipees.has(v.ID)).filter(v=>n.checked===null?!0:n.checked?R.entityRecipees.has(v.ID):!R.entityRecipees.has(v.ID)));new Set(R.recipees.map(v=>v.Type));var b=Ka(),p=Q(b),h=c(p);A(h,v=>{});var S=f(h,2);{var k=v=>{var w=He();M(I=>D(w,I),[()=>t.children()]),_(v,w)},q=v=>{var w=he(),I=Q(w);{var B=N=>{},T=N=>{var O=Ua(),C=f(Q(O),2);tt(C),at(C,()=>e(i),V=>U(i,V)),_(N,O)};A(I,N=>{t.recipeName!==void 0?N(B):N(T,!1)})}_(v,w)};A(S,v=>{t.children?v(k):v(q,!1)})}d(p);var y=f(p,2);me(y,17,()=>e(m),xe,(v,w)=>{var I=Ga(),B=c(I),T=c(B),N=c(T);Ha(N,{get recipeId(){return e(w).ID}}),d(T);var O=f(T),C=c(O,!0);d(O),d(B),d(I),M(V=>{Ue(B,"href",V),D(C,e(w).Name)},[()=>st.recipe(e(w).ID)]),_(v,I)}),_(u,b),ye()}Oe(["click"]);var Za=(u,t)=>U(t,!e(t)),Qa=(u,t,a,r)=>t(e(a),e(r)),Wa=x("<button><!> <span> </span></button>"),Xa=x('<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 rounded-t"> </h4> <div class="flex dark:bg-gray-600 bg-slate-100 "></div></div>'),Ya=x("<div></div> <!>",1),$a=x(`<button>default tier for
	new factories <span class="ml-auto shadow-2xl"><!></span></button> <!>`,1);function er(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(n,"$defaultTierReadable",a);let n=ge.defaultTier;s();let i=ve(!0);const l=(y,v)=>{const w={...s(),[y]:v};localStorage.setItem("defaultTiers",JSON.stringify(w)),ge.defaultTier.set(w)};var o=$a(),g=Q(o);g.__click=[Za,i];let m;var b=f(c(g)),p=c(b);{var h=y=>{var v=He("🔼");_(y,v)},S=y=>{var v=He("🔽");_(y,v)};A(p,y=>{e(i)?y(h):y(S,!1)})}d(b),d(g);var k=f(g,2);{var q=y=>{var v=Ya(),w=f(Q(v),2);me(w,1,()=>Object.keys(s()),xe,(I,B)=>{var T=he(),N=Q(T);{var O=C=>{var V=Xa(),te=c(V),j=c(te,!0);d(te);var K=f(te,2);me(K,21,()=>ge.availableTiers[e(B)],xe,(be,de)=>{var ae=Wa();const _e=P(()=>ge.factoryItems[e(B)][e(de)]),$=P(()=>e(de)===s()[e(B)]);let we;ae.__click=[Qa,l,B,de];var Te=c(ae);Re(Te,{get itemId(){return e(_e)}});var ee=f(Te,2),ce=c(ee,!0);d(ee),d(ae),M(E=>{we=le(ae,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2  rounded-lg",null,we,E),D(ce,e(de))},[()=>({"dark:outline-amber-100":e($),"outline-1":e($),active:e($),"dark:bg-slate-500":e($),"bg-white":e($),"dark:hover:bg-slate-400":e($),"dark:text-white":e($),"dark:hover:bg-slate-700":!e($),"dark:text-gray-300":!e($),"dark:bg-slate-800":!e($),"bg-slate-200":!e($)})]),_(be,ae)}),d(K),d(V),M(()=>D(j,e(B))),_(C,V)};A(N,C=>{var V;((V=ge.availableTiers[e(B)])==null?void 0:V.length)>1&&C(O)})}_(I,T)}),_(y,v)};A(k,y=>{e(i)&&y(q)})}M(y=>m=le(g,1,"dark:bg-blue-800 dark:hover:bg-blue-700 bg-blue-300 hover:bg-blue-400 hover:shadow-2xl  rounded-t py-5 px-4 flex",null,m,y),[()=>({"bg-blue-300":!e(i),"bg-blue-400":e(i)})]),_(u,o),ye(),r()}Oe(["click"]);var tr=(u,t)=>e(t).select(),ar=x("<button> </button>"),rr=x('<h4 class="py-2 dark:bg-slate-800 bg-slate-200 rounded-t-lg flex gap-2 justify-center  w-full items-center sticky top-0"><span class=""> </span> <span></span></h4>');function mt(u,t){var a=rr(),r=c(a),s=c(r,!0);d(r);var n=f(r,2);me(n,21,()=>t.options,xe,(i,l)=>{var o=ar();let g;o.__click=[tr,l];var m=c(o,!0);d(o),M(b=>{g=le(o,1,"px-4 py-2 first:rounded-l-lg last:rounded-r-lg  outline-gray-600 ",null,g,b),D(m,e(l).label)},[()=>({"bg-blue-300":t.selectedOption===(e(l).elem??e(l).label),"bg-gray-300":t.selectedOption!==(e(l).elem??e(l).label),"hover:bg-blue-500":t.selectedOption===(e(l).elem??e(l).label),"hover:bg-gray-500":t.selectedOption!==(e(l).elem??e(l).label),"dark:bg-blue-700":t.selectedOption===(e(l).elem??e(l).label),"dark:bg-gray-700":t.selectedOption!==(e(l).elem??e(l).label)})]),_(i,o)}),d(n),d(a),M(()=>D(s,t.label)),_(u,a)}Oe(["click"]);var nr=x('<div class="relative"><em class="absolute w-full h-full text-right left-0 top-0 dark:backdrop-brightness-85 bg-white/50 dark:bg-black/30 "> </em> <!></div>'),lr=x('<div class="opacity-70 scale-90"><!></div>'),sr=x('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 dark:backdrop-brightness-75 "> </span></div>'),ir=x('<div class="flex flex-col"><!></div>'),dr=x('<div class="dark:odd:bg-gray-950 odd:bg-gray-200 py-1"><div class="gap-3 px-2 flex items-center justify-between"><div class="justify-self-center w-14 text-center p-0.5 flex flex-col"></div> <span class="flex-grow"> </span> <!></div></div>'),or=x('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0  gap-0.5 overflow-y-auto max-h-screen scrollbar-thin"><!> <!></div>');function gt(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(o,"$itemId",a),n=()=>J(l,"$requiredBuildingsByRecipeId",a),i=()=>J(g,"$defaultTier",a);let{requiredBuildingsByRecipeId:l,itemId:o}=t.planner,{defaultTier:g}=ge,m=[{label:"buildings",select:()=>U(b,"buildings")},{label:"throughput",select:()=>U(b,"throughput")}],b=ve("buildings"),p=P(()=>t.activeTally??e(b));var h=or(),S=c(h);{var k=y=>{mt(y,{options:m,get selectedOption(){return e(p)},label:"required"})};A(S,y=>{t.activeTally||y(k)})}var q=f(S,2);De(q,s,y=>{var v=he(),w=Q(v);me(w,1,()=>Object.entries(n()),xe,(I,B)=>{var T=he();const N=P(()=>{const[V,te]=e(B);return{recipeId:V,requiredBuildings:te}});var O=Q(T);{var C=V=>{var te=dr();const j=P(()=>R.recipe[Number(e(N).recipeId)]),K=P(()=>i()[e(j).Type]/e(j).TimeSpend);var be=c(te),de=c(be);me(de,21,()=>e(j).Results,xe,(ee,ce,E)=>{var W=nr();const F=P(()=>e(N).requiredBuildings*e(K)*e(j).ResultCounts[E]*60);var H=c(W),re=c(H);d(H);var pe=f(H,2);Re(pe,{get itemId(){return e(ce)}}),d(W),M(Be=>D(re,`${Be??""}/s`),[()=>Math.round(e(F)*100)/100]),_(ee,W)}),d(de);var ae=f(de,2),_e=c(ae,!0);d(ae);var $=f(ae,2);{var we=ee=>{var ce=sr();const E=P(()=>String(Math.round(e(N).requiredBuildings*10)/10)),W=P(()=>e(E).indexOf(".")),F=P(()=>e(W)===-1?1:0);var H=c(ce),re=c(H);De(re,i,Ae=>{var Fe=lr(),Ke=c(Fe);Re(Ke,{get itemId(){var Qe;return ge.factoryItems[(Qe=e(j))==null?void 0:Qe.Type][i()[e(j).Type]]}}),d(Fe),_(Ae,Fe)}),d(H);var pe=f(H,2),Be=c(pe,!0);d(pe),d(ce),M(()=>{$e(ce,`padding-right: ${e(F)+.5}em`),D(Be,e(E))}),_(ee,ce)},Te=(ee,ce)=>{{var E=W=>{var F=he(),H=Q(F);me(H,17,()=>e(j).Results,xe,(re,pe,Be)=>{var Ae=ir();const Fe=P(()=>e(N).requiredBuildings*e(K)*e(j).ResultCounts[Be]*60);var Ke=c(Ae);ht(Ke,{get outputs(){return e(Fe)}}),d(Ae),_(re,Ae)}),_(W,F)};A(ee,W=>{e(p)==="throughput"&&W(E)},ce)}};A($,ee=>{e(p)==="buildings"?ee(we):ee(Te,!1)})}d(be),d(te),M(()=>{var ee;return D(_e,((ee=e(j))==null?void 0:ee.Name)??"recipe"+e(N).recipeId)}),_(V,te)};A(O,V=>{e(N).recipeId&&V(C)})}_(I,T)}),_(y,v)}),d(h),_(u,h),ye(),r()}var cr=(u,t)=>t(null),ur=(u,t,a)=>t(a),vr=(u,t)=>t(60),gr=x('<span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button></span>'),br=(u,t)=>U(t,!0),_r=(u,t)=>U(t,!0),fr=(u,t)=>U(t,!0),hr=(u,t)=>t(null),pr=(u,t,a)=>t(a),mr=(u,t)=>t(60),xr=x('<span class="px-3 py-1 dark:bg-slate-800 bg-slate-200 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button> <span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button></span></span></span>');function Ir(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(e(g),"$timeSpendChanged",a),n=()=>J(e(l),"$targetInterval",a),i=()=>J(e(o),"$timeSpend",a);let l=P(()=>t.planner.targetInterval),o=P(()=>t.planner.timeSpend),g=P(()=>t.planner.timeSpendChanged),{defaultInterval:m}=ge,b=ve(!1);const p=60*60,h=v=>{t.planner.setInterval(v),U(b,!1),m.set(v),localStorage==null||localStorage.setItem("defaultInterval",JSON.stringify({interval:v}))};var S=he(),k=Q(S);{var q=v=>{var w=gr(),I=c(w);let B;I.__click=[cr,h];var T=c(I);d(I);var N=f(I,2);let O;N.__click=[ur,h,p];var C=f(N,2);let V;C.__click=[vr,h],d(w),M((te,j,K,be)=>{B=le(I,1,"px-1.5 py-2 multi hover:bg-slate-700",null,B,te),D(T,`Cycle (${j??""}s)`),O=le(N,1,"px-1.5 py-2 multi hover:bg-slate-700",null,O,K),V=le(C,1,"px-1.5 py-2 multi hover:bg-slate-700",null,V,be)},[()=>({"animate-flash":s(),active:n()===0}),()=>Math.round(i()/60*100)/100,()=>({active:n()===p}),()=>({active:n()===60})]),_(v,w)},y=v=>{var w=xr(),I=f(c(w)),B=c(I);let T;B.__click=[br,b];var N=c(B);d(B);var O=f(B,2);let C;O.__click=[_r,b];var V=f(O,2);let te;V.__click=[fr,b];var j=f(V,2),K=c(j);let be;K.__click=[hr,h];var de=c(K);d(K);var ae=f(K,2);let _e;ae.__click=[pr,h,p];var $=f(ae,2);let we;$.__click=[mr,h],d(j),d(I),d(w),M((Te,ee,ce,E,W,F,H,re)=>{T=le(B,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,T,Te),D(N,`Cycle (${ee??""}s)`),C=le(O,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,C,ce),te=le(V,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,te,E),be=le(K,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,be,W),D(de,`Cycle (${F??""}s)`),_e=le(ae,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,_e,H),we=le($,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,we,re)},[()=>({"animate-flash":s(),active:n()===null,hidden:n()!==null}),()=>Math.round(i()/60*100)/100,()=>({active:n()===p,hidden:n()!==p}),()=>({active:n()===60,hidden:n()!==60}),()=>({"animate-flash":s()&&n()===0,active:n()===null}),()=>Math.round(i()/60*100)/100,()=>({active:n()===p}),()=>({active:n()===60})]),_(v,w)};A(k,v=>{e(b)?v(q):v(y,!1)})}_(u,S),ye(),r()}Oe(["click"]);var yr=x('<link rel="icon">'),kr=x('<span class="dark:bg-slate-700/70 bg-slate-300/70 w-full py-2 px-12">Factory Globals</span>'),wr=(u,t)=>t(),Br=(u,t)=>U(t,!1),Pr=x('<div class="md:px-5 flex flex-col  gap-2 "><!> <span class="flex-grow"></span> <button class="dark:bg-green-800 dark:hover:bg-green-700  bg-green-300 hover:bg-green-400 w-full py-1">apply to existing</button> <button class="dark:bg-green-800 dark:hover:bg-green-700 bg-green-300 hover:bg-green-400 w-full py-1">apply to future</button></div>'),Tr=(u,t)=>U(t,!e(t)),Rr=(u,t)=>U(t,!e(t)),Sr=(u,t)=>U(t,!0),qr=x('<div class="flex w-full px-12 py-0.5 dark:bg-blue-700/70 bg-blue-300/70 "><label for="recipeName" class="py-2 text-center w-1/3 ">ingredient or recipe name</label> <input id="recipeName" class="flex-grow"></div>'),Nr=x('<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap justify-center"><div class="lg:max-w-xs xl:block hidden max-h-screen  ml-auto overflow-y-auto scrollbar-thin "><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto overflow-y-auto max-h-screen   scrollbar-thin"><div class="flex  text-sm py-1 gap-2 sticky top-0 z-10 bg-slate-50/70 dark:bg-slate-950/70"><!> <span class="px-3 py-3 flex-grow text-right"></span> <button> </button> <button> </button> <button class="px-3 py-3 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-l-lg">⚙️</button></div> <!></div> <div class="hidden lg:block max-w-sm w-full"><!></div></div> <!> <!>',1);function Gr(u,t){Ie(t,!0);const[a,r]=Ve(),s=()=>J(i,"$defaultTier",a),n=()=>J(e(o),"$header",a);let{defaultTier:i}=ge,l=P(()=>new et(t.data.recipeId,void 0,void 0,void 0,void 0,t.data.depth,t.data.targetAmount)),o=P(()=>e(l).header),g=ve(!1),m=ve(!1),b=ve(!1);const p=E=>{E||(E=e(l));const W=Ee(E.recipe);if(W){const F=W.Type,H=s()[F];E.tier.set(H)}Ee(E.children).forEach(F=>p(F)),U(g,!1)};let h=ve(""),S=[{label:"buildings",select:()=>U(k,"buildings")},{label:"throughput",select:()=>U(k,"throughput")}],k=ve("buildings");var q=Nr();zt(E=>{var W=yr();M(()=>{var F,H;Vt.title=(F=n())==null?void 0:F[1],Ue(W,"href",(H=n())==null?void 0:H[0])}),_(E,W)});var y=Q(q);{var v=E=>{Xe(E,{close:()=>U(g,!1),header:F=>{var H=kr();_(F,H)},children:(F,H)=>{var re=Pr(),pe=c(re);er(pe,{});var Be=f(pe,4);Be.__click=[wr,p];var Ae=f(Be,2);Ae.__click=[Br,g],d(re),_(F,re)},$$slots:{default:!0}})};A(y,E=>{e(g)&&E(v)})}var w=f(y,2),I=c(w),B=c(I);vt(B,{}),d(I);var T=f(I,2),N=c(T),O=c(N);Ir(O,{get planner(){return e(l)}});var C=f(O,4);let V;C.__click=[Tr,b];var te=c(C,!0);d(C);var j=f(C,2);let K;j.__click=[Rr,m];var be=c(j,!0);d(j);var de=f(j,2);de.__click=[Sr,g],d(N);var ae=f(N,2);De(ae,()=>e(l),E=>{pt(E,{get planner(){return e(l)}})}),d(T);var _e=f(T,2),$=c(_e);De($,()=>e(l),E=>{gt(E,{get planner(){return e(l)}})}),d(_e),d(w);var we=f(w,2);{var Te=E=>{Xe(E,{close:()=>U(m,!1),header:F=>{var H=qr(),re=f(c(H),2);tt(re),d(H),at(re,()=>e(h),pe=>U(h,pe)),_(F,H)},children:(F,H)=>{vt(F,{get recipeName(){return e(h)}})},$$slots:{header:!0,default:!0}})};A(we,E=>{e(m)&&E(Te)})}var ee=f(we,2);{var ce=E=>{Xe(E,{close:()=>U(b,!1),header:F=>{mt(F,{options:S,get selectedOption(){return e(k)},label:"required"})},children:(F,H)=>{var re=he(),pe=Q(re);De(pe,()=>e(l),Be=>{gt(Be,{get planner(){return e(l)},get activeTally(){return e(k)}})}),_(F,re)},$$slots:{header:!0,default:!0}})};A(ee,E=>{e(b)&&E(ce)})}M((E,W)=>{V=le(C,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg lg:hidden",null,V,E),D(te,e(b)?"✖️":"📃"),K=le(j,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg xl:hidden",null,K,W),D(be,e(m)?"✖️":"🔍")},[()=>({"dark:bg-slate-600":e(m),"dark:bg-slate-800":!e(m)}),()=>({"dark:bg-slate-600":e(m),"dark:bg-slate-800":!e(m)})]),_(u,q),ye(),r()}Oe(["click"]);export{Gr as component,Ur as universal};
