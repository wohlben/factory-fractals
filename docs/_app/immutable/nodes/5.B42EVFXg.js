var vt=Object.defineProperty;var pt=(d,s,e)=>s in d?vt(d,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[s]=e;var A=(d,s,e)=>pt(d,typeof s!="symbol"?s+"":s,e);import{c as _e,a as b,t as k,b as mt}from"../chunks/e-TftYpV.js";import{at as ft,aG as ht,Q as bt,z as _t,A as we,B as gt,K as It,J as xt,L as yt,U as kt,p as ge,f as W,g as r,b as pe,a as Ie,s as I,c as p,r as c,h as se,t as O,M as Le,e as ee}from"../chunks/DKDpRE7g.js";import{d as xe,s as L}from"../chunks/CQBbwnrn.js";import{i as z}from"../chunks/PbJpwx8q.js";import{t as Pt,s as ve,c as Ge,b as wt,o as Oe}from"../chunks/Cs5HLVpE.js";import{s as $e,a as B}from"../chunks/DSW42VuP.js";import{D as m,e as me,i as fe,I as St}from"../chunks/CRa7tc_X.js";import{w as X,d as q,g as ae}from"../chunks/DRXOzK2u.js";import{r as Ke,b as Ue,L as $t,s as At}from"../chunks/BCod4-4X.js";import{p as Me}from"../chunks/BlFFt1pI.js";import{i as Et}from"../chunks/CaJYm0qw.js";function Je(d,s,e){we&&gt();var a=d,n=kt,t,i=ft()?ht:bt;_t(()=>{i(n,n=s())&&(t&&It(t),t=xt(()=>e(a)))}),we&&(a=yt)}function Ce(d,s,e,a){var n=d.__style;if(we||n!==s){var t=Pt(s);(!we||t!==d.getAttribute("style"))&&(t==null?d.removeAttribute("style"):d.style.cssText=t),d.__style=s}return a}const Rt=!1,Bt=({params:d,url:s})=>{const{id:e}=d,a=Number(e),n=s.searchParams.get("depth"),t=s.searchParams.get("targetAmount");return{recipeId:a,depth:n&&parseInt(n)||1,targetAmount:t&&parseInt(t)||1}},Ar=Object.freeze(Object.defineProperty({__proto__:null,load:Bt,prerender:Rt},Symbol.toStringTag,{value:"Module"})),re=(d,s)=>{const e=localStorage==null?void 0:localStorage.getItem(`dt.${d}`);return e?X(parseFloat(e)):X(s)},ce={defaultTier:{Smelt:re("Smelt",1),Assemble:re("Assemble",.75),Research:re("Research",1),Chemical:re("Chemical",1),Refine:re("Refine",1),Particle:re("Particle",1),Fractionate:re("Fractionate",1),Proliferator:re("Proliferator",1)},availableTiers:{Smelt:[1,2],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1],Particle:[1],Fractionate:[1],Proliferator:[.125,.2,.25]}};class Nt{constructor(s,e,a,n,t,i,l){this.recipeId=s,this.itemId=e,this.targetAmount=a,this.targetInterval=n,this.tier=t,this.proliferator=i,this.timeSpend=l}}const De=(d,s)=>{const e={...d};return Object.entries(s).forEach(([a,n])=>{const t=Number(a);e[t]=n}),e};class Se extends Nt{constructor(e,a,n,t,i=0,l=1,f){var v;const _=!!(a&&(m.canBeExtracted[a]||m.canBeMined[a]));!e&&!_&&(e=(v=m.alternativeRecipe[a])==null?void 0:v[0]);const w=X(e),u=e?m.recipe[e]:void 0;let P=u==null?void 0:u.Results.findIndex(y=>a===y);const D=!a;!a&&(P??-1)>=0&&(a=u==null?void 0:u.Results[P??0]);const C=X(a),o=X((u==null?void 0:u.ResultCounts[P??0])??f??1),g=n?q([C,n],([y,K])=>K[y]):o,x=X(u!=null&&u.Type?ae(ce.defaultTier[u.Type]):1),E=X(ae(ce.defaultTier.Proliferator)),N=X(0),h=q([w,x],([y,K])=>{var J;return((J=m.recipe[y])==null?void 0:J.TimeSpend)/K});t||(t=q([N,h],([y,K])=>y>0?y:K));super(w,C,g,t,x,E,h);A(this,"amountEditable");A(this,"manualAmount",X());A(this,"manualInterval");A(this,"children",X([]));A(this,"canBeMined",q(this.itemId,e=>m.canBeMined[e]));A(this,"canBeExtracted",q(this.itemId,e=>m.canBeExtracted[e]));A(this,"item",q(this.itemId,e=>m.item[e]));A(this,"recipe",q(this.recipeId,e=>m.recipe[e]));A(this,"options",q(this.itemId,e=>m.alternativeRecipe[e]));A(this,"timeSpendChanged",q(this.timeSpend,(e,a)=>{a(!!e);const n=setTimeout(()=>a(!e),1400);return()=>clearTimeout(n)}));A(this,"relativeSpeed",q([this.targetInterval,this.timeSpend],([e,a])=>e/a));A(this,"requiredBuildings",q([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([e,a,n,t,i])=>{const l=a==null?void 0:a.Results.findIndex(_=>n===_),f=e/(a==null?void 0:a.ResultCounts[l])/t;return isNaN(f)?e:f}));A(this,"providedItemsPerInterval",q([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([e,a,n,t,i])=>{if(!e&&t&&(m.canBeMined[t]||m.canBeExtracted[t]))return{[t]:i};const l={};return e==null||e.Results.forEach((f,_)=>{l[f]=e.ResultCounts[_]*a*n}),l}));A(this,"childrenProvideItemsPerInterval",q(this.children,(e,a)=>{const n=new Array(e.length),t=e.map((l,f)=>l.providedItemsPerInterval.subscribe(_=>{n[f]=_;const w=n.filter(u=>!!u).reduce((u,P)=>De(u,P),{});a(w)})),i=n.filter(l=>!!l).reduce((l,f)=>De(l,f),{});return a(i),()=>t.forEach(l=>l())}));A(this,"childrenByItemId",q(this.children,(e,a)=>{const n=new Array(e.length),t=e.map((l,f)=>l.itemId.subscribe(_=>{n[f]=[_,l];const w=n.filter(u=>!!u).reduce((u,[P,D])=>(u[P]=D,u),{});a(w)})),i=n.filter(l=>!!l).reduce((l,[f,_])=>(l[f]=_,l),{});return a(i),()=>t.forEach(l=>l())}));A(this,"requiredItemsPerInterval",q([this.recipe,this.relativeSpeed,this.requiredBuildings],([e,a,n])=>{const t={};return e==null||e.Items.forEach((i,l)=>t[i]=e.ItemCounts[l]*a*n),t}));A(this,"inputsOutputs",q([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([e,a,n])=>{const t=new Set;return Object.keys(a).forEach(i=>{t.add(Number(i))}),Object.keys(e??{}).forEach(i=>{t.add(Number(i))}),Object.keys(n).forEach(i=>{t.add(Number(i))}),t}));A(this,"surplus",q([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([e,a,n,t])=>{const i=De(e,n);return Object.entries(a).forEach(([l,f])=>i[Number(l)]=(i[Number(l)]??0)-f),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));A(this,"deficit",q([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([e,a])=>{const n={...e};return Object.entries(a).forEach(([t,i])=>n[Number(t)]=(n[Number(t)]??0)-i),Object.entries(n).filter(([,t])=>t>=0).forEach(([t])=>delete n[Number(t)]),Object.keys(n).forEach(t=>{var l;const i=Number(t);(l=m.producedVia[i])!=null&&l.length||delete n[i]}),n}));A(this,"totals",q([this.itemId,this.requiredBuildings,this.children],([e,a,n])=>{const t={};return t[e]=a,n.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,f])=>{const _=Number(l);t[_]=(t[_]??0)+f})}),t}));this.depth=i,this.amountEditable=D,this.manualAmount=o,this.manualInterval=N,l>i&&this.children.set(this.dbd(l))}setAmount(e){this.manualAmount.set(e)}setRecipeId(e){this.recipeId.set(e),this.expand()}deleteChild(e){this.children.update(a=>{const n=a.findIndex(t=>ae(t.itemId)===e);return a.splice(n,1),a})}setInterval(e){this.manualInterval.set(e)}expand(){this.children.set(this.dbd())}planFor(e){this.children.update(a=>(a.push(new Se(void 0,e,this.requiredItemsPerInterval,this.targetInterval,this.depth+1)),a))}dbd(e){const a=[],n=ae(this.recipe);return n==null||n.Items.forEach((t,i)=>{var _;if(!((_=m.alternativeRecipe[t])!=null&&_.length))return;const l=new Se(void 0,t,this.requiredItemsPerInterval,this.targetInterval,this.depth+1,e);a.push(l);const f=ae(l.providedItemsPerInterval);Object.entries(f).forEach(([w,u])=>{})}),a}}var Tt=(d,s,e)=>s(r(e)),qt=k("<button> </button>"),Ot=k('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),Ct=(d,s)=>se(s,!0),Dt=k('<button class="text-center min-w-16 h-10 rounded-l-lg bg-slate-800 hover:bg-slate-700 py-2 px-3 flex justify-around items-end gap-2 relative "><span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function Mt(d,s){ge(s,!0);const[e,a]=$e(),n=()=>B(l,"$recipe",e),t=()=>B(f,"$tier",e),i=()=>B(_,"$requiredBuildings",e);let{recipe:l,tier:f,requiredBuildings:_}=s.planner,w=pe(!1);const u=g=>{s.planner.tier.set(g),se(w,!1)};var P=_e(),D=W(P);{var C=g=>{var x=Ot(),E=I(p(x),2);me(E,1,()=>ce.availableTiers[n().Type],fe,(N,h)=>{var v=qt();let y;v.__click=[Tt,u,h];var K=p(v,!0);c(v),O(J=>{y=ve(v,1,"px-2 py-1 outline-slate-600 hover:bg-slate-700 text-sm  rounded",null,y,J),L(K,r(h))},[()=>({"outline-1":r(h)===t(),active:r(h)===t()})]),b(N,v)}),c(x),b(g,x)},o=g=>{var x=Dt();x.__click=[Ct,w];var E=p(x),N=p(E);c(E);var h=I(E,2),v=p(h,!0);c(h),c(x),O(y=>{L(N,`tier ${t()??""}`),L(v,y)},[()=>Math.round(i()*100)/100]),b(g,x)};z(D,g=>{r(w)?g(C):g(o,!1)})}b(d,P),Ie(),a()}xe(["click"]);var jt=(d,s)=>s.deletecb(),Ft=k(`<style scoped="">input[type=number]::-webkit-inner-spin-button {
              opacity: 1
          }</style> <input type="number" class="text-left rounded-r-lg w-16">`,1),Vt=k('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <span class="text-sm py-2 block pr-4"> </span></div>'),zt=k("<option>extraction/mining</option>"),Lt=k("<option> </option>"),Ut=k(" <select><!><!></select>",1),Gt=(d,s,e,a)=>{var n;return r(s)<0&&((n=m.producedVia[r(e)])==null?void 0:n.length)>0&&a.planner.planFor(r(e))},Kt=k('<div class="flex items-center"><span class="pl-2">📝</span>️ <span class="text-sm py-2 block pr-4"> </span></div>'),Jt=k('<div class="flex items-center"><span class="px-3.5"></span>️ <span class="text-sm py-2 block pr-4"> </span></div>'),Qt=k("<div><!></div>"),Zt=k('<div class="flex gap-2"><button><!></button> <!></div>'),Ht=k('<div class="flex flex-col gap-0.5"></div>'),Wt=k('<div class="flex gap-1 max-w-2xl items-center"><button class="bg-slate-800 hover:bg-slate-700  text-center rounded-r-lg  "><!></button> <div class="flex-grow px-4"><h5><!></h5></div> <!></div> <!>',1);function Qe(d,s){ge(s,!0);const[e,a]=$e(),n=()=>B(J,"$targetAmount",e),t=()=>B(N,"$recipeId",e),i=()=>B(x,"$itemId",e),l=()=>B(Ee,"$options",e),f=()=>B(g,"$item",e),_=()=>B(E,"$recipe",e),w=()=>B(v,"$requiredBuildings",e),u=()=>B(ke,"$inputsOutputs",e),P=()=>B(Ae,"$providedItemsPerInterval",e),D=()=>B(ye,"$childrenProvideItemsPerInterval",e),C=()=>B(he,"$requiredItemsPerInterval",e),o=()=>B(K,"$childrenByItemId",e);let{item:g,itemId:x,recipe:E,recipeId:N,targetInterval:h,requiredBuildings:v,children:y,childrenByItemId:K,targetAmount:J,childrenProvideItemsPerInterval:ye,providedItemsPerInterval:Ae,requiredItemsPerInterval:he,inputsOutputs:ke,deficit:je,options:Ee,tier:Fe}=s.planner,de=pe(Me(n())),S=pe(Me(t()));Le(()=>{s.planner.amountEditable&&n()!==r(de)&&s.planner.setAmount(r(de))}),Le(()=>{r(S)!==t()&&s.planner.setRecipeId(r(S))});var M=Wt(),j=W(M),Z=p(j);Z.__click=[jt,s];var Re=p(Z);{var Ze=$=>{var T=Ft(),U=I(W(T),2);Ke(U),Ge(U,()=>r(de),R=>se(de,R)),b($,T)},He=$=>{var T=Vt(),U=I(p(T),2),R=p(U,!0);c(U),c(T),O(ne=>{Ce(U,`padding-left: ${s.planner.depth*1.1}rem`),L(R,ne)},[()=>Math.round(n()*100)/100]),b($,T)};z(Re,$=>{s.planner.amountEditable?$(Ze):$(He,!1)})}c(Z);var Be=I(Z,2),Ve=p(Be),We=p(Ve);{var Xe=$=>{var T=Ut(),U=W(T),R=I(U),ne=p(R);{var H=Y=>{var F=zt();F.value=(F.__value=void 0)==null?"":void 0,O(()=>Ue(F,t()===void 0)),b(Y,F)};z(ne,Y=>{(m.canBeExtracted[i()]||m.canBeMined[i()])&&Y(H)})}var Pe=I(ne);me(Pe,1,l,fe,(Y,F)=>{var Q=Lt(),le={},Ne=p(Q,!0);c(Q),O(()=>{le!==(le=m.recipe[r(F)].ID)&&(Q.value=(Q.__value=m.recipe[r(F)].ID)==null?"":m.recipe[r(F)].ID),Ue(Q,N===m.recipe[r(F)].ID),L(Ne,m.recipe[r(F)].Name)}),b(Y,Q)}),c(R),O(()=>L(U,`${f().Name??""}: `)),wt(R,()=>r(S),Y=>se(S,Y)),b($,T)},Ye=$=>{var T=mt();O(()=>{var U;return L(T,(U=_())==null?void 0:U.Name)}),b($,T)};z(We,$=>{i()&&(l().length>1||l().length>=1&&m.canBeExtracted[i()]||m.canBeMined[i()])?$(Xe):$(Ye,!1)})}c(Ve),c(Be);var et=I(Be,2);{var tt=$=>{Mt($,{get planner(){return s.planner}})};z(et,$=>{w()&&t()&&$(tt)})}c(j);var rt=I(j,2);{var at=$=>{var T=Ht();me(T,5,u,fe,(U,R)=>{var ne=_e();const H=ee(()=>{var F,Q,le;return(((F=P())==null?void 0:F[r(R)])??0)+(((Q=D())==null?void 0:Q[r(R)])??0)-(((le=C())==null?void 0:le[r(R)])??0)}),Pe=ee(()=>o()[r(R)]);var Y=W(ne);Je(Y,()=>r(R),F=>{var Q=_e(),le=W(Q);{var Ne=ue=>{Qe(ue,{get planner(){return r(Pe)},deletecb:()=>s.planner.deleteChild(r(R))})},st=ue=>{var Te=Zt(),be=p(Te);let ze;be.__click=[Gt,H,R,s];var nt=p(be);{var lt=V=>{var G=Kt(),te=I(p(G),2),ie=p(te,!0);c(te),c(G),O(oe=>{Ce(te,`padding-left: ${(s.planner.depth+.5)*1.1}rem`),L(ie,oe)},[()=>Math.round(r(H)*100)/100]),b(V,G)},it=(V,G)=>{{var te=ie=>{var oe=Jt(),qe=I(p(oe),2),dt=p(qe,!0);c(qe),c(oe),O(ut=>{Ce(qe,`padding-left: ${(s.planner.depth+.5)*1.1}rem`),L(dt,ut)},[()=>Math.round(r(H)*100)/100]),b(ie,oe)};z(V,ie=>{r(R)!==i()&&r(H)!==0&&ie(te)},G)}};z(nt,V=>{var G;r(H)<0&&((G=m.producedVia[r(R)])==null?void 0:G.length)>0?V(lt):V(it,!1)})}c(be);var ot=I(be,2);{var ct=V=>{var G=Qt();let te;var ie=p(G);St(ie,{get itemId(){return r(R)}}),c(G),O(oe=>te=ve(G,1,"flex gap-2 items-center",null,te,oe),[()=>({"text-green-500":r(H)>0,"text-red-500":r(H)<0})]),b(V,G)};z(ot,V=>{r(R)!==i()&&r(H)!==0&&V(ct)})}c(Te),O(V=>ze=ve(be,1,"bg-slate-800 text-center rounded-r-lg",null,ze,V),[()=>{var V;return{"hover:bg-slate-700":r(H)<0&&((V=m.producedVia[r(R)])==null?void 0:V.length)>0}}]),b(ue,Te)};z(le,ue=>{r(Pe)?ue(Ne):ue(st,!1)})}b(F,Q)}),b(U,ne)}),c(T),b($,T)};z(rt,$=>{var T;((T=u())==null?void 0:T.size)>0&&$(at)})}b(d,M),Ie(),a()}xe(["click"]);var Xt=k('<div class="flex flex-col items-stretch group w-full "><div class="my-2 z-30"><a class="w-xs"> </a></div></div>'),Yt=k('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur-3xl backdrop-opacity-75  z-50"><!> <label for="recipeName">ingredient or recipe name</label><input id="recipeName"></div> <!>',1);function er(d,s){ge(s,!0);let e=pe(Me([])),a=Oe(),n=Oe(),t=Oe(),i=pe(""),l=ee(()=>r(i)?m.items.filter(o=>o.Name.toLowerCase().includes(r(i).toLowerCase())).map(o=>o.ID):[]),f=ee(()=>(()=>{const o=new Set;return r(l).forEach(g=>{for(const x of m.relatedRecipes[g]??[])o.add(x)}),o})()),_=ee(()=>m.recipees.filter(o=>r(e).length>0?r(e).includes(o.Type):!0).filter(o=>r(i)?r(f).has(o.ID):!0).filter(o=>a.checked===null?!0:a.checked?m.buildableRecipees.has(o.ID):!m.buildableRecipees.has(o.ID)).filter(o=>n.checked===null?!0:n.checked?m.fluidRecipees.has(o.ID):!m.fluidRecipees.has(o.ID)).filter(o=>t.checked===null?!0:t.checked?m.entityRecipees.has(o.ID):!m.entityRecipees.has(o.ID)));new Set(m.recipees.map(o=>o.Type));var w=Yt(),u=W(w),P=p(u);z(P,o=>{});var D=I(P,3);Ke(D),c(u);var C=I(u,2);me(C,17,()=>r(_),fe,(o,g)=>{var x=Xt(),E=p(x),N=p(E),h=p(N,!0);c(N),c(E),c(x),O(v=>{At(N,"href",v),L(h,r(g).Name)},[()=>$t.recipe(r(g).ID)]),b(o,x)}),Ge(D,()=>r(i),o=>se(i,o)),b(d,w),Ie()}xe(["click"]);var tr=k('<button class="flex-grow shadow-xl py-2 m-4 outline-amber-100 outline-1 active bg-slate-500 hover:bg-slate-400  text-white rounded-lg"> </button>'),rr=k('<button class="flex-grow shadow-xl py-2 m-4	bg-slate-800 hover:bg-slate-700 text-gray-300 rounded-lg"> </button>'),ar=k('<button class="flex-grow shadow-xl py-2 m-4 outline-amber-100 outline-1 active rounded-lg bg-slate-500 hover:bg-slate-400  text-white"> </button>'),sr=k('<button class="flex-grow shadow-xl py-2 m-4 bg-slate-800 hover:bg-slate-700 text-gray-300 rounded-lg"> </button>'),nr=k('<h3 class="bg-blue-800  rounded-t py-5 px-4">default tier for new factories</h3> <div><h4 class="bg-blue-900 py-2 px-4 rounded-t">Smelting</h4> <div class="flex bg-gray-600 "></div></div> <div><h4 class="bg-blue-900 py-2 px-4 rounded-t">Assembler</h4> <div class="flex bg-gray-600 "></div></div>',1);function lr(d,s){ge(s,!1);const[e,a]=$e(),n=()=>B(i,"$Smelt",e),t=()=>B(l,"$Assemble",e);let{Smelt:i,Assemble:l}=ce.defaultTier;const f=(C,o,g)=>{localStorage.setItem(`dt.${C}`,o),g.set(o)};Et();var _=nr(),w=I(W(_),2),u=I(p(w),2);me(u,5,()=>ce.availableTiers.Smelt,fe,(C,o)=>{var g=_e(),x=W(g);{var E=h=>{var v=tr();v.__click=()=>f("Smelt",r(o),i);var y=p(v,!0);c(v),O(()=>L(y,r(o))),b(h,v)},N=h=>{var v=rr();v.__click=()=>f("Smelt",r(o),i);var y=p(v,!0);c(v),O(()=>L(y,r(o))),b(h,v)};z(x,h=>{r(o)===n()?h(E):h(N,!1)})}b(C,g)}),c(u),c(w);var P=I(w,2),D=I(p(P),2);me(D,5,()=>ce.availableTiers.Assemble,fe,(C,o)=>{var g=_e(),x=W(g);{var E=h=>{var v=ar();v.__click=()=>f("Assemble",r(o),l);var y=p(v,!0);c(v),O(()=>L(y,r(o))),b(h,v)},N=h=>{var v=sr();v.__click=()=>f("Assemble",r(o),l);var y=p(v,!0);c(v),O(()=>L(y,r(o))),b(h,v)};z(x,h=>{r(o)===t()?h(E):h(N,!1)})}b(C,g)}),c(D),c(P),b(d,_),Ie(),a()}xe(["click"]);var ir=(d,s)=>s(),or=(d,s)=>se(s,!1),cr=k('<dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2"><!> <span class="flex-grow"></span> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to existing</button> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to future</button></dialog>'),dr=(d,s)=>r(s).setInterval(0),ur=(d,s,e)=>r(s).setInterval(e),vr=(d,s)=>r(s).setInterval(60),pr=k("<button>Second</button>"),mr=(d,s)=>se(s,!0),fr=k(`<!> <div class="flex gap-12"><div class="max-w-sm lg:block hidden max-h-screen  ml-auto overflow-y-auto"><!></div> <div class="max-w-2xl w-full mr-auto ml-auto lg:ml-0"><div class="flex  text-sm py-1"><span class="px-3 py-1 bg-slate-800 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <!></span></span> <span class="px-3 py-3 flex-grow text-right"></span> <button class="px-3 py-3 bg-slate-800 hover:bg-slate-700 rounded-l-lg">⚙️ Required Fabs to Process
				Items</button></div> <!></div></div>`,1);function Er(d,s){ge(s,!0);const[e,a]=$e(),n=()=>B(r(w),"$timeSpendChanged",e),t=()=>B(r(f),"$targetInterval",e),i=()=>B(r(_),"$timeSpend",e);let l=ee(()=>new Se(s.data.recipeId,void 0,void 0,void 0,void 0,s.data.depth,s.data.targetAmount)),f=ee(()=>r(l).targetInterval),_=ee(()=>r(l).timeSpend),w=ee(()=>r(l).timeSpendChanged);const u=60*60;let P=pe(!1);const D=S=>{S||(S=r(l));const M=ae(S.recipe);if(M){const j=M.Type,Z=ae(ce.defaultTier[j]);S.tier.set(Z)}ae(S.children).forEach(j=>D(j)),se(P,!1)};var C=fr(),o=W(C);{var g=S=>{var M=cr(),j=p(M);lr(j,{});var Z=I(j,4);Z.__click=[ir,D];var Re=I(Z,2);Re.__click=[or,P],c(M),b(S,M)};z(o,S=>{r(P)&&S(g)})}var x=I(o,2),E=p(x),N=p(E);er(N,{}),c(E);var h=I(E,2),v=p(h),y=p(v),K=I(p(y)),J=p(K);let ye;J.__click=[dr,l];var Ae=p(J);c(J);var he=I(J,2);let ke;he.__click=[ur,l,u];var je=I(he,2);{var Ee=S=>{var M=pr();let j;M.__click=[vr,l],O(Z=>j=ve(M,1,"px-1.5 py-2 multi hover:bg-slate-700",null,j,Z),[()=>({active:t()===60})]),b(S,M)};z(je,S=>{i()!==60&&S(Ee)})}c(K),c(y);var Fe=I(y,4);Fe.__click=[mr,P],c(v);var de=I(v,2);Je(de,()=>r(l),S=>{Qe(S,{get planner(){return r(l)}})}),c(h),c(x),O((S,M,j)=>{ye=ve(J,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ye,S),L(Ae,`Cycle (${M??""}s)`),ke=ve(he,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ke,j)},[()=>({"animate-flash":n(),active:t()===i()}),()=>Math.round(i()/60*100)/100,()=>({active:t()===u})]),b(d,C),Ie(),a()}xe(["click"]);export{Er as component,Ar as universal};
