var mt=Object.defineProperty;var ft=(g,r,t)=>r in g?mt(g,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):g[r]=t;var z=(g,r,t)=>ft(g,typeof r!="symbol"?r+"":r,t);import{c as Ee,t as k,a as m,b as Le}from"../chunks/BmHjAyxW.js";import{au as _t,aH as xt,X as It,z as yt,A as He,B as kt,K as Bt,J as wt,L as Pt,U as Rt,p as xe,f as te,t as O,g as e,e as B,a as Ie,b as _e,s as p,c,r as o,h as le,M as lt,aI as Tt}from"../chunks/B-82rzdC.js";import{d as $e,s as F,a as qt}from"../chunks/D897dbaB.js";import{i as M}from"../chunks/BfA0D6Yw.js";import{s as Je,r as et,b as st,L as Ye}from"../chunks/h91-G9kU.js";import{t as St,s as he,c as tt,b as Et,o as We}from"../chunks/C3CEGPiq.js";import{s as ze,a as A}from"../chunks/D2GXNv7x.js";import{D as x,e as me,i as fe,I as Nt}from"../chunks/gwZSL3j3.js";import{w as Pe,d as G,g as Ve}from"../chunks/DWHFLt1U.js";import{a as rt}from"../chunks/0LzIBmdC.js";import{p as at}from"../chunks/Cg9itU8Q.js";function Ue(g,r,t){He&&kt();var a=g,s=Rt,n,i=_t()?xt:It;yt(()=>{i(s,s=r())&&(n&&Bt(n),n=wt(()=>t(a)))}),He&&(a=Pt)}function Xe(g,r,t,a){var s=g.__style;if(He||s!==r){var n=St(r);(!He||n!==g.getAttribute("style"))&&(n==null?g.removeAttribute("style"):g.style.cssText=n),g.__style=r}return a}const At=!1,$t=({params:g,url:r})=>{const{id:t}=g,a=Number(t),s=r.searchParams.get("depth"),n=r.searchParams.get("targetAmount");return{recipeId:a,depth:s&&parseInt(s)||1,targetAmount:n&&parseInt(n)||1}},ca=Object.freeze(Object.defineProperty({__proto__:null,load:$t,prerender:At},Symbol.toStringTag,{value:"Module"})),Ot=()=>{const g=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(g){const r=JSON.parse(g);return Pe(r)}},ue={defaultTier:Ot()??Pe({Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:1}),availableTiers:{Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[.125,.2,.25]},factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,2:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{.125:1141,.2:1142,.25:1143}}};class Ct{constructor(r,t,a,s,n,i,l){this.recipeId=r,this.itemId=t,this.targetAmount=a,this.targetInterval=s,this.tier=n,this.proliferator=i,this.timeSpend=l}}const De=(g,r)=>{const t={...g};return Object.entries(r).forEach(([a,s])=>{const n=Number(a);t[n]=(t[n]??0)+s}),t};class Ze extends Ct{constructor(t,a,s,n,i=0,l=1,d){var J;const h=!!(a&&(x.canBeExtracted[a]||x.canBeMined[a]));!t&&!h&&(t=(J=x.alternativeRecipe[a])==null?void 0:J[0]);const v=Pe(t),b=t?x.recipe[t]:void 0;let _=b==null?void 0:b.Results.findIndex(S=>a===S);const I=!a;!a&&(_??-1)>=0&&(a=b==null?void 0:b.Results[_??0]);const w=Pe(a),u=Pe((b==null?void 0:b.ResultCounts[_??0])??d??1),f=s?G([w,s],([S,K])=>K[S]):u,y=Pe(b!=null&&b.Type?Ve(ue.defaultTier)[b.Type]:1),P=Pe(Ve(ue.defaultTier).Proliferator),D=Pe(0),R=G([v,y],([S,K])=>{var T;return((T=x.recipe[S])==null?void 0:T.TimeSpend)/K});n||(n=G([D,R],([S,K])=>S>0?S:K));super(v,w,f,n,y,P,R);z(this,"amountEditable");z(this,"manualAmount",Pe());z(this,"manualInterval");z(this,"children",Pe([]));z(this,"canBeMined",G(this.itemId,t=>x.canBeMined[t]));z(this,"canBeExtracted",G(this.itemId,t=>x.canBeExtracted[t]));z(this,"item",G(this.itemId,t=>x.item[t]));z(this,"recipe",G(this.recipeId,t=>x.recipe[t]));z(this,"header",G([this.itemId,this.recipe],([t,a])=>{var d;const s=t??((d=a==null?void 0:a.Results)==null?void 0:d[0]);if(!s)return;const n=x.item[s],i=n.IconPath.split("/"),l=i[i.length-1];return l&&[rt+`/dsp_sprites/${l}.png`,n.Name]}));z(this,"options",G(this.itemId,t=>x.alternativeRecipe[t]));z(this,"timeSpendChanged",G(this.timeSpend,(t,a)=>{a(!!t);const s=setTimeout(()=>a(!t),1400);return()=>clearTimeout(s)}));z(this,"relativeSpeed",G([this.targetInterval,this.timeSpend],([t,a])=>t/a));z(this,"requiredBuildings",G([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([t,a,s,n,i])=>{const l=a==null?void 0:a.Results.findIndex(h=>s===h),d=t/(a==null?void 0:a.ResultCounts[l])/n;return isNaN(d)?t:d}));z(this,"providedItemsPerInterval",G([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([t,a,s,n,i])=>{if(!t&&n&&(x.canBeMined[n]||x.canBeExtracted[n]))return{[n]:i};const l={};return t==null||t.Results.forEach((d,h)=>{l[d]=t.ResultCounts[h]*a*s}),l}));z(this,"childrenProvideItemsPerInterval",G(this.children,(t,a)=>{const s=new Array(t.length),n=t.map((l,d)=>l.providedItemsPerInterval.subscribe(h=>{s[d]=h;const v=s.filter(b=>!!b).reduce((b,_)=>De(b,_),{});a(v)})),i=s.filter(l=>!!l).reduce((l,d)=>De(l,d),{});return a(i),()=>n.forEach(l=>l())}));z(this,"requiredBuildingsByRecipeId",G([this.children,this.recipeId,this.requiredBuildings],([t,a,s],n)=>{const i=new Array(t.length),l=t.map((h,v)=>h.requiredBuildingsByRecipeId.subscribe(b=>{i[v]=b;const _=i.filter(I=>!!I).reduce((I,w)=>De(I,w),{});if(a){const I=a;_[I]=(_[I]??0)+s}n(_)})),d=i.filter(h=>!!h).reduce((h,v)=>De(h,v),{});if(a){const h=a;d[h]=(d[h]??0)+s}return n(d),()=>l.forEach(h=>h())}));z(this,"fabsByType",G(this.requiredBuildingsByRecipeId,t=>Object.entries(t).reduce((a,[s,n])=>{const i=Number(s),l=x.recipe[i].Type;return a[l]=(a[l]??0)+Math.ceil(n),a},{})));z(this,"childrenByItemId",G(this.children,(t,a)=>{const s=new Array(t.length),n=t.map((l,d)=>l.itemId.subscribe(h=>{s[d]=[h,l];const v=s.filter(b=>!!b).reduce((b,[_,I])=>(b[_]=I,b),{});a(v)})),i=s.filter(l=>!!l).reduce((l,[d,h])=>(l[d]=h,l),{});return a(i),()=>n.forEach(l=>l())}));z(this,"requiredItemsPerInterval",G([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,s])=>{const n={};return t==null||t.Items.forEach((i,l)=>n[i]=t.ItemCounts[l]*a*s),n}));z(this,"deficitRequiredItemsPerInterval",G([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,s])=>{const n={};return t==null||t.Items.forEach((i,l)=>n[i]=-(t.ItemCounts[l]*a*s)),n}));z(this,"inputsOutputs",G([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([t,a,s])=>{const n=new Set;return Object.keys(a).forEach(i=>{n.add(Number(i))}),Object.keys(t??{}).forEach(i=>{n.add(Number(i))}),Object.keys(s).forEach(i=>{n.add(Number(i))}),n}));z(this,"surplus",G([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([t,a,s,n])=>{const i=De(t,s);return Object.entries(a).forEach(([l,d])=>i[Number(l)]=(i[Number(l)]??0)-d),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));z(this,"deficit",G([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([t,a])=>{const s={...t};return Object.entries(a).forEach(([n,i])=>s[Number(n)]=(s[Number(n)]??0)-i),Object.entries(s).filter(([,n])=>n>=0).forEach(([n])=>delete s[Number(n)]),s}));z(this,"deficitByItemId",G([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([t,a,s,n,i],l)=>{const d=new Array(t.length),h=t.map((b,_)=>b.deficitByItemId.subscribe(I=>{d[_]=I;const w=d.filter(u=>!!u).reduce((u,f)=>De(u,f),s?a:{[n]:-i});l(w)})),v=d.filter(b=>!!b).reduce((b,_)=>De(b,_),s?a:{[n]:-i});return l(v),()=>h.forEach(b=>b())}));z(this,"totals",G([this.itemId,this.requiredBuildings,this.children],([t,a,s])=>{const n={};return n[t]=a,s.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,d])=>{const h=Number(l);n[h]=(n[h]??0)+d})}),n}));this.depth=i,this.amountEditable=I,this.manualAmount=u,this.manualInterval=D,l>i&&this.children.set(this.dbd(l))}setAmount(t){this.manualAmount.set(t)}setRecipeId(t){this.recipeId.set(t),this.expand()}deleteChild(t){this.children.update(a=>{const s=a.findIndex(n=>Ve(n.itemId)===t);return a.splice(s,1),a})}setInterval(t){this.manualInterval.set(t)}expand(){this.children.set(this.dbd())}planFor(t){this.children.update(a=>(a.push(new Ze(void 0,t,this.requiredItemsPerInterval,this.targetInterval,this.depth+1)),a))}dbd(t){const a=[],s=Ve(this.recipe);return s==null||s.Items.forEach((n,i)=>{var h;if(!((h=x.alternativeRecipe[n])!=null&&h.length))return;const l=new Ze(void 0,n,this.requiredItemsPerInterval,this.targetInterval,this.depth+1,t);a.push(l);const d=Ve(l.providedItemsPerInterval);Object.entries(d).forEach(([v,b])=>{})}),a}}var Mt=k('<img class="h-6" alt="">');function Re(g,r){xe(r,!0);let t=B(()=>x.item[r.itemId]);const a=B(()=>{var d;return(d=e(t))==null?void 0:d.IconPath.split("/")}),s=B(()=>e(a)&&e(a)[e(a).length-1]),n=B(()=>e(s)&&rt+`/dsp_sprites/${e(s)}.png`);var i=Ee(),l=te(i);Ue(l,()=>r.itemId,d=>{var h=Mt();O(()=>Je(h,"src",e(n))),m(d,h)}),m(g,i),Ie()}var jt=(g,r,t)=>r(e(t)),Dt=k("<button> <!></button>"),Vt=k('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),zt=(g,r)=>le(r,!0),Ft=k('<button class="text-center min-w-16 h-10 rounded-l-lg dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-600 hover:bg-slate-400 py-2 px-3 flex justify-around items-end gap-2 relative "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function Lt(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(l,"$recipe",t),n=()=>A(d,"$tier",t),i=()=>A(h,"$requiredBuildings",t);let{recipe:l,tier:d,requiredBuildings:h}=r.planner,v=_e(!1);const b=f=>{r.planner.tier.set(f),le(v,!1)};var _=Ee(),I=te(_);{var w=f=>{var y=Vt(),P=p(c(y),2);me(P,1,()=>ue.availableTiers[s().Type],fe,(D,R)=>{var J=Dt();let S;J.__click=[jt,b,R];var K=c(J),T=p(K);Re(T,{get itemId(){var U;return ue.factoryItems[(U=s())==null?void 0:U.Type][e(R)]}}),o(J),O(U=>{S=he(J,1,"px-2 py-1 outline-slate-600 dark:hover:bg-slate-600 hover:bg-slate-400 text-sm  rounded",null,S,U),F(K,`${e(R)??""} `)},[()=>({"outline-1":e(R)===n(),active:e(R)===n()})]),m(D,J)}),o(y),m(f,y)},u=f=>{var y=Ft();y.__click=[zt,v];var P=c(y),D=c(P);Re(D,{get itemId(){var T;return ue.factoryItems[(T=s())==null?void 0:T.Type][n()]}}),o(P);var R=p(P,2),J=c(R);o(R);var S=p(R,2),K=c(S,!0);o(S),o(y),O(T=>{F(J,`tier ${n()??""}`),F(K,T)},[()=>Math.round(i()*100)/100]),m(f,y)};M(I,f=>{e(v)?f(w):f(u,!1)})}m(g,_),Ie(),a()}$e(["click"]);var Jt=k('<div class="flex gap-1 relative justify-center"><!> <span class="absolute  mx-auto text-center top-0 px-1    rounded-3xl bg-white/70 dark:bg-black/30  "> </span></div>');function ot(g,r){const t=i=>{switch(!0){case i<=6:return[[2001,1]];case i<=12:return[[2002,1]];case i<=30:return[[2003,1]];default:const l=Math.ceil(Math.ceil(i)/30),d=Math.ceil(l/4);return[[2014,d>1?4:l],[2003,d]]}};let a=B(()=>t(r.outputs));var s=Ee(),n=te(s);me(n,17,()=>e(a),fe,(i,l)=>{var d=Ee(),h=te(d);{var v=b=>{var _=Jt(),I=c(_);Re(I,{get itemId(){return e(l)[0]}});var w=p(I,2),u=c(w,!0);o(w),o(_),O(()=>F(u,e(l)[1])),m(b,_)};M(h,b=>{e(l)[1]>0&&b(v)})}m(i,d)}),m(g,s)}var Ut=(g,r)=>le(r,!e(r)),Gt=k('<button class="flex  odd:bg-gray-950 gap-2 px-2 items-center hover:bg-gray-700 w-full group "><span><!></span> <span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs "> </span> <em class="text-right flex-grow"> </em> <div class="flex w-18 justify-end gap-1"><!></div></button>');function Kt(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(n,"$defaultTier",t);let{defaultTier:n}=ue,i=_e(!0),l=B(()=>x.recipe[Number(r.recipeId)]),d=B(()=>s()[e(l).Type]/e(l).TimeSpend),h=B(()=>e(l).ResultCounts.reduce((q,E)=>E+q,0)),v=B(()=>r.requiredBuildings*e(d)*e(h)*60/(e(i)?r.devisor:1)),b=B(()=>Math.round(e(v)*100)/100);var _=Gt();_.__click=[Ut,i];var I=c(_);let w;var u=c(I);{var f=q=>{var E=Le("🔓");m(q,E)},y=q=>{var E=Le("🔒");m(q,E)};M(u,q=>{e(i)?q(f):q(y,!1)})}o(I);var P=p(I,2),D=c(P,!0);o(P);var R=p(P,4),J=c(R,!0);o(R);var S=p(R,2),K=c(S);o(S);var T=p(S,2),U=c(T);o(T);var oe=p(T,2),X=c(oe);ot(X,{get outputs(){return e(v)}}),o(oe),o(_),O((q,E)=>{var re;w=he(I,1,"w-4 group-hover:opacity-100",null,w,q),F(D,E),F(J,((re=e(l))==null?void 0:re.Name)??"recipe"+r.recipeId),F(K,`tier ${s()[e(l).Type]??""}`),F(U,`${e(b)??""}/s`)},[()=>({"opacity-0":e(i)}),()=>Math.round(r.requiredBuildings/(e(i)?r.devisor:1)*100)/100]),m(g,_),Ie(),a()}$e(["click"]);var Ht=k('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300"><span> </span> <span class="text-right flex-grow"> </span></div>'),Xt=k('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300 px-1"><span> </span></div>'),Zt=k('<div><h3 class="bg-blue-800 py-2 px-4  text-center "><input type="number"> <span class="text-xs text-slate-400">x</span> <span class="w-14 text-right"> </span> <span class="text-xs text-slate-400">x</span> <span> </span></h3> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function Qt(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(_,"$requiredBuildings",t),n=()=>A(b,"$recipe",t),i=()=>A(v,"$fabsByType",t),l=()=>A(h,"$requiredBuildingsByRecipeId",t),d=()=>A(I,"$deficitByItemId",t);let{requiredBuildingsByRecipeId:h,fabsByType:v,recipe:b,requiredBuildings:_,deficitByItemId:I}=r.planner,w=_e(1),u=B(()=>!e(w)||isNaN(e(w))?1:e(w)),f=B(()=>Math.ceil(s()/e(u)));var y=Zt(),P=c(y),D=c(P);et(D);var R=p(D,4),J=c(R,!0);o(R);var S=p(R,4),K=c(S,!0);o(S),o(P);var T=p(P,4);me(T,5,()=>Object.entries(i()),fe,(X,q)=>{var E=Ht();const re=B(()=>{const[pe,be]=e(q);return{fabType:pe,requiredFabs:be}});var V=c(E),ae=c(V,!0);o(V);var L=p(V,2),ve=c(L,!0);o(L),o(E),O(pe=>{F(ae,e(re).fabType),F(ve,pe)},[()=>Math.ceil(e(re).requiredFabs/e(u))]),m(X,E)}),o(T);var U=p(T,4);me(U,1,()=>Object.entries(l()??{}),fe,(X,q,E,re)=>{const V=B(()=>{const[ae,L]=e(q);return{recipeId:ae,requiredBuildings:L}});Kt(X,{get recipeId(){return e(V).recipeId},get requiredBuildings(){return e(V).requiredBuildings},get devisor(){return e(u)}})});var oe=p(U,4);me(oe,5,()=>Object.entries(d()),fe,(X,q)=>{var E=Xt();const re=B(()=>{const[L]=e(q);return{itemId:L}});var V=c(E),ae=c(V,!0);o(V),o(E),O(()=>F(ae,x.item[e(re).itemId].Name)),m(X,E)}),o(oe),o(y),O(()=>{F(J,e(f)),F(K,n().Name)}),tt(D,()=>e(w),X=>le(w,X)),m(g,y),Ie(),a()}var Wt=k('<img class="h-6" alt="">');function it(g,r){xe(r,!0);const t=B(()=>r.filename.split("/")),a=B(()=>e(t)&&e(t)[e(t).length-1]),s=B(()=>e(a)&&rt+`/dsp_sprites/${e(a)}.png`);var n=Wt();O(()=>Je(n,"src",e(s))),m(g,n),Ie()}var Yt=(g,r)=>{var t;return(t=r.deletecb)==null?void 0:t.call(r)},er=k(`<style scoped="">input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* display: none; <- Crashes Chrome on hover */
            -webkit-appearance: none;
            margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
        }

        input[type=number] {
            -moz-appearance: textfield;
        }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),tr=k('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),rr=k("<button><!></button>");function ar(g,r){xe(r,!0);let t=_e(at(r.targetAmount));lt(()=>{r.planner.amountEditable&&r.targetAmount!==e(t)&&r.planner.setAmount(e(t))});var a=rr();a.__click=[Yt,r];let s;var n=c(a);{var i=d=>{var h=er(),v=p(te(h),2),b=c(v);{var _=u=>{it(u,{get filename(){return r.recipe.IconPath}})},I=u=>{const f=B(()=>{var y,P;return(P=(y=r.recipe)==null?void 0:y.Results)==null?void 0:P[0]});Re(u,{get itemId(){return e(f)}})};M(b,u=>{var f;(f=r.recipe)!=null&&f.IconPath?u(_):u(I,!1)})}var w=p(b,2);et(w),o(v),tt(w,()=>e(t),u=>le(t,u)),m(d,h)},l=d=>{var h=tr(),v=p(c(h),2);{var b=u=>{it(u,{get filename(){return r.recipe.IconPath}})},_=u=>{Re(u,{get itemId(){return r.itemId}})};M(v,u=>{var f;(f=r.recipe)!=null&&f.IconPath?u(b):u(_,!1)})}var I=p(v,2),w=c(I,!0);o(I),o(h),O(u=>{Xe(I,`padding-left: ${r.planner.depth*1.1}rem`),F(w,u)},[()=>Math.round(r.targetAmount*100)/100]),m(d,h)};M(n,d=>{r.planner.amountEditable?d(i):d(l,!1)})}o(a),O(d=>{a.disabled=!r.deletecb||!r.recipe,s=he(a,1,"dark:bg-slate-800 bg-slate-200  text-center rounded-r-lg  outline-slate-500",null,s,d)},[()=>({"dark:hover:bg-red-700":!r.planner.amountEditable,"hover:bg-red-300":!r.planner.amountEditable,"outline-1":r.planner.amountEditable})]),m(g,a),Ie()}$e(["click"]);var nr=(g,r)=>le(r,!1),sr=(g,r)=>le(r,!1),ir=k('<dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2 fixed "><!> <button class="dark:bg-green-800 bg-green-200 dark:hover:bg-green-700 hover:bg-green-300 py-2 rounded-xl mt-auto">close</button></dialog> <button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl dark:bg-black  opacity-70 top-0 left-0 z-40" aria-label="close"></button>',1),lr=k("<option><!> </option>"),or=k("<option> </option>"),dr=k('<a class="dark:bg-gray-800 bg-gray-200 dark:hover:bg-slate-700 hover:bg-slate-300">➡️</a>'),cr=k('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),ur=k('<a class="dark:bg-gray-800 dark:hover:bg-slate-700 bg-gray-200 hover:bg-slate-300">➡️</a>'),vr=(g,r)=>le(r,!0),gr=k('<button class="py-1 rounded-xl px-4 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300">🔎</button>'),pr=k('<span class="flex-grow"> <!></span> <!>',1),br=k('<div class="ml-auto"><!></div>'),hr=(g,r,t,a)=>{var s;return e(r)<0&&((s=x.producedVia[e(t)])==null?void 0:s.length)>0&&a.planner.planFor(e(t))},mr=k('<div class="flex items-center"><span class="pl-2">📝</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),fr=k('<div class="flex items-center"><span class="px-3.5"></span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),_r=k("<div><!></div>"),xr=k('<div class="flex gap-2 dark:hover:bg-gray-700 hover:bg-gray-300"><button><!></button> <!></div>'),Ir=k('<div class="flex flex-col gap-0.5 "></div>'),yr=k('<!> <div class="flex gap-1 max-w-2xl items-center dark:hover:bg-gray-700 hover:bg-gray-300  flex-wrap @container"><!> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function dt(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(R,"$recipeId",t),n=()=>A(D,"$recipe",t),i=()=>A(P,"$itemId",t),l=()=>A(T,"$targetAmount",t),d=()=>A(E,"$options",t),h=()=>A(y,"$item",t),v=()=>A(J,"$requiredBuildings",t),b=()=>A(S,"$children",t),_=()=>A(q,"$inputsOutputs",t),I=()=>A(oe,"$providedItemsPerInterval",t),w=()=>A(U,"$childrenProvideItemsPerInterval",t),u=()=>A(X,"$requiredItemsPerInterval",t),f=()=>A(K,"$childrenByItemId",t);let{item:y,itemId:P,recipe:D,recipeId:R,requiredBuildings:J,children:S,childrenByItemId:K,targetAmount:T,childrenProvideItemsPerInterval:U,providedItemsPerInterval:oe,requiredItemsPerInterval:X,inputsOutputs:q,options:E,header:re}=r.planner,V=_e(at(s())),ae=_e(!1);lt(()=>{e(V)!==s()&&r.planner.setRecipeId(e(V))});var L=yr(),ve=te(L);{var pe=Z=>{var H=ir(),se=te(H),C=c(se);Qt(C,{get planner(){return r.planner}});var ye=p(C,2);ye.__click=[nr,ae],o(se);var Y=p(se,2);Y.__click=[sr,ae],m(Z,H)};M(ve,Z=>{e(ae)&&Z(pe)})}var be=p(ve,2),Ne=c(be);ar(Ne,{get planner(){return r.planner},get recipe(){return n()},get itemId(){return i()},get targetAmount(){return l()},get deletecb(){return r.deletecb}});var N=p(Ne,2),Q=c(N),ne=c(Q);{var ge=Z=>{var H=cr(),se=te(H),C=c(se);{var ye=$=>{var j=lr();j.value=(j.__value=void 0)==null?"":void 0;var ie=c(j);{var Fe=Be=>{var we=Le("orbital collector");m(Be,we)},Ge=Be=>{var we=Le("mining");m(Be,we)};M(ie,Be=>{x.canBeExtracted[i()]?Be(Fe):Be(Ge,!1)})}var Ae=p(ie);o(j),O(()=>{st(j,s()===void 0),F(Ae,` (${h().Name??""})`)}),m($,j)};M(C,$=>{(x.canBeExtracted[i()]||x.canBeMined[i()])&&$(ye)})}var Y=p(C);me(Y,1,d,fe,($,j)=>{var ie=or(),Fe={},Ge=c(ie,!0);o(ie),O(()=>{Fe!==(Fe=x.recipe[e(j)].ID)&&(ie.value=(ie.__value=x.recipe[e(j)].ID)==null?"":x.recipe[e(j)].ID),st(ie,s()===x.recipe[e(j)].ID),F(Ge,x.recipe[e(j)].Name)}),m($,ie)}),o(se);var ke=p(se,2);{var Ce=$=>{var j=dr();O(ie=>Je(j,"href",ie),[()=>Ye.recipe(n().ID)+"?targetAmount="+Math.round(v())+"&depth=10"]),m($,j)};M(ke,$=>{!r.planner.amountEditable&&n()&&$(Ce)})}Et(se,()=>e(V),$=>le(V,$)),m(Z,H)},Oe=Z=>{var H=pr(),se=te(H),C=c(se),ye=p(C);{var Y=$=>{var j=ur();O(ie=>Je(j,"href",ie),[()=>Ye.recipe(n().ID)+"?targetAmount="+Math.round(v())+"&depth=10"]),m($,j)};M(ye,$=>{r.planner.amountEditable||$(Y)})}o(se);var ke=p(se,2);{var Ce=$=>{var j=gr();j.__click=[vr,ae],m($,j)};M(ke,$=>{b().length>1&&!r.planner.amountEditable&&$(Ce)})}O(()=>{var $;return F(C,`${(($=n())==null?void 0:$.Name)??""} `)}),m(Z,H)};M(ne,Z=>{i()&&(d().length>1||d().length>=1&&x.canBeExtracted[i()]||x.canBeMined[i()])?Z(ge):Z(Oe,!1)})}o(Q),o(N);var de=p(N,2);{var W=Z=>{var H=br(),se=c(H);Lt(se,{get planner(){return r.planner}}),o(H),m(Z,H)};M(de,Z=>{v()&&s()&&Z(W)})}o(be);var Te=p(be,2);{var qe=Z=>{var H=Ir();me(H,5,_,fe,(se,C)=>{var ye=Ee();const Y=B(()=>{var $,j,ie;return((($=I())==null?void 0:$[e(C)])??0)+(((j=w())==null?void 0:j[e(C)])??0)-(((ie=u())==null?void 0:ie[e(C)])??0)}),ke=B(()=>f()[e(C)]);var Ce=te(ye);Ue(Ce,()=>e(C),$=>{var j=Ee(),ie=te(j);{var Fe=Ae=>{dt(Ae,{get planner(){return e(ke)},deletecb:()=>r.planner.deleteChild(e(C))})},Ge=Ae=>{var Be=xr(),we=c(Be);let nt;we.__click=[hr,Y,C,r];var ct=c(we);{var ut=ce=>{var ee=mr(),Me=p(c(ee),2);Re(Me,{get itemId(){return e(C)}});var Se=p(Me,2),je=c(Se,!0);o(Se),o(ee),O(Ke=>{Xe(Se,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),F(je,Ke)},[()=>Math.round(e(Y)*100)/100]),m(ce,ee)},vt=(ce,ee)=>{{var Me=Se=>{var je=fr(),Ke=p(c(je),2);Re(Ke,{get itemId(){return e(C)}});var Qe=p(Ke,2),bt=c(Qe,!0);o(Qe),o(je),O(ht=>{Xe(Qe,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),F(bt,ht)},[()=>Math.round(e(Y)*100)/100]),m(Se,je)};M(ce,Se=>{e(C)!==i()&&e(Y)!==0&&Se(Me)},ee)}};M(ct,ce=>{var ee;e(Y)<0&&((ee=x.producedVia[e(C)])==null?void 0:ee.length)>0?ce(ut):ce(vt,!1)})}o(we);var gt=p(we,2);{var pt=ce=>{var ee=_r();let Me;var Se=c(ee);Nt(Se,{get itemId(){return e(C)}}),o(ee),O(je=>Me=he(ee,1,"flex gap-2 items-center ",null,Me,je),[()=>({"text-green-500":e(Y)>0,"text-red-500":e(Y)<0})]),m(ce,ee)};M(gt,ce=>{e(C)!==i()&&e(Y)!==0&&ce(pt)})}o(Be),O(ce=>{var ee;nt=he(we,1,"dark:bg-slate-800 bg-slate-200   text-center rounded-r-lg",null,nt,ce),we.disabled=e(Y)>0||!((ee=x.producedVia[e(C)])!=null&&ee.length)},[()=>{var ce,ee;return{"dark:hover:bg-green-800":e(Y)<0&&((ce=x.producedVia[e(C)])==null?void 0:ce.length)>0,"hover:bg-green-200":e(Y)<0&&((ee=x.producedVia[e(C)])==null?void 0:ee.length)>0}}]),m(Ae,Be)};M(ie,Ae=>{e(ke)?Ae(Fe):Ae(Ge,!1)})}m($,j)}),m(se,ye)}),o(H),m(Z,H)};M(Te,Z=>{var H;((H=_())==null?void 0:H.size)>0&&Z(qe)})}m(g,L),Ie(),a()}$e(["click"]);var kr=k('<div class="flex flex-col items-stretch group w-full "><a class="my-2 z-30 dark:hover:bg-slate-700 hover:bg-slate-300 w-xs"> </a></div>'),Br=k('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur-3xl backdrop-opacity-75  z-40"><!> <label for="recipeName">ingredient or recipe name</label><input id="recipeName"></div> <!>',1);function wr(g,r){xe(r,!0);let t=_e(at([])),a=We(),s=We(),n=We(),i=_e(""),l=B(()=>e(i)?x.items.filter(u=>u.Name.toLowerCase().includes(e(i).toLowerCase())).map(u=>u.ID):[]),d=B(()=>(()=>{const u=new Set;return e(l).forEach(f=>{for(const y of x.relatedRecipes[f]??[])u.add(y)}),u})()),h=B(()=>x.recipees.filter(u=>e(t).length>0?e(t).includes(u.Type):!0).filter(u=>e(i)?e(d).has(u.ID):!0).filter(u=>a.checked===null?!0:a.checked?x.buildableRecipees.has(u.ID):!x.buildableRecipees.has(u.ID)).filter(u=>s.checked===null?!0:s.checked?x.fluidRecipees.has(u.ID):!x.fluidRecipees.has(u.ID)).filter(u=>n.checked===null?!0:n.checked?x.entityRecipees.has(u.ID):!x.entityRecipees.has(u.ID)));new Set(x.recipees.map(u=>u.Type));var v=Br(),b=te(v),_=c(b);M(_,u=>{});var I=p(_,3);et(I),o(b);var w=p(b,2);me(w,17,()=>e(h),fe,(u,f)=>{var y=kr(),P=c(y),D=c(P,!0);o(P),o(y),O(R=>{Je(P,"href",R),F(D,e(f).Name)},[()=>Ye.recipe(e(f).ID)]),m(u,y)}),tt(I,()=>e(i),u=>le(i,u)),m(g,v),Ie()}$e(["click"]);var Pr=(g,r)=>le(r,!e(r)),Rr=(g,r,t,a)=>r(e(t),e(a)),Tr=k("<button><!> <span> </span></button>"),qr=k('<div><h4 class="bg-blue-900 py-2 px-4 rounded-t"> </h4> <div class="flex bg-gray-600 "></div></div>'),Sr=k("<div></div> <!>",1),Er=k(`<button class="bg-blue-800 hover:bg-blue-700 hover:shadow-2xl  rounded-t py-5 px-4 flex">default tier for
	new factories <span class="ml-auto shadow-2xl"><!></span></button> <!>`,1);function Nr(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(n,"$defaultTierReadable",t);let n=ue.defaultTier;s();let i=_e(!1);const l=(f,y)=>{const P={...s(),[f]:y};localStorage.setItem("defaultTiers",JSON.stringify(P)),ue.defaultTier.set(P)};var d=Er(),h=te(d);h.__click=[Pr,i];var v=p(c(h)),b=c(v);{var _=f=>{var y=Le("🔼");m(f,y)},I=f=>{var y=Le("🔽");m(f,y)};M(b,f=>{e(i)?f(_):f(I,!1)})}o(v),o(h);var w=p(h,2);{var u=f=>{var y=Sr(),P=p(te(y),2);me(P,1,()=>Object.keys(s()),fe,(D,R)=>{var J=Ee(),S=te(J);{var K=T=>{var U=qr(),oe=c(U),X=c(oe,!0);o(oe);var q=p(oe,2);me(q,21,()=>ue.availableTiers[e(R)],fe,(E,re)=>{var V=Tr();const ae=B(()=>ue.factoryItems[e(R)][e(re)]),L=B(()=>e(re)===s()[e(R)]);let ve;V.__click=[Rr,l,R,re];var pe=c(V);Re(pe,{get itemId(){return e(ae)}});var be=p(pe,2),Ne=c(be,!0);o(be),o(V),O(N=>{ve=he(V,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2      rounded-lg",null,ve,N),F(Ne,e(re))},[()=>({"outline-amber-100":e(L),"outline-1":e(L),active:e(L),"bg-slate-500":e(L),"hover:bg-slate-400":e(L),"text-white":e(L),"hover:bg-slate-700":!e(L),"text-gray-300":!e(L),"bg-slate-800":!e(L)})]),m(E,V)}),o(q),o(U),O(()=>F(X,e(R))),m(T,U)};M(S,T=>{var U;((U=ue.availableTiers[e(R)])==null?void 0:U.length)>1&&T(K)})}m(D,J)}),m(f,y)};M(w,f=>{e(i)&&f(u)})}m(g,d),Ie(),a()}$e(["click"]);var Ar=(g,r)=>le(r,"bulidings"),$r=(g,r)=>le(r,"throughput"),Or=k('<div class="opacity-70 scale-90"><!></div>'),Cr=k('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 dark:backdrop-brightness-75 z-40"> </span></div>'),Mr=k('<div class="dark:odd:bg-gray-950 odd:bg-gray-200   gap-3 px-2 flex "><div class="justify-self-center w-14 text-center relative p-0.5"><em class="absolute w-full h-full text-right left-0 top-0 dark:backdrop-brightness-85 bg-white/50 dark:bg-black/30   "> </em> <!></div> <span class="flex-grow"> </span> <!></div>'),jr=k('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0 gap-0.5"><h4 class="px-4 py-2 dark:bg-slate-800 bg-slate-200 rounded-t-lg flex items-center"><span class="flex-grow">required</span> <button>buildings</button> <button>conveyors</button></h4> <!></div>');function Dr(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(d,"$itemId",t),n=()=>A(l,"$requiredBuildingsByRecipeId",t),i=()=>A(h,"$defaultTier",t);let{requiredBuildingsByRecipeId:l,itemId:d}=r.planner,{defaultTier:h}=ue,v=_e("bulidings");var b=jr(),_=c(b),I=p(c(_),2);let w;I.__click=[Ar,v];var u=p(I,2);let f;u.__click=[$r,v],o(_);var y=p(_,2);Ue(y,s,P=>{var D=Ee(),R=te(D);me(R,1,()=>Object.entries(n()),fe,(J,S)=>{var K=Ee();const T=B(()=>{const[X,q]=e(S);return{recipeId:X,requiredBuildings:q}});var U=te(K);{var oe=X=>{var q=Mr();const E=B(()=>x.recipe[Number(e(T).recipeId)]),re=B(()=>i()[e(E).Type]/e(E).TimeSpend),V=B(()=>e(E).ResultCounts.reduce((de,W)=>W+de,0)),ae=B(()=>e(T).requiredBuildings*e(re)*e(V)*60);var L=c(q),ve=c(L),pe=c(ve);o(ve);var be=p(ve,2);const Ne=B(()=>{var de,W;return(W=(de=e(E))==null?void 0:de.Results)==null?void 0:W[0]});Re(be,{get itemId(){return e(Ne)}}),o(L);var N=p(L,2),Q=c(N,!0);o(N);var ne=p(N,2);{var ge=de=>{var W=Cr();const Te=B(()=>String(Math.round(e(T).requiredBuildings*10)/10)),qe=B(()=>e(Te).indexOf(".")),Z=B(()=>e(qe)===-1?1:0);var H=c(W),se=c(H);Ue(se,i,Y=>{var ke=Or(),Ce=c(ke);Re(Ce,{get itemId(){var $;return ue.factoryItems[($=e(E))==null?void 0:$.Type][i()[e(E).Type]]}}),o(ke),m(Y,ke)}),o(H);var C=p(H,2),ye=c(C,!0);o(C),o(W),O(()=>{Xe(W,`padding-right: ${e(Z)+.5}em`),F(ye,e(Te))}),m(de,W)},Oe=(de,W)=>{{var Te=qe=>{ot(qe,{get outputs(){return e(ae)}})};M(de,qe=>{e(v)==="throughput"&&qe(Te)},W)}};M(ne,de=>{e(v)==="bulidings"?de(ge):de(Oe,!1)})}o(q),O(de=>{var W;F(pe,`${de??""}/s`),F(Q,((W=e(E))==null?void 0:W.Name)??"recipe"+e(T).recipeId)},[()=>Math.round(e(ae)*100)/100]),m(X,q)};M(U,X=>{e(T).recipeId&&X(oe)})}m(J,K)}),m(P,D)}),o(b),O((P,D)=>{w=he(I,1," px-4 py-2 rounded-l-lg  outline-gray-600 ",null,w,P),f=he(u,1,"hover:bg-slate-500 px-4 py-2  rounded-r-lg  outline-gray-600",null,f,D)},[()=>({"bg-blue-300":e(v)==="bulidings","bg-gray-300":e(v)!=="bulidings","hover:bg-blue-500":e(v)==="bulidings","hover:bg-gray-500":e(v)!=="bulidings","dark:bg-blue-700":e(v)==="bulidings","dark:bg-gray-700":e(v)!=="bulidings"}),()=>({"bg-blue-300":e(v)==="throughput","bg-gray-300":e(v)!=="throughput","dark:bg-blue-700":e(v)==="throughput","dark:bg-gray-700":e(v)!=="throughput","hover:bg-blue-500":e(v)==="throughput","hover:bg-gray-500":e(v)!=="throughput"})]),m(g,b),Ie(),a()}$e(["click"]);var Vr=k('<link rel="icon">'),zr=(g,r)=>le(r,!1),Fr=(g,r)=>le(r,!1),Lr=(g,r)=>r(),Jr=(g,r)=>le(r,!1),Ur=k('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl dark:bg-black opacity-70 top-0 left-0 z-40" aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2 fixed outline-1 rounded-2xl outline-slate-600"><h6 class="flex items-center justify-between"><span>Factory Globals</span> <button class="dark:bg-slate-800 dark:hover:bg-slate-700 bg-slate-200 hover:bg-slate-300 w-12 py-2">✖️</button></h6> <!> <span class="flex-grow"></span> <button class="dark:bg-green-800 dark:hover:bg-green-700  bg-green-200 hover:bg-green-300 w-full py-1">apply to existing</button> <button class="dark:bg-green-800 dark:hover:bg-green-700 bg-green-200 hover:bg-green-300 w-full py-1">apply to future</button></dialog>',1),Gr=(g,r)=>e(r).setInterval(0),Kr=(g,r,t)=>e(r).setInterval(t),Hr=(g,r)=>e(r).setInterval(60),Xr=k("<button>Second</button>"),Zr=(g,r)=>le(r,!0),Qr=k(`<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap"><div class="lg:max-w-sm lg:block hidden max-h-screen  ml-auto overflow-y-auto"><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto"><div class="flex  text-sm py-1"><span class="px-3 py-1 dark:bg-slate-800 bg-slate-200 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <!></span></span> <span class="px-3 py-3 flex-grow text-right"></span> <button class="px-3 py-3 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-l-lg">⚙️
				Required Fabs to Process
				Items</button></div> <!></div> <!></div>`,1);function ua(g,r){xe(r,!0);const[t,a]=ze(),s=()=>A(h,"$defaultTier",t),n=()=>A(e(w),"$header",t),i=()=>A(e(I),"$timeSpendChanged",t),l=()=>A(e(b),"$targetInterval",t),d=()=>A(e(_),"$timeSpend",t);let{defaultTier:h}=ue,v=B(()=>new Ze(r.data.recipeId,void 0,void 0,void 0,void 0,r.data.depth,r.data.targetAmount)),b=B(()=>e(v).targetInterval),_=B(()=>e(v).timeSpend),I=B(()=>e(v).timeSpendChanged),w=B(()=>e(v).header);const u=60*60;let f=_e(!1);const y=N=>{N||(N=e(v));const Q=Ve(N.recipe);if(Q){const ne=Q.Type,ge=s()[ne];N.tier.set(ge)}Ve(N.children).forEach(ne=>y(ne)),le(f,!1)};var P=Qr();qt(N=>{var Q=Vr();O(()=>{var ne,ge;Tt.title=(ne=n())==null?void 0:ne[1],Je(Q,"href",(ge=n())==null?void 0:ge[0])}),m(N,Q)});var D=te(P);{var R=N=>{var Q=Ur(),ne=te(Q);ne.__click=[zr,f];var ge=p(ne,2),Oe=c(ge),de=p(c(Oe),2);de.__click=[Fr,f],o(Oe);var W=p(Oe,2);Nr(W,{});var Te=p(W,4);Te.__click=[Lr,y];var qe=p(Te,2);qe.__click=[Jr,f],o(ge),m(N,Q)};M(D,N=>{e(f)&&N(R)})}var J=p(D,2),S=c(J),K=c(S);wr(K,{}),o(S);var T=p(S,2),U=c(T),oe=c(U),X=p(c(oe)),q=c(X);let E;q.__click=[Gr,v];var re=c(q);o(q);var V=p(q,2);let ae;V.__click=[Kr,v,u];var L=p(V,2);{var ve=N=>{var Q=Xr();let ne;Q.__click=[Hr,v],O(ge=>ne=he(Q,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ne,ge),[()=>({active:l()===60})]),m(N,Q)};M(L,N=>{d()!==60&&N(ve)})}o(X),o(oe);var pe=p(oe,4);pe.__click=[Zr,f],o(U);var be=p(U,2);Ue(be,()=>e(v),N=>{dt(N,{get planner(){return e(v)}})}),o(T);var Ne=p(T,2);Ue(Ne,()=>e(v),N=>{Dr(N,{get planner(){return e(v)}})}),o(J),O((N,Q,ne)=>{E=he(q,1,"px-1.5 py-2 multi hover:bg-slate-700",null,E,N),F(re,`Cycle (${Q??""}s)`),ae=he(V,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ae,ne)},[()=>({"animate-flash":i(),active:l()===d()}),()=>Math.round(d()/60*100)/100,()=>({active:l()===u})]),m(g,P),Ie(),a()}$e(["click"]);export{ua as component,ca as universal};
