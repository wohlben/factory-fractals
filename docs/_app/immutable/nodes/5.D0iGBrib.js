var yt=Object.defineProperty;var kt=(c,r,t)=>r in c?yt(c,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[r]=t;var J=(c,r,t)=>kt(c,typeof r!="symbol"?r+"":r,t);import{c as Ne,t as y,a as g,b as Le}from"../chunks/BmHjAyxW.js";import{au as Bt,aH as wt,X as Pt,z as Rt,A as Qe,B as Tt,K as qt,J as $t,L as St,U as Et,p as Pe,f as ne,t as j,g as e,e as I,a as Re,b as _e,s as v,c as d,r as o,h as oe,M as ct,aI as Nt}from"../chunks/B-82rzdC.js";import{d as Ve,s as U,a as At}from"../chunks/D897dbaB.js";import{i as V}from"../chunks/BfA0D6Yw.js";import{s as Je,r as it,b as ut,L as nt}from"../chunks/h91-G9kU.js";import{t as Ot,s as be,c as lt,b as Ct,o as at}from"../chunks/C3CEGPiq.js";import{s as ze,a as N}from"../chunks/D2GXNv7x.js";import{D as x,e as xe,i as Ie,I as Mt}from"../chunks/gwZSL3j3.js";import{w as Be,d as H,g as De}from"../chunks/DWHFLt1U.js";import{a as ot}from"../chunks/Cc4CcjZQ.js";import{p as st}from"../chunks/Cg9itU8Q.js";function Ue(c,r,t){Qe&&Tt();var a=c,s=Et,n,i=Bt()?wt:Pt;Rt(()=>{i(s,s=r())&&(n&&qt(n),n=$t(()=>t(a)))}),Qe&&(a=St)}function Ze(c,r,t,a){var s=c.__style;if(Qe||s!==r){var n=Ot(r);(!Qe||n!==c.getAttribute("style"))&&(n==null?c.removeAttribute("style"):c.style.cssText=n),c.__style=r}return a}const jt=!1,Dt=({params:c,url:r})=>{const{id:t}=c,a=Number(t),s=r.searchParams.get("depth"),n=r.searchParams.get("targetAmount");return{recipeId:a,depth:s&&parseInt(s)||1,targetAmount:n&&parseInt(n)||1}},va=Object.freeze(Object.defineProperty({__proto__:null,load:Dt,prerender:jt},Symbol.toStringTag,{value:"Module"})),Vt=()=>{const c=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(c){const r=JSON.parse(c);return Be(r)}},ue={defaultTier:Vt()??Be({Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:1}),availableTiers:{Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[.125,.2,.25]},factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,2:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{.125:1141,.2:1142,.25:1143}}};class zt{constructor(r,t,a,s,n,i,l){this.recipeId=r,this.itemId=t,this.targetAmount=a,this.targetInterval=s,this.tier=n,this.proliferator=i,this.timeSpend=l}}const je=(c,r)=>{const t={...c};return Object.entries(r).forEach(([a,s])=>{const n=Number(a);t[n]=(t[n]??0)+s}),t};class We extends zt{constructor(t,a,s,n,i=0,l=1,u){var G;const m=!!(a&&(x.canBeExtracted[a]||x.canBeMined[a]));!t&&!m&&(t=(G=x.alternativeRecipe[a])==null?void 0:G[0]);const p=Be(t),f=t?x.recipe[t]:void 0;let b=f==null?void 0:f.Results.findIndex(S=>a===S);const B=!a;!a&&(b??-1)>=0&&(a=f==null?void 0:f.Results[b??0]);const A=Be(a),h=Be((f==null?void 0:f.ResultCounts[b??0])??u??1),_=s?H([A,s],([S,X])=>X[S]):h,k=Be(f!=null&&f.Type?De(ue.defaultTier)[f.Type]:1),R=Be(De(ue.defaultTier).Proliferator),F=Be(0),w=H([p,k],([S,X])=>{var T;return((T=x.recipe[S])==null?void 0:T.TimeSpend)/X});n||(n=H([F,w],([S,X])=>S>0?S:X));super(p,A,_,n,k,R,w);J(this,"amountEditable");J(this,"manualAmount",Be());J(this,"manualInterval");J(this,"children",Be([]));J(this,"canBeMined",H(this.itemId,t=>x.canBeMined[t]));J(this,"canBeExtracted",H(this.itemId,t=>x.canBeExtracted[t]));J(this,"item",H(this.itemId,t=>x.item[t]));J(this,"recipe",H(this.recipeId,t=>x.recipe[t]));J(this,"header",H([this.itemId,this.recipe],([t,a])=>{var u;const s=t??((u=a==null?void 0:a.Results)==null?void 0:u[0]);if(!s)return;const n=x.item[s],i=n.IconPath.split("/"),l=i[i.length-1];return l&&[ot+`/dsp_sprites/${l}.png`,n.Name]}));J(this,"options",H(this.itemId,t=>x.alternativeRecipe[t]));J(this,"timeSpendChanged",H(this.timeSpend,(t,a)=>{a(!!t);const s=setTimeout(()=>a(!t),1400);return()=>clearTimeout(s)}));J(this,"relativeSpeed",H([this.targetInterval,this.timeSpend],([t,a])=>t/a));J(this,"requiredBuildings",H([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([t,a,s,n,i])=>{const l=a==null?void 0:a.Results.findIndex(m=>s===m),u=t/(a==null?void 0:a.ResultCounts[l])/n;return isNaN(u)?t:u}));J(this,"providedItemsPerInterval",H([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([t,a,s,n,i])=>{if(!t&&n&&(x.canBeMined[n]||x.canBeExtracted[n]))return{[n]:i};const l={};return t==null||t.Results.forEach((u,m)=>{l[u]=t.ResultCounts[m]*a*s}),l}));J(this,"childrenProvideItemsPerInterval",H(this.children,(t,a)=>{const s=new Array(t.length),n=t.map((l,u)=>l.providedItemsPerInterval.subscribe(m=>{s[u]=m;const p=s.filter(f=>!!f).reduce((f,b)=>je(f,b),{});a(p)})),i=s.filter(l=>!!l).reduce((l,u)=>je(l,u),{});return a(i),()=>n.forEach(l=>l())}));J(this,"requiredBuildingsByRecipeId",H([this.children,this.recipeId,this.requiredBuildings],([t,a,s],n)=>{const i=new Array(t.length),l=t.map((m,p)=>m.requiredBuildingsByRecipeId.subscribe(f=>{i[p]=f;const b=i.filter(B=>!!B).reduce((B,A)=>je(B,A),{});if(a){const B=a;b[B]=(b[B]??0)+s}n(b)})),u=i.filter(m=>!!m).reduce((m,p)=>je(m,p),{});if(a){const m=a;u[m]=(u[m]??0)+s}return n(u),()=>l.forEach(m=>m())}));J(this,"fabsByType",H(this.requiredBuildingsByRecipeId,t=>Object.entries(t).reduce((a,[s,n])=>{const i=Number(s),l=x.recipe[i].Type;return a[l]=(a[l]??0)+Math.ceil(n),a},{})));J(this,"childrenByItemId",H(this.children,(t,a)=>{const s=new Array(t.length),n=t.map((l,u)=>l.itemId.subscribe(m=>{s[u]=[m,l];const p=s.filter(f=>!!f).reduce((f,[b,B])=>(f[b]=B,f),{});a(p)})),i=s.filter(l=>!!l).reduce((l,[u,m])=>(l[u]=m,l),{});return a(i),()=>n.forEach(l=>l())}));J(this,"requiredItemsPerInterval",H([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,s])=>{const n={};return t==null||t.Items.forEach((i,l)=>n[i]=t.ItemCounts[l]*a*s),n}));J(this,"deficitRequiredItemsPerInterval",H([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,s])=>{const n={};return t==null||t.Items.forEach((i,l)=>n[i]=-(t.ItemCounts[l]*a*s)),n}));J(this,"inputsOutputs",H([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([t,a,s])=>{const n=new Set;return Object.keys(a).forEach(i=>{n.add(Number(i))}),Object.keys(t??{}).forEach(i=>{n.add(Number(i))}),Object.keys(s).forEach(i=>{n.add(Number(i))}),n}));J(this,"surplus",H([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([t,a,s,n])=>{const i=je(t,s);return Object.entries(a).forEach(([l,u])=>i[Number(l)]=(i[Number(l)]??0)-u),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));J(this,"deficit",H([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([t,a])=>{const s={...t};return Object.entries(a).forEach(([n,i])=>s[Number(n)]=(s[Number(n)]??0)-i),Object.entries(s).filter(([,n])=>n>=0).forEach(([n])=>delete s[Number(n)]),s}));J(this,"deficitByItemId",H([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([t,a,s,n,i],l)=>{const u=new Array(t.length),m=t.map((f,b)=>f.deficitByItemId.subscribe(B=>{u[b]=B;const A=u.filter(h=>!!h).reduce((h,_)=>je(h,_),s?a:{[n]:-i});l(A)})),p=u.filter(f=>!!f).reduce((f,b)=>je(f,b),s?a:{[n]:-i});return l(p),()=>m.forEach(f=>f())}));J(this,"totals",H([this.itemId,this.requiredBuildings,this.children],([t,a,s])=>{const n={};return n[t]=a,s.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,u])=>{const m=Number(l);n[m]=(n[m]??0)+u})}),n}));this.depth=i,this.amountEditable=B,this.manualAmount=h,this.manualInterval=F,l>i&&this.children.set(this.dbd(l))}setAmount(t){this.manualAmount.set(t)}setRecipeId(t){this.recipeId.set(t),this.expand()}deleteChild(t){this.children.update(a=>{const s=a.findIndex(n=>De(n.itemId)===t);return a.splice(s,1),a})}setInterval(t){this.manualInterval.set(t)}expand(){this.children.set(this.dbd())}planFor(t){this.children.update(a=>(a.push(new We(void 0,t,this.requiredItemsPerInterval,this.targetInterval,this.depth+1)),a))}dbd(t){const a=[],s=De(this.recipe);return s==null||s.Items.forEach((n,i)=>{var m;if(!((m=x.alternativeRecipe[n])!=null&&m.length))return;const l=new We(void 0,n,this.requiredItemsPerInterval,this.targetInterval,this.depth+1,t);a.push(l);const u=De(l.providedItemsPerInterval);Object.entries(u).forEach(([p,f])=>{})}),a}}var Ft=y('<img class="h-6" alt="">');function we(c,r){Pe(r,!0);let t=I(()=>x.item[r.itemId]);const a=I(()=>{var u;return(u=e(t))==null?void 0:u.IconPath.split("/")}),s=I(()=>e(a)&&e(a)[e(a).length-1]),n=I(()=>e(s)&&ot+`/dsp_sprites/${e(s)}.png`);var i=Ne(),l=ne(i);Ue(l,()=>r.itemId,u=>{var m=Ft();j(()=>Je(m,"src",e(n))),g(u,m)}),g(c,i),Re()}var Lt=(c,r,t)=>r(e(t)),Jt=y("<button> <!></button>"),Ut=y('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),Gt=(c,r)=>oe(r,!0),Kt=y('<button class="text-center min-w-16 h-10 rounded-l-lg bg-slate-800 hover:bg-slate-600 py-2 px-3 flex justify-around items-end gap-2 relative "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function Ht(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(l,"$recipe",t),n=()=>N(u,"$tier",t),i=()=>N(m,"$requiredBuildings",t);let{recipe:l,tier:u,requiredBuildings:m}=r.planner,p=_e(!1);const f=_=>{r.planner.tier.set(_),oe(p,!1)};var b=Ne(),B=ne(b);{var A=_=>{var k=Ut(),R=v(d(k),2);xe(R,1,()=>ue.availableTiers[s().Type],Ie,(F,w)=>{var G=Jt();let S;G.__click=[Lt,f,w];var X=d(G),T=v(X);we(T,{get itemId(){var K;return ue.factoryItems[(K=s())==null?void 0:K.Type][e(w)]}}),o(G),j(K=>{S=be(G,1,"px-2 py-1 outline-slate-600 hover:bg-slate-600 text-sm  rounded",null,S,K),U(X,`${e(w)??""} `)},[()=>({"outline-1":e(w)===n(),active:e(w)===n()})]),g(F,G)}),o(k),g(_,k)},h=_=>{var k=Kt();k.__click=[Gt,p];var R=d(k),F=d(R);we(F,{get itemId(){var T;return ue.factoryItems[(T=s())==null?void 0:T.Type][n()]}}),o(R);var w=v(R,2),G=d(w);o(w);var S=v(w,2),X=d(S,!0);o(S),o(k),j(T=>{U(G,`tier ${n()??""}`),U(X,T)},[()=>Math.round(i()*100)/100]),g(_,k)};V(B,_=>{e(p)?_(A):_(h,!1)})}g(c,b),Re(),a()}Ve(["click"]);var Xt=y('<div class="flex gap-1 relative"><span class="absolute w-full text-center top-0 backdrop-brightness-85"> </span> <!></div>');function pt(c,r){const t=i=>{switch(!0){case i<=6:return[[2001,1]];case i<=12:return[[2002,1]];case i<=30:return[[2003,1]];default:const l=Math.ceil(Math.ceil(i)/30),u=Math.ceil(l/4);return[[2014,u>1?4:l],[2003,u]]}};let a=I(()=>t(r.outputs));var s=Ne(),n=ne(s);xe(n,17,()=>e(a),Ie,(i,l)=>{var u=Ne(),m=ne(u);{var p=f=>{var b=Xt(),B=d(b),A=d(B,!0);o(B);var h=v(B,2);we(h,{get itemId(){return e(l)[0]}}),o(b),j(()=>U(A,e(l)[1])),g(f,b)};V(m,f=>{e(l)[1]>0&&f(p)})}g(i,u)}),g(c,s)}var Zt=(c,r)=>oe(r,!e(r)),Qt=y('<button class="flex  odd:bg-gray-950 gap-2 px-2 items-center hover:bg-gray-700 w-full group "><span><!></span> <span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs "> </span> <em class="text-right flex-grow"> </em> <div class="flex w-18 justify-end gap-1"><!></div></button>');function Wt(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(n,"$defaultTier",t);let{defaultTier:n}=ue,i=_e(!0),l=I(()=>x.recipe[Number(r.recipeId)]),u=I(()=>s()[e(l).Type]/e(l).TimeSpend),m=I(()=>e(l).ResultCounts.reduce((q,E)=>E+q,0)),p=I(()=>r.requiredBuildings*e(u)*e(m)*60/(e(i)?r.devisor:1)),f=I(()=>Math.round(e(p)*100)/100);var b=Qt();b.__click=[Zt,i];var B=d(b);let A;var h=d(B);{var _=q=>{var E=Le("🔓");g(q,E)},k=q=>{var E=Le("🔒");g(q,E)};V(h,q=>{e(i)?q(_):q(k,!1)})}o(B);var R=v(B,2),F=d(R,!0);o(R);var w=v(R,4),G=d(w,!0);o(w);var S=v(w,2),X=d(S);o(S);var T=v(S,2),K=d(T);o(T);var de=v(T,2),Q=d(de);pt(Q,{get outputs(){return e(p)}}),o(de),o(b),j((q,E)=>{var se;A=be(B,1,"w-4 group-hover:opacity-100",null,A,q),U(F,E),U(G,((se=e(l))==null?void 0:se.Name)??"recipe"+r.recipeId),U(X,`tier ${s()[e(l).Type]??""}`),U(K,`${e(f)??""}/s`)},[()=>({"opacity-0":e(i)}),()=>Math.round(r.requiredBuildings/(e(i)?r.devisor:1)*100)/100]),g(c,b),Re(),a()}Ve(["click"]);var Yt=y('<div class="flex gap-4 hover:bg-gray-700"><span> </span> <span class="text-right flex-grow"> </span></div>'),er=y('<div class="flex gap-4 hover:bg-gray-700 px-1"><span> </span></div>'),tr=y('<div><h3 class="bg-blue-800 py-2 px-4  text-center "><input type="number"> <span class="text-xs text-slate-400">x</span> <span class="w-14 text-right"> </span> <span class="text-xs text-slate-400">x</span> <span> </span></h3> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function rr(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(b,"$requiredBuildings",t),n=()=>N(f,"$recipe",t),i=()=>N(p,"$fabsByType",t),l=()=>N(m,"$requiredBuildingsByRecipeId",t),u=()=>N(B,"$deficitByItemId",t);let{requiredBuildingsByRecipeId:m,fabsByType:p,recipe:f,requiredBuildings:b,deficitByItemId:B}=r.planner,A=_e(1),h=I(()=>!e(A)||isNaN(e(A))?1:e(A)),_=I(()=>Math.ceil(s()/e(h)));var k=tr(),R=d(k),F=d(R);it(F);var w=v(F,4),G=d(w,!0);o(w);var S=v(w,4),X=d(S,!0);o(S),o(R);var T=v(R,4);xe(T,5,()=>Object.entries(i()),Ie,(Q,q)=>{var E=Yt();const se=I(()=>{const[pe,ye]=e(q);return{fabType:pe,requiredFabs:ye}});var L=d(E),ie=d(L,!0);o(L);var z=v(L,2),ve=d(z,!0);o(z),o(E),j(pe=>{U(ie,e(se).fabType),U(ve,pe)},[()=>Math.ceil(e(se).requiredFabs/e(h))]),g(Q,E)}),o(T);var K=v(T,4);xe(K,1,()=>Object.entries(l()??{}),Ie,(Q,q,E,se)=>{const L=I(()=>{const[ie,z]=e(q);return{recipeId:ie,requiredBuildings:z}});Wt(Q,{get recipeId(){return e(L).recipeId},get requiredBuildings(){return e(L).requiredBuildings},get devisor(){return e(h)}})});var de=v(K,4);xe(de,5,()=>Object.entries(u()),Ie,(Q,q)=>{var E=er();const se=I(()=>{const[z]=e(q);return{itemId:z}});var L=d(E),ie=d(L,!0);o(L),o(E),j(()=>U(ie,x.item[e(se).itemId].Name)),g(Q,E)}),o(de),o(k),j(()=>{U(G,e(_)),U(X,n().Name)}),lt(F,()=>e(A),Q=>oe(A,Q)),g(c,k),Re(),a()}var ar=y('<img class="h-6" alt="">');function vt(c,r){Pe(r,!0);const t=I(()=>r.filename.split("/")),a=I(()=>e(t)&&e(t)[e(t).length-1]),s=I(()=>e(a)&&ot+`/dsp_sprites/${e(a)}.png`);var n=ar();j(()=>Je(n,"src",e(s))),g(c,n),Re()}var nr=(c,r)=>oe(r,!1),sr=(c,r)=>oe(r,!1),ir=y('<dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2 fixed "><!> <button class="bg-green-800 hover:bg-green-700 py-2 rounded-xl mt-auto">close</button></dialog> <button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl bg-black opacity-70 top-0 left-0 z-40" aria-label="close"></button>',1),lr=(c,r)=>{var t;return(t=r.deletecb)==null?void 0:t.call(r)},or=y(`<style scoped="">input::-webkit-outer-spin-button,
          input::-webkit-inner-spin-button {
              /* display: none; <- Crashes Chrome on hover */
              -webkit-appearance: none;
              margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
          }

          input[type=number] {
              -moz-appearance: textfield;
          }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),dr=y('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),cr=y("<option><!> </option>"),ur=y("<option> </option>"),vr=y('<a class="bg-gray-800 hover:bg-slate-700">➡️</a>'),pr=y('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),fr=y('<a class="bg-gray-800 hover:bg-slate-700">➡️</a>'),gr=(c,r)=>oe(r,!0),mr=y('<button class="py-1 rounded-xl px-4 bg-slate-800 hover:bg-slate-700">🔎</button>'),hr=y('<span class="flex-grow"> <!></span> <!>',1),_r=y('<div class="ml-auto"><!></div>'),br=(c,r,t,a)=>{var s;return e(r)<0&&((s=x.producedVia[e(t)])==null?void 0:s.length)>0&&a.planner.planFor(e(t))},xr=y('<div class="flex items-center"><span class="pl-2">📝</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Ir=y('<div class="flex items-center"><span class="px-3.5"></span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),yr=y("<div><!></div>"),kr=y('<div class="flex gap-2 hover:bg-gray-700"><button><!></button> <!></div>'),Br=y('<div class="flex flex-col gap-0.5 "></div>'),wr=y('<!> <div class="flex gap-1 max-w-2xl items-center hover:bg-gray-700  flex-wrap @container"><button><!></button> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function ft(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(T,"$targetAmount",t),n=()=>N(w,"$recipeId",t),i=()=>N(F,"$recipe",t),l=()=>N(R,"$itemId",t),u=()=>N(E,"$options",t),m=()=>N(k,"$item",t),p=()=>N(G,"$requiredBuildings",t),f=()=>N(S,"$children",t),b=()=>N(q,"$inputsOutputs",t),B=()=>N(de,"$providedItemsPerInterval",t),A=()=>N(K,"$childrenProvideItemsPerInterval",t),h=()=>N(Q,"$requiredItemsPerInterval",t),_=()=>N(X,"$childrenByItemId",t);let{item:k,itemId:R,recipe:F,recipeId:w,requiredBuildings:G,children:S,childrenByItemId:X,targetAmount:T,childrenProvideItemsPerInterval:K,providedItemsPerInterval:de,requiredItemsPerInterval:Q,inputsOutputs:q,options:E,header:se}=r.planner,L=_e(st(s())),ie=_e(st(n())),z=_e(!1);ct(()=>{r.planner.amountEditable&&s()!==e(L)&&r.planner.setAmount(e(L))}),ct(()=>{e(ie)!==n()&&r.planner.setRecipeId(e(ie))});var ve=wr(),pe=ne(ve);{var ye=C=>{var M=ir(),W=ne(M),D=d(W);rr(D,{get planner(){return r.planner}});var me=v(D,2);me.__click=[nr,z],o(W);var Y=v(W,2);Y.__click=[sr,z],g(C,M)};V(pe,C=>{e(z)&&C(ye)})}var Te=v(pe,2),$=d(Te);$.__click=[lr,r];let re;var le=d($);{var fe=C=>{var M=or(),W=v(ne(M),2),D=d(W);{var me=Z=>{vt(Z,{get filename(){return i().IconPath}})},Y=Z=>{const P=I(()=>{var O,ee;return(ee=(O=i())==null?void 0:O.Results)==null?void 0:ee[0]});we(Z,{get itemId(){return e(P)}})};V(D,Z=>{var P;(P=i())!=null&&P.IconPath?Z(me):Z(Y,!1)})}var he=v(D,2);it(he),o(W),lt(he,()=>e(L),Z=>oe(L,Z)),g(C,M)},Oe=C=>{var M=dr(),W=v(d(M),2);{var D=Z=>{vt(Z,{get filename(){return i().IconPath}})},me=Z=>{we(Z,{get itemId(){return l()}})};V(W,Z=>{var P;(P=i())!=null&&P.IconPath?Z(D):Z(me,!1)})}var Y=v(W,2),he=d(Y,!0);o(Y),o(M),j(Z=>{Ze(Y,`padding-left: ${r.planner.depth*1.1}rem`),U(he,Z)},[()=>Math.round(s()*100)/100]),g(C,M)};V(le,C=>{r.planner.amountEditable?C(fe):C(Oe,!1)})}o($);var ae=v($,2),te=d(ae),qe=d(te);{var $e=C=>{var M=pr(),W=ne(M),D=d(W);{var me=P=>{var O=cr();O.value=(O.__value=void 0)==null?"":void 0;var ee=d(O);{var Fe=ke=>{var Se=Le("orbital collector");g(ke,Se)},Ke=ke=>{var Se=Le("mining");g(ke,Se)};V(ee,ke=>{x.canBeExtracted[l()]?ke(Fe):ke(Ke,!1)})}var Ae=v(ee);o(O),j(()=>{ut(O,n()===void 0),U(Ae,` (${m().Name??""})`)}),g(P,O)};V(D,P=>{(x.canBeExtracted[l()]||x.canBeMined[l()])&&P(me)})}var Y=v(D);xe(Y,1,u,Ie,(P,O)=>{var ee=ur(),Fe={},Ke=d(ee,!0);o(ee),j(()=>{Fe!==(Fe=x.recipe[e(O)].ID)&&(ee.value=(ee.__value=x.recipe[e(O)].ID)==null?"":x.recipe[e(O)].ID),ut(ee,n()===x.recipe[e(O)].ID),U(Ke,x.recipe[e(O)].Name)}),g(P,ee)}),o(W);var he=v(W,2);{var Z=P=>{var O=vr();j(ee=>Je(O,"href",ee),[()=>nt.recipe(i().ID)+"?targetAmount="+Math.round(p())+"&depth=10"]),g(P,O)};V(he,P=>{!r.planner.amountEditable&&i()&&P(Z)})}Ct(W,()=>e(ie),P=>oe(ie,P)),g(C,M)},Ye=C=>{var M=hr(),W=ne(M),D=d(W),me=v(D);{var Y=P=>{var O=fr();j(ee=>Je(O,"href",ee),[()=>nt.recipe(i().ID)+"?targetAmount="+Math.round(p())+"&depth=10"]),g(P,O)};V(me,P=>{r.planner.amountEditable||P(Y)})}o(W);var he=v(W,2);{var Z=P=>{var O=mr();O.__click=[gr,z],g(P,O)};V(he,P=>{f().length>1&&!r.planner.amountEditable&&P(Z)})}j(()=>{var P;return U(D,`${((P=i())==null?void 0:P.Name)??""} `)}),g(C,M)};V(qe,C=>{l()&&(u().length>1||u().length>=1&&x.canBeExtracted[l()]||x.canBeMined[l()])?C($e):C(Ye,!1)})}o(te),o(ae);var Ge=v(ae,2);{var et=C=>{var M=_r(),W=d(M);Ht(W,{get planner(){return r.planner}}),o(M),g(C,M)};V(Ge,C=>{p()&&n()&&C(et)})}o(Te);var He=v(Te,2);{var tt=C=>{var M=Br();xe(M,5,b,Ie,(W,D)=>{var me=Ne();const Y=I(()=>{var P,O,ee;return(((P=B())==null?void 0:P[e(D)])??0)+(((O=A())==null?void 0:O[e(D)])??0)-(((ee=h())==null?void 0:ee[e(D)])??0)}),he=I(()=>_()[e(D)]);var Z=ne(me);Ue(Z,()=>e(D),P=>{var O=Ne(),ee=ne(O);{var Fe=Ae=>{ft(Ae,{get planner(){return e(he)},deletecb:()=>r.planner.deleteChild(e(D))})},Ke=Ae=>{var ke=kr(),Se=d(ke);let dt;Se.__click=[br,Y,D,r];var gt=d(Se);{var mt=ce=>{var ge=xr(),Ce=v(d(ge),2);we(Ce,{get itemId(){return e(D)}});var Ee=v(Ce,2),Me=d(Ee,!0);o(Ee),o(ge),j(Xe=>{Ze(Ee,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),U(Me,Xe)},[()=>Math.round(e(Y)*100)/100]),g(ce,ge)},ht=(ce,ge)=>{{var Ce=Ee=>{var Me=Ir(),Xe=v(d(Me),2);we(Xe,{get itemId(){return e(D)}});var rt=v(Xe,2),xt=d(rt,!0);o(rt),o(Me),j(It=>{Ze(rt,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),U(xt,It)},[()=>Math.round(e(Y)*100)/100]),g(Ee,Me)};V(ce,Ee=>{e(D)!==l()&&e(Y)!==0&&Ee(Ce)},ge)}};V(gt,ce=>{var ge;e(Y)<0&&((ge=x.producedVia[e(D)])==null?void 0:ge.length)>0?ce(mt):ce(ht,!1)})}o(Se);var _t=v(Se,2);{var bt=ce=>{var ge=yr();let Ce;var Ee=d(ge);Mt(Ee,{get itemId(){return e(D)}}),o(ge),j(Me=>Ce=be(ge,1,"flex gap-2 items-center ",null,Ce,Me),[()=>({"text-green-500":e(Y)>0,"text-red-500":e(Y)<0})]),g(ce,ge)};V(_t,ce=>{e(D)!==l()&&e(Y)!==0&&ce(bt)})}o(ke),j(ce=>dt=be(Se,1,"bg-slate-800  text-center rounded-r-lg",null,dt,ce),[()=>{var ce;return{"hover:bg-green-800":e(Y)<0&&((ce=x.producedVia[e(D)])==null?void 0:ce.length)>0}}]),g(Ae,ke)};V(ee,Ae=>{e(he)?Ae(Fe):Ae(Ke,!1)})}g(P,O)}),g(W,me)}),o(M),g(C,M)};V(He,C=>{var M;((M=b())==null?void 0:M.size)>0&&C(tt)})}j(C=>re=be($,1,"bg-slate-800  text-center rounded-r-lg  outline-slate-500",null,re,C),[()=>({"hover:bg-red-700":!r.planner.amountEditable,"outline-1":r.planner.amountEditable})]),g(c,ve),Re(),a()}Ve(["click"]);var Pr=y('<div class="flex flex-col items-stretch group w-full "><a class="my-2 z-30 hover:bg-slate-700 w-xs"> </a></div>'),Rr=y('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur-3xl backdrop-opacity-75  z-40"><!> <label for="recipeName">ingredient or recipe name</label><input id="recipeName"></div> <!>',1);function Tr(c,r){Pe(r,!0);let t=_e(st([])),a=at(),s=at(),n=at(),i=_e(""),l=I(()=>e(i)?x.items.filter(h=>h.Name.toLowerCase().includes(e(i).toLowerCase())).map(h=>h.ID):[]),u=I(()=>(()=>{const h=new Set;return e(l).forEach(_=>{for(const k of x.relatedRecipes[_]??[])h.add(k)}),h})()),m=I(()=>x.recipees.filter(h=>e(t).length>0?e(t).includes(h.Type):!0).filter(h=>e(i)?e(u).has(h.ID):!0).filter(h=>a.checked===null?!0:a.checked?x.buildableRecipees.has(h.ID):!x.buildableRecipees.has(h.ID)).filter(h=>s.checked===null?!0:s.checked?x.fluidRecipees.has(h.ID):!x.fluidRecipees.has(h.ID)).filter(h=>n.checked===null?!0:n.checked?x.entityRecipees.has(h.ID):!x.entityRecipees.has(h.ID)));new Set(x.recipees.map(h=>h.Type));var p=Rr(),f=ne(p),b=d(f);V(b,h=>{});var B=v(b,3);it(B),o(f);var A=v(f,2);xe(A,17,()=>e(m),Ie,(h,_)=>{var k=Pr(),R=d(k),F=d(R,!0);o(R),o(k),j(w=>{Je(R,"href",w),U(F,e(_).Name)},[()=>nt.recipe(e(_).ID)]),g(h,k)}),lt(B,()=>e(i),h=>oe(i,h)),g(c,p),Re()}Ve(["click"]);var qr=(c,r)=>oe(r,!e(r)),$r=(c,r,t,a)=>r(e(t),e(a)),Sr=y("<button><!> <span> </span></button>"),Er=y('<div><h4 class="bg-blue-900 py-2 px-4 rounded-t"> </h4> <div class="flex bg-gray-600 "></div></div>'),Nr=y("<div></div> <!>",1),Ar=y(`<button class="bg-blue-800 hover:bg-blue-700 hover:shadow-2xl  rounded-t py-5 px-4 flex">default tier for
	new factories <span class="ml-auto shadow-2xl"><!></span></button> <!>`,1);function Or(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(n,"$defaultTierReadable",t);let n=ue.defaultTier;s();let i=_e(!1);const l=(_,k)=>{const R={...s(),[_]:k};localStorage.setItem("defaultTiers",JSON.stringify(R)),ue.defaultTier.set(R)};var u=Ar(),m=ne(u);m.__click=[qr,i];var p=v(d(m)),f=d(p);{var b=_=>{var k=Le("🔼");g(_,k)},B=_=>{var k=Le("🔽");g(_,k)};V(f,_=>{e(i)?_(b):_(B,!1)})}o(p),o(m);var A=v(m,2);{var h=_=>{var k=Nr(),R=v(ne(k),2);xe(R,1,()=>Object.keys(s()),Ie,(F,w)=>{var G=Ne(),S=ne(G);{var X=T=>{var K=Er(),de=d(K),Q=d(de,!0);o(de);var q=v(de,2);xe(q,21,()=>ue.availableTiers[e(w)],Ie,(E,se)=>{var L=Sr();const ie=I(()=>ue.factoryItems[e(w)][e(se)]),z=I(()=>e(se)===s()[e(w)]);let ve;L.__click=[$r,l,w,se];var pe=d(L);we(pe,{get itemId(){return e(ie)}});var ye=v(pe,2),Te=d(ye,!0);o(ye),o(L),j($=>{ve=be(L,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2      rounded-lg",null,ve,$),U(Te,e(se))},[()=>({"outline-amber-100":e(z),"outline-1":e(z),active:e(z),"bg-slate-500":e(z),"hover:bg-slate-400":e(z),"text-white":e(z),"hover:bg-slate-700":!e(z),"text-gray-300":!e(z),"bg-slate-800":!e(z)})]),g(E,L)}),o(q),o(K),j(()=>U(Q,e(w))),g(T,K)};V(S,T=>{var K;((K=ue.availableTiers[e(w)])==null?void 0:K.length)>1&&T(X)})}g(F,G)}),g(_,k)};V(A,_=>{e(i)&&_(h)})}g(c,u),Re(),a()}Ve(["click"]);var Cr=(c,r)=>oe(r,"bulidings"),Mr=(c,r)=>oe(r,"throughput"),jr=y('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 backdrop-brightness-75 z-40"> </span></div>'),Dr=y('<div class="odd:bg-gray-950 gap-3 px-2 flex "><div class="justify-self-center w-14 text-center relative p-0.5"><em class="absolute w-full h-full text-right left-0 top-0 backdrop-brightness-85 "> </em> <!></div> <span class="flex-grow"> </span> <!></div>'),Vr=y('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0 gap-0.5"><h4 class="px-4 py-2 bg-slate-800 rounded-t-lg flex items-center"><span class="flex-grow">required</span> <button>buildings</button> <button>conveyors</button></h4> <!></div>');function zr(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(u,"$itemId",t),n=()=>N(l,"$requiredBuildingsByRecipeId",t),i=()=>N(m,"$defaultTier",t);let{requiredBuildingsByRecipeId:l,itemId:u}=r.planner,{defaultTier:m}=ue,p=_e("bulidings");var f=Vr(),b=d(f),B=v(d(b),2);let A;B.__click=[Cr,p];var h=v(B,2);let _;h.__click=[Mr,p],o(b);var k=v(b,2);Ue(k,s,R=>{var F=Ne(),w=ne(F);xe(w,1,()=>Object.entries(n()),Ie,(G,S)=>{var X=Ne();const T=I(()=>{const[Q,q]=e(S);return{recipeId:Q,requiredBuildings:q}});var K=ne(X);{var de=Q=>{var q=Dr();const E=I(()=>x.recipe[Number(e(T).recipeId)]),se=I(()=>i()[e(E).Type]/e(E).TimeSpend),L=I(()=>e(E).ResultCounts.reduce((ae,te)=>te+ae,0)),ie=I(()=>e(T).requiredBuildings*e(se)*e(L)*60);var z=d(q),ve=d(z),pe=d(ve);o(ve);var ye=v(ve,2);const Te=I(()=>{var ae,te;return(te=(ae=e(E))==null?void 0:ae.Results)==null?void 0:te[0]});we(ye,{get itemId(){return e(Te)}}),o(z);var $=v(z,2),re=d($,!0);o($);var le=v($,2);{var fe=ae=>{var te=jr();const qe=I(()=>String(Math.round(e(T).requiredBuildings*10)/10)),$e=I(()=>e(qe).indexOf(".")),Ye=I(()=>e($e)===-1?1:0);var Ge=d(te),et=d(Ge);Ue(et,i,C=>{we(C,{get itemId(){var M;return ue.factoryItems[(M=e(E))==null?void 0:M.Type][i()[e(E).Type]]}})}),o(Ge);var He=v(Ge,2),tt=d(He,!0);o(He),o(te),j(()=>{Ze(te,`padding-right: ${e(Ye)+.5}em`),U(tt,e(qe))}),g(ae,te)},Oe=(ae,te)=>{{var qe=$e=>{pt($e,{get outputs(){return e(ie)}})};V(ae,$e=>{e(p)==="throughput"&&$e(qe)},te)}};V(le,ae=>{e(p)==="bulidings"?ae(fe):ae(Oe,!1)})}o(q),j(ae=>{var te;U(pe,`${ae??""}/s`),U(re,((te=e(E))==null?void 0:te.Name)??"recipe"+e(T).recipeId)},[()=>Math.round(e(ie)*100)/100]),g(Q,q)};V(K,Q=>{e(T).recipeId&&Q(de)})}g(G,X)}),g(R,F)}),o(f),j((R,F)=>{A=be(B,1," px-4 py-2 rounded-l-lg  outline-gray-600",null,A,R),_=be(h,1,"hover:bg-slate-500 px-4 py-2  rounded-r-lg  outline-gray-600",null,_,F)},[()=>({"bg-blue-700":e(p)==="bulidings","bg-gray-700":e(p)!=="bulidings","hover:bg-blue-500":e(p)==="bulidings","hover:bg-gray-500":e(p)!=="bulidings"}),()=>({"bg-blue-700":e(p)==="throughput","bg-gray-700":e(p)!=="throughput","hover:bg-blue-500":e(p)==="throughput","hover:bg-gray-500":e(p)!=="throughput"})]),g(c,f),Re(),a()}Ve(["click"]);var Fr=y('<link rel="icon">'),Lr=(c,r)=>oe(r,!1),Jr=(c,r)=>oe(r,!1),Ur=(c,r)=>r(),Gr=(c,r)=>oe(r,!1),Kr=y('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl bg-black opacity-70 top-0 left-0 z-40" aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2 fixed outline-1 rounded-2xl outline-slate-600"><h6 class="flex items-center justify-between"><span>Factory Globals</span><button class="bg-slate-800 hover:bg-slate-700 w-12 py-2">✖️</button></h6> <!> <span class="flex-grow"></span> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to existing</button> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to future</button></dialog>',1),Hr=(c,r)=>e(r).setInterval(0),Xr=(c,r,t)=>e(r).setInterval(t),Zr=(c,r)=>e(r).setInterval(60),Qr=y("<button>Second</button>"),Wr=(c,r)=>oe(r,!0),Yr=y(`<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap"><div class="lg:max-w-sm lg:block hidden max-h-screen  ml-auto overflow-y-auto"><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto"><div class="flex  text-sm py-1"><span class="px-3 py-1 bg-slate-800 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <!></span></span> <span class="px-3 py-3 flex-grow text-right"></span> <button class="px-3 py-3 bg-slate-800 hover:bg-slate-700 rounded-l-lg">⚙️
				Required Fabs to Process
				Items</button></div> <!></div> <!></div>`,1);function pa(c,r){Pe(r,!0);const[t,a]=ze(),s=()=>N(m,"$defaultTier",t),n=()=>N(e(A),"$header",t),i=()=>N(e(B),"$timeSpendChanged",t),l=()=>N(e(f),"$targetInterval",t),u=()=>N(e(b),"$timeSpend",t);let{defaultTier:m}=ue,p=I(()=>new We(r.data.recipeId,void 0,void 0,void 0,void 0,r.data.depth,r.data.targetAmount)),f=I(()=>e(p).targetInterval),b=I(()=>e(p).timeSpend),B=I(()=>e(p).timeSpendChanged),A=I(()=>e(p).header);const h=60*60;let _=_e(!1);const k=$=>{$||($=e(p));const re=De($.recipe);if(re){const le=re.Type,fe=s()[le];$.tier.set(fe)}De($.children).forEach(le=>k(le)),oe(_,!1)};var R=Yr();At($=>{var re=Fr();j(()=>{var le,fe;Nt.title=(le=n())==null?void 0:le[1],Je(re,"href",(fe=n())==null?void 0:fe[0])}),g($,re)});var F=ne(R);{var w=$=>{var re=Kr(),le=ne(re);le.__click=[Lr,_];var fe=v(le,2),Oe=d(fe),ae=v(d(Oe));ae.__click=[Jr,_],o(Oe);var te=v(Oe,2);Or(te,{});var qe=v(te,4);qe.__click=[Ur,k];var $e=v(qe,2);$e.__click=[Gr,_],o(fe),g($,re)};V(F,$=>{e(_)&&$(w)})}var G=v(F,2),S=d(G),X=d(S);Tr(X,{}),o(S);var T=v(S,2),K=d(T),de=d(K),Q=v(d(de)),q=d(Q);let E;q.__click=[Hr,p];var se=d(q);o(q);var L=v(q,2);let ie;L.__click=[Xr,p,h];var z=v(L,2);{var ve=$=>{var re=Qr();let le;re.__click=[Zr,p],j(fe=>le=be(re,1,"px-1.5 py-2 multi hover:bg-slate-700",null,le,fe),[()=>({active:l()===60})]),g($,re)};V(z,$=>{u()!==60&&$(ve)})}o(Q),o(de);var pe=v(de,4);pe.__click=[Wr,_],o(K);var ye=v(K,2);Ue(ye,()=>e(p),$=>{ft($,{get planner(){return e(p)}})}),o(T);var Te=v(T,2);Ue(Te,()=>e(p),$=>{zr($,{get planner(){return e(p)}})}),o(G),j(($,re,le)=>{E=be(q,1,"px-1.5 py-2 multi hover:bg-slate-700",null,E,$),U(se,`Cycle (${re??""}s)`),ie=be(L,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ie,le)},[()=>({"animate-flash":i(),active:l()===u()}),()=>Math.round(u()/60*100)/100,()=>({active:l()===h})]),g(c,R),Re(),a()}Ve(["click"]);export{pa as component,va as universal};
