var It=Object.defineProperty;var yt=(v,r,t)=>r in v?It(v,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):v[r]=t;var L=(v,r,t)=>yt(v,typeof r!="symbol"?r+"":r,t);import{c as $e,t as x,a as f,b as Ye}from"../chunks/BmHjAyxW.js";import{au as kt,aH as Bt,X as wt,z as Pt,A as et,B as $t,K as Rt,J as Tt,L as qt,U as St,p as Oe,f as ie,t as A,g as e,e as y,a as Ce,b as Ae,s as u,c as d,r as o,h as ce,M as ot,aI as Et}from"../chunks/B-82rzdC.js";import{d as Ke,s as J,a as Nt}from"../chunks/D897dbaB.js";import{i as O}from"../chunks/BfA0D6Yw.js";import{s as Ue,r as ut,b as dt,L as nt}from"../chunks/h91-G9kU.js";import{t as At,s as Re,c as vt,b as Ot,o as at}from"../chunks/C3CEGPiq.js";import{s as He,a as T}from"../chunks/D2GXNv7x.js";import{D as b,e as ye,i as ke,I as Ct}from"../chunks/gwZSL3j3.js";import{w as Pe,d as H,g as Le}from"../chunks/DWHFLt1U.js";import{a as it}from"../chunks/BYesgi-l.js";import{p as st}from"../chunks/Cg9itU8Q.js";function Ge(v,r,t){et&&$t();var a=v,s=St,n,i=kt()?Bt:wt;Pt(()=>{i(s,s=r())&&(n&&Rt(n),n=Tt(()=>t(a)))}),et&&(a=qt)}function We(v,r,t,a){var s=v.__style;if(et||s!==r){var n=At(r);(!et||n!==v.getAttribute("style"))&&(n==null?v.removeAttribute("style"):v.style.cssText=n),v.__style=r}return a}const Mt=!1,jt=({params:v,url:r})=>{const{id:t}=v,a=Number(t),s=r.searchParams.get("depth"),n=r.searchParams.get("targetAmount");return{recipeId:a,depth:s&&parseInt(s)||1,targetAmount:n&&parseInt(n)||1}},da=Object.freeze(Object.defineProperty({__proto__:null,load:jt,prerender:Mt},Symbol.toStringTag,{value:"Module"})),Dt=()=>{const v=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(v){const r=JSON.parse(v);return Pe(r)}},ge={defaultTier:Dt()??Pe({Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:1}),availableTiers:{Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[.125,.2,.25]},factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,2:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{.125:1141,.2:1142,.25:1143}}};class Vt{constructor(r,t,a,s,n,i,l){this.recipeId=r,this.itemId=t,this.targetAmount=a,this.targetInterval=s,this.tier=n,this.proliferator=i,this.timeSpend=l}}const Fe=(v,r)=>{const t={...v};return Object.entries(r).forEach(([a,s])=>{const n=Number(a);t[n]=(t[n]??0)+s}),t};class tt extends Vt{constructor(t,a,s,n,i=0,l=1,p){var z;const m=!!(a&&(b.canBeExtracted[a]||b.canBeMined[a]));!t&&!m&&(t=(z=b.alternativeRecipe[a])==null?void 0:z[0]);const _=Pe(t),c=t?b.recipe[t]:void 0;let w=c==null?void 0:c.Results.findIndex(M=>a===M);const N=!a;!a&&(w??-1)>=0&&(a=c==null?void 0:c.Results[w??0]);const Z=Pe(a),h=Pe((c==null?void 0:c.ResultCounts[w??0])??p??1),g=s?H([Z,s],([M,ae])=>ae[M]):h,I=Pe(c!=null&&c.Type?Le(ge.defaultTier)[c.Type]:1),C=Pe(Le(ge.defaultTier).Proliferator),V=Pe(0),P=H([_,I],([M,ae])=>{var q;return((q=b.recipe[M])==null?void 0:q.TimeSpend)/ae});n||(n=H([V,P],([M,ae])=>M>0?M:ae));super(_,Z,g,n,I,C,P);L(this,"amountEditable");L(this,"manualAmount",Pe());L(this,"manualInterval");L(this,"children",Pe([]));L(this,"canBeMined",H(this.itemId,t=>b.canBeMined[t]));L(this,"canBeExtracted",H(this.itemId,t=>b.canBeExtracted[t]));L(this,"item",H(this.itemId,t=>b.item[t]));L(this,"recipe",H(this.recipeId,t=>b.recipe[t]));L(this,"header",H([this.itemId,this.recipe],([t,a])=>{var p;const s=t??((p=a==null?void 0:a.Results)==null?void 0:p[0]);if(!s)return;const n=b.item[s],i=n.IconPath.split("/"),l=i[i.length-1];return l&&[it+`/dsp_sprites/${l}.png`,n.Name]}));L(this,"options",H(this.itemId,t=>b.alternativeRecipe[t]));L(this,"timeSpendChanged",H(this.timeSpend,(t,a)=>{a(!!t);const s=setTimeout(()=>a(!t),1400);return()=>clearTimeout(s)}));L(this,"relativeSpeed",H([this.targetInterval,this.timeSpend],([t,a])=>t/a));L(this,"requiredBuildings",H([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([t,a,s,n,i])=>{const l=a==null?void 0:a.Results.findIndex(m=>s===m),p=t/(a==null?void 0:a.ResultCounts[l])/n;return isNaN(p)?t:p}));L(this,"providedItemsPerInterval",H([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([t,a,s,n,i])=>{if(!t&&n&&(b.canBeMined[n]||b.canBeExtracted[n]))return{[n]:i};const l={};return t==null||t.Results.forEach((p,m)=>{l[p]=t.ResultCounts[m]*a*s}),l}));L(this,"childrenProvideItemsPerInterval",H(this.children,(t,a)=>{const s=new Array(t.length),n=t.map((l,p)=>l.providedItemsPerInterval.subscribe(m=>{s[p]=m;const _=s.filter(c=>!!c).reduce((c,w)=>Fe(c,w),{});a(_)})),i=s.filter(l=>!!l).reduce((l,p)=>Fe(l,p),{});return a(i),()=>n.forEach(l=>l())}));L(this,"requiredBuildingsByRecipeId",H([this.children,this.recipeId,this.requiredBuildings],([t,a,s],n)=>{const i=new Array(t.length),l=t.map((m,_)=>m.requiredBuildingsByRecipeId.subscribe(c=>{i[_]=c;const w=i.filter(N=>!!N).reduce((N,Z)=>Fe(N,Z),{});if(a){const N=a;w[N]=(w[N]??0)+s}n(w)})),p=i.filter(m=>!!m).reduce((m,_)=>Fe(m,_),{});if(a){const m=a;p[m]=(p[m]??0)+s}return n(p),()=>l.forEach(m=>m())}));L(this,"fabsByType",H(this.requiredBuildingsByRecipeId,t=>Object.entries(t).reduce((a,[s,n])=>{const i=Number(s),l=b.recipe[i].Type;return a[l]=(a[l]??0)+Math.ceil(n),a},{})));L(this,"childrenByItemId",H(this.children,(t,a)=>{const s=new Array(t.length),n=t.map((l,p)=>l.itemId.subscribe(m=>{s[p]=[m,l];const _=s.filter(c=>!!c).reduce((c,[w,N])=>(c[w]=N,c),{});a(_)})),i=s.filter(l=>!!l).reduce((l,[p,m])=>(l[p]=m,l),{});return a(i),()=>n.forEach(l=>l())}));L(this,"requiredItemsPerInterval",H([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,s])=>{const n={};return t==null||t.Items.forEach((i,l)=>n[i]=t.ItemCounts[l]*a*s),n}));L(this,"deficitRequiredItemsPerInterval",H([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,s])=>{const n={};return t==null||t.Items.forEach((i,l)=>n[i]=-(t.ItemCounts[l]*a*s)),n}));L(this,"inputsOutputs",H([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([t,a,s])=>{const n=new Set;return Object.keys(a).forEach(i=>{n.add(Number(i))}),Object.keys(t??{}).forEach(i=>{n.add(Number(i))}),Object.keys(s).forEach(i=>{n.add(Number(i))}),n}));L(this,"surplus",H([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([t,a,s,n])=>{const i=Fe(t,s);return Object.entries(a).forEach(([l,p])=>i[Number(l)]=(i[Number(l)]??0)-p),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));L(this,"deficit",H([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([t,a])=>{const s={...t};return Object.entries(a).forEach(([n,i])=>s[Number(n)]=(s[Number(n)]??0)-i),Object.entries(s).filter(([,n])=>n>=0).forEach(([n])=>delete s[Number(n)]),s}));L(this,"deficitByItemId",H([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([t,a,s,n,i],l)=>{const p=new Array(t.length),m=t.map((c,w)=>c.deficitByItemId.subscribe(N=>{p[w]=N;const Z=p.filter(h=>!!h).reduce((h,g)=>Fe(h,g),s?a:{[n]:-i});l(Z)})),_=p.filter(c=>!!c).reduce((c,w)=>Fe(c,w),s?a:{[n]:-i});return l(_),()=>m.forEach(c=>c())}));L(this,"totals",H([this.itemId,this.requiredBuildings,this.children],([t,a,s])=>{const n={};return n[t]=a,s.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,p])=>{const m=Number(l);n[m]=(n[m]??0)+p})}),n}));this.depth=i,this.amountEditable=N,this.manualAmount=h,this.manualInterval=V,l>i&&this.children.set(this.dbd(l))}setAmount(t){this.manualAmount.set(t)}setRecipeId(t){this.recipeId.set(t),this.expand()}deleteChild(t){this.children.update(a=>{const s=a.findIndex(n=>Le(n.itemId)===t);return a.splice(s,1),a})}setInterval(t){this.manualInterval.set(t)}expand(){this.children.set(this.dbd())}planFor(t){this.children.update(a=>(a.push(new tt(void 0,t,this.requiredItemsPerInterval,this.targetInterval,this.depth+1)),a))}dbd(t){const a=[],s=Le(this.recipe);return s==null||s.Items.forEach((n,i)=>{var m;if(!((m=b.alternativeRecipe[n])!=null&&m.length))return;const l=new tt(void 0,n,this.requiredItemsPerInterval,this.targetInterval,this.depth+1,t);a.push(l);const p=Le(l.providedItemsPerInterval);Object.entries(p).forEach(([_,c])=>{})}),a}}var zt=x('<img class="h-6" alt="">');function Ne(v,r){Oe(r,!0);let t=y(()=>b.item[r.itemId]);const a=y(()=>{var p;return(p=e(t))==null?void 0:p.IconPath.split("/")}),s=y(()=>e(a)&&e(a)[e(a).length-1]),n=y(()=>e(s)&&it+`/dsp_sprites/${e(s)}.png`);var i=$e(),l=ie(i);Ge(l,()=>r.itemId,p=>{var m=zt();A(()=>Ue(m,"src",e(n))),f(p,m)}),f(v,i),Ce()}var Ft=(v,r,t)=>r(e(t)),Lt=x("<button> </button>"),Jt=x('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),Ut=(v,r)=>ce(r,!0),Gt=x('<button class="text-center min-w-16 h-10 rounded-l-lg bg-slate-800 hover:bg-slate-600 py-2 px-3 flex justify-around items-end gap-2 relative "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function Kt(v,r){Oe(r,!0);const[t,a]=He(),s=()=>T(l,"$recipe",t),n=()=>T(p,"$tier",t),i=()=>T(m,"$requiredBuildings",t);let{recipe:l,tier:p,requiredBuildings:m}=r.planner,_=Ae(!1);const c=g=>{r.planner.tier.set(g),ce(_,!1)};var w=$e(),N=ie(w);{var Z=g=>{var I=Jt(),C=u(d(I),2);ye(C,1,()=>ge.availableTiers[s().Type],ke,(V,P)=>{var z=Lt();let M;z.__click=[Ft,c,P];var ae=d(z,!0);o(z),A(q=>{M=Re(z,1,"px-2 py-1 outline-slate-600 hover:bg-slate-600 text-sm  rounded",null,M,q),J(ae,e(P))},[()=>({"outline-1":e(P)===n(),active:e(P)===n()})]),f(V,z)}),o(I),f(g,I)},h=g=>{var I=Gt();I.__click=[Ut,_];var C=d(I),V=d(C);Ne(V,{get itemId(){var q;return ge.factoryItems[(q=s())==null?void 0:q.Type][n()]}}),o(C);var P=u(C,2),z=d(P);o(P);var M=u(P,2),ae=d(M,!0);o(M),o(I),A(q=>{J(z,`tier ${n()??""}`),J(ae,q)},[()=>Math.round(i()*100)/100]),f(g,I)};O(N,g=>{e(_)?g(Z):g(h,!1)})}f(v,w),Ce(),a()}Ke(["click"]);var Ht=x('<div class="flex gap-4 hover:bg-gray-700"><span> </span> <span class="text-right flex-grow"> </span></div>'),Xt=x('<div class="flex odd:bg-gray-950 gap-2 px-2 items-center hover:bg-gray-700 "><span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs"> </span> <em class="text-right flex-grow"> </em></div>'),Zt=x('<div class="flex gap-4 hover:bg-gray-700 px-1"><span> </span></div>'),Qt=x('<div><h3 class="bg-blue-800 py-2 px-4  text-center "><span class="w-14 text-right"> </span> <span class="text-xs text-slate-400">x</span> </h3> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="bg-blue-900 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function Wt(v,r){Oe(r,!0);const[t,a]=He(),s=()=>T(N,"$requiredBuildings",t),n=()=>T(w,"$recipe",t),i=()=>T(c,"$fabsByType",t),l=()=>T(_,"$requiredBuildingsByRecipeId",t),p=()=>T(h,"$defaultTier",t),m=()=>T(Z,"$deficitByItemId",t);let{requiredBuildingsByRecipeId:_,fabsByType:c,recipe:w,requiredBuildings:N,deficitByItemId:Z}=r.planner,{defaultTier:h}=ge;var g=Qt(),I=d(g),C=d(I),V=d(C,!0);o(C);var P=u(C,3);o(I);var z=u(I,4);ye(z,5,()=>Object.entries(i()),ke,(q,K)=>{var ne=Ht();const pe=y(()=>{const[le,j]=e(K);return{fabType:le,requiredFabs:j}});var F=d(ne),Q=d(F,!0);o(F);var W=u(F,2),se=d(W,!0);o(W),o(ne),A(()=>{J(Q,e(pe).fabType),J(se,e(pe).requiredFabs)}),f(q,ne)}),o(z);var M=u(z,4);ye(M,1,()=>Object.entries(l()??{}),ke,(q,K,ne,pe)=>{var F=$e();const Q=y(()=>{const[le,j]=e(K);return{recipeId:le,requiredBuildings:j}});var W=ie(F);{var se=le=>{var j=Xt();const oe=y(()=>b.recipe[Number(e(Q).recipeId)]),fe=y(()=>p()[e(oe).Type]/e(oe).TimeSpend),Be=y(()=>e(oe).ResultCounts.reduce((_e,Ie)=>Ie+_e,0)),be=y(()=>e(Q).requiredBuildings*e(fe)*e(Be)*60);var k=d(j),X=d(k,!0);o(k);var Y=u(k,4),ue=d(Y,!0);o(Y);var xe=u(Y,2),Te=d(xe);o(xe);var ee=u(xe,2),te=d(ee);o(ee),o(j),A((_e,Ie)=>{var qe;J(X,_e),J(ue,((qe=e(oe))==null?void 0:qe.Name)??"recipe"+e(Q).recipeId),J(Te,`tier ${p()[e(oe).Type]??""}`),J(te,`${Ie??""}/s`)},[()=>Math.round(e(Q).requiredBuildings*100)/100,()=>Math.round(e(be)*100)/100]),f(le,j)};O(W,le=>{e(Q).recipeId&&le(se)})}f(q,F)});var ae=u(M,4);ye(ae,5,()=>Object.entries(m()),ke,(q,K)=>{var ne=Zt();const pe=y(()=>{const[W]=e(K);return{itemId:W}});var F=d(ne),Q=d(F,!0);o(F),o(ne),A(()=>J(Q,b.item[e(pe).itemId].Name)),f(q,ne)}),o(ae),o(g),A(q=>{J(V,q),J(P,` ${n().Name??""}`)},[()=>Math.round(s()*100)/100]),f(v,g),Ce(),a()}var Yt=x('<img class="h-6" alt="">');function ct(v,r){Oe(r,!0);const t=y(()=>r.filename.split("/")),a=y(()=>e(t)&&e(t)[e(t).length-1]),s=y(()=>e(a)&&it+`/dsp_sprites/${e(a)}.png`);var n=Yt();A(()=>Ue(n,"src",e(s))),f(v,n),Ce()}var er=(v,r)=>ce(r,!1),tr=(v,r)=>ce(r,!1),rr=x('<dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2 fixed "><!> <button class="bg-green-800 hover:bg-green-700 py-2 rounded-xl mt-auto">close</button></dialog> <button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl bg-black opacity-70 top-0 left-0 z-40" aria-label="close"></button>',1),ar=(v,r)=>{var t;return(t=r.deletecb)==null?void 0:t.call(r)},nr=x(`<style scoped="">input::-webkit-outer-spin-button,
          input::-webkit-inner-spin-button {
              /* display: none; <- Crashes Chrome on hover */
              -webkit-appearance: none;
              margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
          }

          input[type=number] {
              -moz-appearance: textfield;
          }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),sr=x('<div class="flex items-center"><span class="pl-2">ğŸ—‘ï¸</span>ï¸ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),ir=x("<option><!> </option>"),lr=x("<option> </option>"),or=x('<a class="bg-gray-800 hover:bg-slate-700">â¡ï¸</a>'),dr=x('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),cr=x('<a class="bg-gray-800 hover:bg-slate-700">â¡ï¸</a>'),ur=(v,r)=>ce(r,!0),vr=x('<button class="py-1 rounded-xl px-4 bg-slate-800 hover:bg-slate-700">ğŸ”</button>'),pr=x('<span class="flex-grow"> <!></span> <!>',1),fr=x('<div class="ml-auto"><!></div>'),mr=(v,r,t,a)=>{var s;return e(r)<0&&((s=b.producedVia[e(t)])==null?void 0:s.length)>0&&a.planner.planFor(e(t))},hr=x('<div class="flex items-center"><span class="pl-2">ğŸ“</span>ï¸ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),gr=x('<div class="flex items-center"><span class="px-3.5"></span>ï¸ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),_r=x("<div><!></div>"),br=x('<div class="flex gap-2 hover:bg-gray-700"><button><!></button> <!></div>'),xr=x('<div class="flex flex-col gap-0.5 "></div>'),Ir=x('<!> <div class="flex gap-1 max-w-2xl items-center hover:bg-gray-700  flex-wrap @container"><button><!></button> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function pt(v,r){Oe(r,!0);const[t,a]=He(),s=()=>T(q,"$targetAmount",t),n=()=>T(P,"$recipeId",t),i=()=>T(V,"$recipe",t),l=()=>T(C,"$itemId",t),p=()=>T(Q,"$options",t),m=()=>T(I,"$item",t),_=()=>T(z,"$requiredBuildings",t),c=()=>T(M,"$children",t),w=()=>T(F,"$inputsOutputs",t),N=()=>T(ne,"$providedItemsPerInterval",t),Z=()=>T(K,"$childrenProvideItemsPerInterval",t),h=()=>T(pe,"$requiredItemsPerInterval",t),g=()=>T(ae,"$childrenByItemId",t);let{item:I,itemId:C,recipe:V,recipeId:P,requiredBuildings:z,children:M,childrenByItemId:ae,targetAmount:q,childrenProvideItemsPerInterval:K,providedItemsPerInterval:ne,requiredItemsPerInterval:pe,inputsOutputs:F,options:Q,header:W}=r.planner,se=Ae(st(s())),le=Ae(st(n())),j=Ae(!1);ot(()=>{r.planner.amountEditable&&s()!==e(se)&&r.planner.setAmount(e(se))}),ot(()=>{e(le)!==n()&&r.planner.setRecipeId(e(le))});var oe=Ir(),fe=ie(oe);{var Be=$=>{var S=rr(),D=ie(S),R=d(D);Wt(R,{get planner(){return r.planner}});var de=u(R,2);de.__click=[er,j],o(D);var U=u(D,2);U.__click=[tr,j],f($,S)};O(fe,$=>{e(j)&&$(Be)})}var be=u(fe,2),k=d(be);k.__click=[ar,r];let X;var Y=d(k);{var ue=$=>{var S=nr(),D=u(ie(S),2),R=d(D);{var de=G=>{ct(G,{get filename(){return i().IconPath}})},U=G=>{const B=y(()=>{var E,re;return(re=(E=i())==null?void 0:E.Results)==null?void 0:re[0]});Ne(G,{get itemId(){return e(B)}})};O(R,G=>{var B;(B=i())!=null&&B.IconPath?G(de):G(U,!1)})}var me=u(R,2);ut(me),o(D),vt(me,()=>e(se),G=>ce(se,G)),f($,S)},xe=$=>{var S=sr(),D=u(d(S),2);{var R=G=>{ct(G,{get filename(){return i().IconPath}})},de=G=>{Ne(G,{get itemId(){return l()}})};O(D,G=>{var B;(B=i())!=null&&B.IconPath?G(R):G(de,!1)})}var U=u(D,2),me=d(U,!0);o(U),o(S),A(G=>{We(U,`padding-left: ${r.planner.depth*1.1}rem`),J(me,G)},[()=>Math.round(s()*100)/100]),f($,S)};O(Y,$=>{r.planner.amountEditable?$(ue):$(xe,!1)})}o(k);var Te=u(k,2),ee=d(Te),te=d(ee);{var _e=$=>{var S=dr(),D=ie(S),R=d(D);{var de=B=>{var E=ir();E.value=(E.__value=void 0)==null?"":void 0;var re=d(E);{var Je=we=>{var Se=Ye("orbital collector");f(we,Se)},Ze=we=>{var Se=Ye("mining");f(we,Se)};O(re,we=>{b.canBeExtracted[l()]?we(Je):we(Ze,!1)})}var je=u(re);o(E),A(()=>{dt(E,n()===void 0),J(je,` (${m().Name??""})`)}),f(B,E)};O(R,B=>{(b.canBeExtracted[l()]||b.canBeMined[l()])&&B(de)})}var U=u(R);ye(U,1,p,ke,(B,E)=>{var re=lr(),Je={},Ze=d(re,!0);o(re),A(()=>{Je!==(Je=b.recipe[e(E)].ID)&&(re.value=(re.__value=b.recipe[e(E)].ID)==null?"":b.recipe[e(E)].ID),dt(re,n()===b.recipe[e(E)].ID),J(Ze,b.recipe[e(E)].Name)}),f(B,re)}),o(D);var me=u(D,2);{var G=B=>{var E=or();A(re=>Ue(E,"href",re),[()=>nt.recipe(i().ID)+"?targetAmount="+Math.round(_())+"&depth=10"]),f(B,E)};O(me,B=>{!r.planner.amountEditable&&i()&&B(G)})}Ot(D,()=>e(le),B=>ce(le,B)),f($,S)},Ie=$=>{var S=pr(),D=ie(S),R=d(D),de=u(R);{var U=B=>{var E=cr();A(re=>Ue(E,"href",re),[()=>nt.recipe(i().ID)+"?targetAmount="+Math.round(_())+"&depth=10"]),f(B,E)};O(de,B=>{r.planner.amountEditable||B(U)})}o(D);var me=u(D,2);{var G=B=>{var E=vr();E.__click=[ur,j],f(B,E)};O(me,B=>{c().length>1&&!r.planner.amountEditable&&B(G)})}A(()=>{var B;return J(R,`${((B=i())==null?void 0:B.Name)??""} `)}),f($,S)};O(te,$=>{l()&&(p().length>1||p().length>=1&&b.canBeExtracted[l()]||b.canBeMined[l()])?$(_e):$(Ie,!1)})}o(ee),o(Te);var qe=u(Te,2);{var De=$=>{var S=fr(),D=d(S);Kt(D,{get planner(){return r.planner}}),o(S),f($,S)};O(qe,$=>{_()&&n()&&$(De)})}o(be);var Xe=u(be,2);{var Me=$=>{var S=xr();ye(S,5,w,ke,(D,R)=>{var de=$e();const U=y(()=>{var B,E,re;return(((B=N())==null?void 0:B[e(R)])??0)+(((E=Z())==null?void 0:E[e(R)])??0)-(((re=h())==null?void 0:re[e(R)])??0)}),me=y(()=>g()[e(R)]);var G=ie(de);Ge(G,()=>e(R),B=>{var E=$e(),re=ie(E);{var Je=je=>{pt(je,{get planner(){return e(me)},deletecb:()=>r.planner.deleteChild(e(R))})},Ze=je=>{var we=br(),Se=d(we);let lt;Se.__click=[mr,U,R,r];var ft=d(Se);{var mt=ve=>{var he=hr(),Ve=u(d(he),2);Ne(Ve,{get itemId(){return e(R)}});var Ee=u(Ve,2),ze=d(Ee,!0);o(Ee),o(he),A(Qe=>{We(Ee,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),J(ze,Qe)},[()=>Math.round(e(U)*100)/100]),f(ve,he)},ht=(ve,he)=>{{var Ve=Ee=>{var ze=gr(),Qe=u(d(ze),2);Ne(Qe,{get itemId(){return e(R)}});var rt=u(Qe,2),bt=d(rt,!0);o(rt),o(ze),A(xt=>{We(rt,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),J(bt,xt)},[()=>Math.round(e(U)*100)/100]),f(Ee,ze)};O(ve,Ee=>{e(R)!==l()&&e(U)!==0&&Ee(Ve)},he)}};O(ft,ve=>{var he;e(U)<0&&((he=b.producedVia[e(R)])==null?void 0:he.length)>0?ve(mt):ve(ht,!1)})}o(Se);var gt=u(Se,2);{var _t=ve=>{var he=_r();let Ve;var Ee=d(he);Ct(Ee,{get itemId(){return e(R)}}),o(he),A(ze=>Ve=Re(he,1,"flex gap-2 items-center ",null,Ve,ze),[()=>({"text-green-500":e(U)>0,"text-red-500":e(U)<0})]),f(ve,he)};O(gt,ve=>{e(R)!==l()&&e(U)!==0&&ve(_t)})}o(we),A(ve=>lt=Re(Se,1,"bg-slate-800  text-center rounded-r-lg",null,lt,ve),[()=>{var ve;return{"hover:bg-green-800":e(U)<0&&((ve=b.producedVia[e(R)])==null?void 0:ve.length)>0}}]),f(je,we)};O(re,je=>{e(me)?je(Je):je(Ze,!1)})}f(B,E)}),f(D,de)}),o(S),f($,S)};O(Xe,$=>{var S;((S=w())==null?void 0:S.size)>0&&$(Me)})}A($=>X=Re(k,1,"bg-slate-800  text-center rounded-r-lg  outline-slate-500",null,X,$),[()=>({"hover:bg-red-700":!r.planner.amountEditable,"outline-1":r.planner.amountEditable})]),f(v,oe),Ce(),a()}Ke(["click"]);var yr=x('<div class="flex flex-col items-stretch group w-full "><a class="my-2 z-30 hover:bg-slate-700 w-xs"> </a></div>'),kr=x('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur-3xl backdrop-opacity-75  z-40"><!> <label for="recipeName">ingredient or recipe name</label><input id="recipeName"></div> <!>',1);function Br(v,r){Oe(r,!0);let t=Ae(st([])),a=at(),s=at(),n=at(),i=Ae(""),l=y(()=>e(i)?b.items.filter(h=>h.Name.toLowerCase().includes(e(i).toLowerCase())).map(h=>h.ID):[]),p=y(()=>(()=>{const h=new Set;return e(l).forEach(g=>{for(const I of b.relatedRecipes[g]??[])h.add(I)}),h})()),m=y(()=>b.recipees.filter(h=>e(t).length>0?e(t).includes(h.Type):!0).filter(h=>e(i)?e(p).has(h.ID):!0).filter(h=>a.checked===null?!0:a.checked?b.buildableRecipees.has(h.ID):!b.buildableRecipees.has(h.ID)).filter(h=>s.checked===null?!0:s.checked?b.fluidRecipees.has(h.ID):!b.fluidRecipees.has(h.ID)).filter(h=>n.checked===null?!0:n.checked?b.entityRecipees.has(h.ID):!b.entityRecipees.has(h.ID)));new Set(b.recipees.map(h=>h.Type));var _=kr(),c=ie(_),w=d(c);O(w,h=>{});var N=u(w,3);ut(N),o(c);var Z=u(c,2);ye(Z,17,()=>e(m),ke,(h,g)=>{var I=yr(),C=d(I),V=d(C,!0);o(C),o(I),A(P=>{Ue(C,"href",P),J(V,e(g).Name)},[()=>nt.recipe(e(g).ID)]),f(h,I)}),vt(N,()=>e(i),h=>ce(i,h)),f(v,_),Ce()}Ke(["click"]);var wr=(v,r)=>ce(r,!e(r)),Pr=(v,r,t,a)=>r(e(t),e(a)),$r=x("<button><!> <span> </span></button>"),Rr=x('<div><h4 class="bg-blue-900 py-2 px-4 rounded-t"> </h4> <div class="flex bg-gray-600 "></div></div>'),Tr=x("<div></div> <!>",1),qr=x(`<button class="bg-blue-800 hover:bg-blue-700 hover:shadow-2xl  rounded-t py-5 px-4 flex">default tier for
	new factories <span class="ml-auto shadow-2xl"><!></span></button> <!>`,1);function Sr(v,r){Oe(r,!0);const[t,a]=He(),s=()=>T(n,"$defaultTierReadable",t);let n=ge.defaultTier;s();let i=Ae(!1);const l=(g,I)=>{const C={...s(),[g]:I};localStorage.setItem("defaultTiers",JSON.stringify(C)),ge.defaultTier.set(C)};var p=qr(),m=ie(p);m.__click=[wr,i];var _=u(d(m)),c=d(_);{var w=g=>{var I=Ye("ğŸ”¼");f(g,I)},N=g=>{var I=Ye("ğŸ”½");f(g,I)};O(c,g=>{e(i)?g(w):g(N,!1)})}o(_),o(m);var Z=u(m,2);{var h=g=>{var I=Tr(),C=u(ie(I),2);ye(C,1,()=>Object.keys(s()),ke,(V,P)=>{var z=$e(),M=ie(z);{var ae=q=>{var K=Rr(),ne=d(K),pe=d(ne,!0);o(ne);var F=u(ne,2);ye(F,21,()=>ge.availableTiers[e(P)],ke,(Q,W)=>{var se=$r();const le=y(()=>ge.factoryItems[e(P)][e(W)]),j=y(()=>e(W)===s()[e(P)]);let oe;se.__click=[Pr,l,P,W];var fe=d(se);Ne(fe,{get itemId(){return e(le)}});var Be=u(fe,2),be=d(Be,!0);o(Be),o(se),A(k=>{oe=Re(se,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2      rounded-lg",null,oe,k),J(be,e(W))},[()=>({"outline-amber-100":e(j),"outline-1":e(j),active:e(j),"bg-slate-500":e(j),"hover:bg-slate-400":e(j),"text-white":e(j),"hover:bg-slate-700":!e(j),"text-gray-300":!e(j),"bg-slate-800":!e(j)})]),f(Q,se)}),o(F),o(K),A(()=>J(pe,e(P))),f(q,K)};O(M,q=>{var K;((K=ge.availableTiers[e(P)])==null?void 0:K.length)>1&&q(ae)})}f(V,z)}),f(g,I)};O(Z,g=>{e(i)&&g(h)})}f(v,p),Ce(),a()}Ke(["click"]);var Er=(v,r)=>ce(r,"bulidings"),Nr=(v,r)=>ce(r,"throughput"),Ar=x('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 backdrop-brightness-75 z-40"> </span></div>'),Or=x('<div class="flex gap-1 relative"><span class="absolute w-full text-center top-0 backdrop-brightness-85"> </span> <!></div>'),Cr=x('<div class="odd:bg-gray-950 gap-3 px-2 flex "><div class="justify-self-center w-14 text-center relative p-0.5"><em class="absolute w-full h-full text-right left-0 top-0 backdrop-brightness-85 "> </em> <!></div> <span class="flex-grow"> </span> <!></div>'),Mr=x('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0 gap-0.5"><h4 class="px-4 py-2 bg-slate-800 rounded-t-lg flex items-center"><span class="flex-grow">required</span> <button>buildings</button> <button>conveyors</button></h4> <!></div>');function jr(v,r){Oe(r,!0);const[t,a]=He(),s=()=>T(p,"$itemId",t),n=()=>T(l,"$requiredBuildingsByRecipeId",t),i=()=>T(m,"$defaultTier",t);let{requiredBuildingsByRecipeId:l,itemId:p}=r.planner,{defaultTier:m}=ge;const _=V=>{switch(!0){case V<=6:return[[2001,1]];case V<=12:return[[2002,1]];case V<=30:return[[2003,1]];default:const P=Math.ceil(Math.ceil(V)/30),z=Math.ceil(P/4);return[[2014,P%4],[2003,z]]}};let c=Ae("bulidings");var w=Mr(),N=d(w),Z=u(d(N),2);let h;Z.__click=[Er,c];var g=u(Z,2);let I;g.__click=[Nr,c],o(N);var C=u(N,2);Ge(C,s,V=>{var P=$e(),z=ie(P);ye(z,1,()=>Object.entries(n()),ke,(M,ae)=>{var q=$e();const K=y(()=>{const[F,Q]=e(ae);return{recipeId:F,requiredBuildings:Q}});var ne=ie(q);{var pe=F=>{var Q=Cr();const W=y(()=>b.recipe[Number(e(K).recipeId)]),se=y(()=>i()[e(W).Type]/e(W).TimeSpend),le=y(()=>e(W).ResultCounts.reduce((ee,te)=>te+ee,0)),j=y(()=>e(K).requiredBuildings*e(se)*e(le)*60);var oe=d(Q),fe=d(oe),Be=d(fe);o(fe);var be=u(fe,2);const k=y(()=>{var ee,te;return(te=(ee=e(W))==null?void 0:ee.Results)==null?void 0:te[0]});Ne(be,{get itemId(){return e(k)}}),o(oe);var X=u(oe,2),Y=d(X,!0);o(X);var ue=u(X,2);{var xe=ee=>{var te=Ar();const _e=y(()=>String(Math.round(e(K).requiredBuildings*10)/10)),Ie=y(()=>e(_e).indexOf(".")),qe=y(()=>e(Ie)===-1?1:0);var De=d(te),Xe=d(De);Ge(Xe,i,S=>{Ne(S,{get itemId(){var D;return ge.factoryItems[(D=e(W))==null?void 0:D.Type][i()[e(W).Type]]}})}),o(De);var Me=u(De,2),$=d(Me,!0);o(Me),o(te),A(()=>{We(te,`padding-right: ${e(qe)+.5}em`),J($,e(_e))}),f(ee,te)},Te=(ee,te)=>{{var _e=Ie=>{var qe=$e(),De=ie(qe);ye(De,17,()=>_(e(j)),ke,(Xe,Me)=>{var $=$e(),S=ie($);{var D=R=>{var de=Or(),U=d(de),me=d(U,!0);o(U);var G=u(U,2);Ne(G,{get itemId(){return e(Me)[0]}}),o(de),A(()=>J(me,e(Me)[1])),f(R,de)};O(S,R=>{e(Me)[1]>0&&R(D)})}f(Xe,$)}),f(Ie,qe)};O(ee,Ie=>{e(c)==="throughput"&&Ie(_e)},te)}};O(ue,ee=>{e(c)==="bulidings"?ee(xe):ee(Te,!1)})}o(Q),A(ee=>{var te;J(Be,`${ee??""}/s`),J(Y,((te=e(W))==null?void 0:te.Name)??"recipe"+e(K).recipeId)},[()=>Math.round(e(j)*100)/100]),f(F,Q)};O(ne,F=>{e(K).recipeId&&F(pe)})}f(M,q)}),f(V,P)}),o(w),A((V,P)=>{h=Re(Z,1," px-4 py-2 rounded-l-lg  outline-gray-600",null,h,V),I=Re(g,1,"hover:bg-slate-500 px-4 py-2  rounded-r-lg  outline-gray-600",null,I,P)},[()=>({"bg-blue-700":e(c)==="bulidings","bg-gray-700":e(c)!=="bulidings","hover:bg-blue-500":e(c)==="bulidings","hover:bg-gray-500":e(c)!=="bulidings"}),()=>({"bg-blue-700":e(c)==="throughput","bg-gray-700":e(c)!=="throughput","hover:bg-blue-500":e(c)==="throughput","hover:bg-gray-500":e(c)!=="throughput"})]),f(v,w),Ce(),a()}Ke(["click"]);var Dr=x('<link rel="icon">'),Vr=(v,r)=>ce(r,!1),zr=(v,r)=>ce(r,!1),Fr=(v,r)=>r(),Lr=(v,r)=>ce(r,!1),Jr=x('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl bg-black opacity-70 top-0 left-0 z-40" aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2 fixed outline-1 rounded-2xl outline-slate-600"><h6 class="flex items-center justify-between"><span>Factory Globals</span><button class="bg-slate-800 hover:bg-slate-700 w-12 py-2">âœ–ï¸</button></h6> <!> <span class="flex-grow"></span> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to existing</button> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to future</button></dialog>',1),Ur=(v,r)=>e(r).setInterval(0),Gr=(v,r,t)=>e(r).setInterval(t),Kr=(v,r)=>e(r).setInterval(60),Hr=x("<button>Second</button>"),Xr=(v,r)=>ce(r,!0),Zr=x(`<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap"><div class="lg:max-w-sm lg:block hidden max-h-screen  ml-auto overflow-y-auto"><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto"><div class="flex  text-sm py-1"><span class="px-3 py-1 bg-slate-800 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <!></span></span> <span class="px-3 py-3 flex-grow text-right"></span> <button class="px-3 py-3 bg-slate-800 hover:bg-slate-700 rounded-l-lg">âš™ï¸
				Required Fabs to Process
				Items</button></div> <!></div> <!></div>`,1);function ca(v,r){Oe(r,!0);const[t,a]=He(),s=()=>T(m,"$defaultTier",t),n=()=>T(e(Z),"$header",t),i=()=>T(e(N),"$timeSpendChanged",t),l=()=>T(e(c),"$targetInterval",t),p=()=>T(e(w),"$timeSpend",t);let{defaultTier:m}=ge,_=y(()=>new tt(r.data.recipeId,void 0,void 0,void 0,void 0,r.data.depth,r.data.targetAmount)),c=y(()=>e(_).targetInterval),w=y(()=>e(_).timeSpend),N=y(()=>e(_).timeSpendChanged),Z=y(()=>e(_).header);const h=60*60;let g=Ae(!1);const I=k=>{k||(k=e(_));const X=Le(k.recipe);if(X){const Y=X.Type,ue=s()[Y];k.tier.set(ue)}Le(k.children).forEach(Y=>I(Y)),ce(g,!1)};var C=Zr();Nt(k=>{var X=Dr();A(()=>{var Y,ue;Et.title=(Y=n())==null?void 0:Y[1],Ue(X,"href",(ue=n())==null?void 0:ue[0])}),f(k,X)});var V=ie(C);{var P=k=>{var X=Jr(),Y=ie(X);Y.__click=[Vr,g];var ue=u(Y,2),xe=d(ue),Te=u(d(xe));Te.__click=[zr,g],o(xe);var ee=u(xe,2);Sr(ee,{});var te=u(ee,4);te.__click=[Fr,I];var _e=u(te,2);_e.__click=[Lr,g],o(ue),f(k,X)};O(V,k=>{e(g)&&k(P)})}var z=u(V,2),M=d(z),ae=d(M);Br(ae,{}),o(M);var q=u(M,2),K=d(q),ne=d(K),pe=u(d(ne)),F=d(pe);let Q;F.__click=[Ur,_];var W=d(F);o(F);var se=u(F,2);let le;se.__click=[Gr,_,h];var j=u(se,2);{var oe=k=>{var X=Hr();let Y;X.__click=[Kr,_],A(ue=>Y=Re(X,1,"px-1.5 py-2 multi hover:bg-slate-700",null,Y,ue),[()=>({active:l()===60})]),f(k,X)};O(j,k=>{p()!==60&&k(oe)})}o(pe),o(ne);var fe=u(ne,4);fe.__click=[Xr,g],o(K);var Be=u(K,2);Ge(Be,()=>e(_),k=>{pt(k,{get planner(){return e(_)}})}),o(q);var be=u(q,2);Ge(be,()=>e(_),k=>{jr(k,{get planner(){return e(_)}})}),o(z),A((k,X,Y)=>{Q=Re(F,1,"px-1.5 py-2 multi hover:bg-slate-700",null,Q,k),J(W,`Cycle (${X??""}s)`),le=Re(se,1,"px-1.5 py-2 multi hover:bg-slate-700",null,le,Y)},[()=>({"animate-flash":i(),active:l()===p()}),()=>Math.round(p()/60*100)/100,()=>({active:l()===h})]),f(v,C),Ce(),a()}Ke(["click"]);export{ca as component,da as universal};
