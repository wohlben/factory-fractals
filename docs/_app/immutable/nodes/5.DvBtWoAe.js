var St=Object.defineProperty;var Nt=(g,t,a)=>t in g?St(g,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):g[t]=a;var le=(g,t,a)=>Nt(g,typeof t!="symbol"?t+"":t,a);import{c as Re,t as I,a as v,b as Je}from"../chunks/B2N7zt_S.js";import{al as qt,aH as Et,$ as Ot,k as jt,q as $e,F as Mt,M as At,l as Ct,u as Dt,U as Vt,p as Ee,f as Y,t as z,g as e,e as w,a as Oe,b as Te,s as u,c as d,r as i,h as te,n as Fe,P as _t,aI as Ft}from"../chunks/DKycTyQU.js";import{d as De,s as J,e as zt,a as Jt}from"../chunks/bPv9y2md.js";import{i as A}from"../chunks/DgLyW3V9.js";import{s as Qe,r as at,a as ut,L as it}from"../chunks/BKv5Hnwn.js";import{t as Lt,s as ge,c as rt,b as Ht,o as st}from"../chunks/Xa_5A0IR.js";import{s as Ue,a as ee}from"../chunks/DihnOsDB.js";import{D as y,e as we,i as Be,I as Ut}from"../chunks/BZ_lMHHJ.js";import{w as je,g as ze,d as ie}from"../chunks/C3ysPMtx.js";import{a as nt,o as Gt}from"../chunks/BZGz-LoV.js";import{p as dt}from"../chunks/fW3SM2ok.js";import{s as ot}from"../chunks/DMSeiAlF.js";function He(g,t,a){$e&&Mt();var n=g,s=Vt,r,o=qt()?Et:Ot;jt(()=>{o(s,s=t())&&(r&&At(r),r=Ct(()=>a(n)))}),$e&&(n=Dt)}function et(g,t,a,n){var s=g.__style;if($e||s!==t){var r=Lt(t);(!$e||r!==g.getAttribute("style"))&&(r==null?g.removeAttribute("style"):g.style.cssText=r),g.__style=t}return n}const Kt=!1,Zt=({params:g,url:t})=>{const{id:a}=g,n=Number(a),s=t.searchParams.get("depth"),r=t.searchParams.get("targetAmount");return{recipeId:n,depth:s&&parseInt(s)||1,targetAmount:r&&parseInt(r)||1}},Yr=Object.freeze(Object.defineProperty({__proto__:null,load:Zt,prerender:Kt},Symbol.toStringTag,{value:"Module"})),Qt=()=>{const g=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(g){const t=JSON.parse(g);return Object.keys(t).forEach(a=>{ft[a].find(n=>n===t[a])||(t[a]=bt[a],console.log(a,t[a]))}),je(t)}},Wt=()=>{const g=localStorage==null?void 0:localStorage.getItem("defaultInterval");if(g){const t=JSON.parse(g),a=t==null?void 0:t.interval;if(Object.values(Yt).includes(a))return je(a)}return je(null)},Xt=()=>{const g=localStorage==null?void 0:localStorage.getItem("defaultRecipes"),t={};if(g){const a=JSON.parse(g);Object.entries(a).forEach(([n,s])=>{const r=Number(n),o=s&&Number(s);(o===null&&(y.canBeExtracted[r]||y.canBeMined[r])||o&&y.relatedRecipes[r].has(o))&&(t[r]=o)})}return je(t)},ft={Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1,3],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[0,.125,.2,.25]},bt={Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:0},Yt={cycle:null,minute:60*60,second:60},_e={defaultTier:Qt()??je(bt),availableTiers:ft,defaultInterval:Wt(),defaultRecipes:Xt(),factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,3:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{0:null,.125:1141,.2:1142,.25:1143}}};class $t{constructor(t,a,n,s,r,o,l){this.recipeId=t,this.itemId=a,this.targetAmount=n,this.targetInterval=s,this.tier=r,this.proliferator=o,this.timeSpend=l}}const Ze=(g,t)=>{const a={...g};return Object.entries(t).forEach(([n,s])=>{const r=Number(n);a[r]=(a[r]??0)+s}),a};class tt extends $t{constructor(a,n,s,r,o=0,l=1,c){var N;const _=!!(n&&(y.canBeExtracted[n]||y.canBeMined[n]));if(!a&&n){const T=ze(_e.defaultRecipes)[n];T&&(a=T)}!a&&!_&&(a=(N=y.alternativeRecipe[n])==null?void 0:N[0]);const x=je(a),p=a?y.recipe[a]:void 0;let m=p==null?void 0:p.Results.findIndex(T=>n===T);const b=!n;!n&&(m??-1)>=0&&(n=p==null?void 0:p.Results[m??0]);const S=je(n),B=je((p==null?void 0:p.ResultCounts[m??0])??c??1),q=s?ie([S,s],([T,O])=>O[T]):B,D=je(p!=null&&p.Type?ze(_e.defaultTier)[p.Type]:1),f=je(ze(_e.defaultTier).Proliferator),P=je(ze(_e.defaultInterval)??null),k=ie([x,D],([T,O])=>{var V;return((V=y.recipe[T])==null?void 0:V.TimeSpend)/O});r||(r=P);super(x,S,q,r,D,f,k);le(this,"amountEditable");le(this,"manualAmount",je());le(this,"manualInterval");le(this,"children",je([]));le(this,"canBeMined",ie(this.itemId,a=>y.canBeMined[a]));le(this,"canBeExtracted",ie(this.itemId,a=>y.canBeExtracted[a]));le(this,"item",ie(this.itemId,a=>y.item[a]));le(this,"recipe",ie(this.recipeId,a=>y.recipe[a]));le(this,"header",ie([this.itemId,this.recipe],([a,n])=>{var c;const s=a??((c=n==null?void 0:n.Results)==null?void 0:c[0]);if(!s)return;const r=y.item[s],o=r.IconPath.split("/"),l=o[o.length-1];return l&&[nt+`/dsp_sprites/${l}.png`,r.Name]}));le(this,"options",ie(this.itemId,a=>y.alternativeRecipe[a]));le(this,"timeSpendChanged",ie(this.timeSpend,(a,n)=>{n(!!a);const s=setTimeout(()=>n(!a),1400);return()=>clearTimeout(s)}));le(this,"relativeSpeed",ie([this.targetInterval,this.timeSpend],([a,n])=>a?a/n:1));le(this,"requiredBuildings",ie([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([a,n,s,r,o])=>{const l=n==null?void 0:n.Results.findIndex(_=>s===_),c=a/(n==null?void 0:n.ResultCounts[l])/r;return isNaN(c)?a:c}));le(this,"providedItemsPerInterval",ie([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([a,n,s,r,o])=>{if(!a&&r&&(y.canBeMined[r]||y.canBeExtracted[r]))return{[r]:o};const l={};return a==null||a.Results.forEach((c,_)=>{l[c]=a.ResultCounts[_]*n*s}),l}));le(this,"childrenProvideItemsPerInterval",ie(this.children,(a,n)=>{const s=new Array(a.length),r=a.map((l,c)=>l.providedItemsPerInterval.subscribe(_=>{s[c]=_;const x=s.filter(p=>!!p).reduce((p,m)=>Ze(p,m),{});n(x)})),o=s.filter(l=>!!l).reduce((l,c)=>Ze(l,c),{});return n(o),()=>r.forEach(l=>l())}));le(this,"requiredBuildingsByRecipeId",ie([this.children,this.recipeId,this.requiredBuildings],([a,n,s],r)=>{const o=new Array(a.length),l=a.map((_,x)=>_.requiredBuildingsByRecipeId.subscribe(p=>{o[x]=p;const m=o.filter(b=>!!b).reduce((b,S)=>Ze(b,S),{});if(n){const b=n;m[b]=(m[b]??0)+s}r(m)})),c=o.filter(_=>!!_).reduce((_,x)=>Ze(_,x),{});if(n){const _=n;c[_]=(c[_]??0)+s}return r(c),()=>l.forEach(_=>_())}));le(this,"fabsByType",ie(this.requiredBuildingsByRecipeId,a=>Object.entries(a).reduce((n,[s,r])=>{const o=Number(s),l=y.recipe[o].Type;return n[l]=(n[l]??0)+Math.ceil(r),n},{})));le(this,"childrenByItemId",ie(this.children,(a,n)=>{const s=new Array(a.length),r=a.map((l,c)=>l.itemId.subscribe(_=>{s[c]=[_,l];const x=s.filter(p=>!!p).reduce((p,[m,b])=>(p[m]=b,p),{});n(x)})),o=s.filter(l=>!!l).reduce((l,[c,_])=>(l[c]=_,l),{});return n(o),()=>r.forEach(l=>l())}));le(this,"requiredItemsPerInterval",ie([this.recipe,this.relativeSpeed,this.requiredBuildings],([a,n,s])=>{const r={};return a==null||a.Items.forEach((o,l)=>r[o]=a.ItemCounts[l]*n*s),r}));le(this,"deficitRequiredItemsPerInterval",ie([this.recipe,this.relativeSpeed,this.requiredBuildings],([a,n,s])=>{const r={};return a==null||a.Items.forEach((o,l)=>r[o]=-(a.ItemCounts[l]*n*s)),r}));le(this,"inputsOutputs",ie([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([a,n,s])=>{const r=new Set;return Object.keys(n).forEach(o=>{r.add(Number(o))}),Object.keys(a??{}).forEach(o=>{r.add(Number(o))}),Object.keys(s).forEach(o=>{r.add(Number(o))}),r}));le(this,"surplus",ie([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([a,n,s,r])=>{const o=Ze(a,s);return Object.entries(n).forEach(([l,c])=>o[Number(l)]=(o[Number(l)]??0)-c),Object.entries(o).filter(([,l])=>l<=0).forEach(([l])=>delete o[Number(l)]),o}));le(this,"deficit",ie([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([a,n])=>{const s={...a};return Object.entries(n).forEach(([r,o])=>s[Number(r)]=(s[Number(r)]??0)-o),Object.entries(s).filter(([,r])=>r>=0).forEach(([r])=>delete s[Number(r)]),s}));le(this,"deficitByItemId",ie([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([a,n,s,r,o],l)=>{const c=new Array(a.length),_=a.map((p,m)=>p.deficitByItemId.subscribe(b=>{c[m]=b;const S=c.filter(B=>!!B).reduce((B,q)=>Ze(B,q),s?n:{[r]:-o});l(S)})),x=c.filter(p=>!!p).reduce((p,m)=>Ze(p,m),s?n:{[r]:-o});return l(x),()=>_.forEach(p=>p())}));le(this,"totals",ie([this.itemId,this.requiredBuildings,this.children],([a,n,s])=>{const r={};return r[a]=n,s.map(o=>o.totals).forEach(o=>{Object.entries(o).forEach(([l,c])=>{const _=Number(l);r[_]=(r[_]??0)+c})}),r}));this.depth=o,this.amountEditable=b,this.manualAmount=B,this.manualInterval=P,l>o&&this.children.set(this.dbd(l))}setAmount(a){this.manualAmount.set(a)}setRecipeId(a){this.recipeId.set(a),this.expand()}deleteChild(a){this.children.update(n=>{const s=n.findIndex(r=>ze(r.itemId)===a);return n.splice(s,1),n})}setInterval(a){this.manualInterval.set(a)}expand(){this.children.set(this.dbd())}planFor(a){const n=ie([this.timeSpend,this.targetInterval],([s,r])=>r===null?s:r);this.children.update(s=>(s.push(new tt(void 0,a,this.requiredItemsPerInterval,n,this.depth+1)),s))}dbd(a){const n=ie([this.timeSpend,this.targetInterval],([o,l])=>l===null?o:l),s=[],r=ze(this.recipe);return r==null||r.Items.forEach((o,l)=>{var x;if(!((x=y.alternativeRecipe[o])!=null&&x.length))return;const c=new tt(void 0,o,this.requiredItemsPerInterval,n,this.depth+1,a);s.push(c);const _=ze(c.providedItemsPerInterval);Object.entries(_).forEach(([p,m])=>{})}),s}}var ea=I('<img alt="">');function ke(g,t){Ee(t,!0);let a=w(()=>y.item[t.itemId]);const n=w(()=>{var c;return(c=e(a))==null?void 0:c.IconPath.split("/")}),s=w(()=>e(n)&&e(n)[e(n).length-1]),r=w(()=>e(s)&&nt+`/dsp_sprites/${e(s)}.png`);var o=Re(),l=Y(o);He(l,()=>t.itemId,c=>{var _=ea();let x;z(p=>{Qe(_,"src",e(r)),x=ge(_,1,"",null,x,p)},[()=>({"h-6":t.small!==!1})]),v(c,_)}),v(g,o),Oe()}var ta=(g,t,a)=>t(e(a)),aa=I("<button> <!></button>"),ra=I('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),na=(g,t)=>te(t,!0),la=I('<button class="text-center min-w-16 h-10 rounded-l-lg dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-600 hover:bg-slate-400 py-2 px-3 flex justify-around items-end gap-2 relative  "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function sa(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(l,"$recipe",a),r=()=>ee(c,"$tier",a),o=()=>ee(_,"$requiredBuildings",a);let{recipe:l,tier:c,requiredBuildings:_}=t.planner,x=Te(!1);const p=q=>{t.planner.tier.set(q),te(x,!1)};var m=Re(),b=Y(m);{var S=q=>{var D=ra(),f=u(d(D),2);we(f,1,()=>_e.availableTiers[s().Type],Be,(P,k)=>{var N=aa();let T;N.__click=[ta,p,k];var O=d(N),V=u(O);ke(V,{get itemId(){var Q;return _e.factoryItems[(Q=s())==null?void 0:Q.Type][e(k)]}}),i(N),z(Q=>{T=ge(N,1,"px-2 py-1 outline-slate-600 dark:hover:bg-slate-600 hover:bg-slate-400 text-sm  rounded",null,T,Q),J(O,`${e(k)??""} `)},[()=>({"outline-1":e(k)===r(),active:e(k)===r()})]),v(P,N)}),i(D),v(q,D)},B=q=>{var D=la();D.__click=[na,x];var f=d(D),P=d(f);ke(P,{get itemId(){var V;return _e.factoryItems[(V=s())==null?void 0:V.Type][r()]}}),i(f);var k=u(f,2),N=d(k);i(k);var T=u(k,2),O=d(T,!0);i(T),i(D),z(V=>{J(N,`tier ${r()??""}`),J(O,V)},[()=>Math.round(o()*100)/100]),v(q,D)};A(b,q=>{e(x)?q(S):q(B,!1)})}v(g,m),Oe(),n()}De(["click"]);var ia=I('<div class="flex gap-1 relative justify-center"><!> <span class="absolute  mx-auto text-center top-0 px-1    rounded-3xl bg-white/70 dark:bg-black/30  "> </span></div>');function mt(g,t){const a=o=>{switch(!0){case o<=6:return[[2001,1]];case o<=12:return[[2002,1]];case o<=30:return[[2003,1]];default:const l=Math.ceil(Math.ceil(o)/30),c=Math.ceil(l/4);return[[2014,c>1?4:l],[2003,c]]}};let n=w(()=>a(t.outputs));var s=Re(),r=Y(s);we(r,17,()=>e(n),Be,(o,l)=>{var c=Re(),_=Y(c);{var x=p=>{var m=ia(),b=d(m);ke(b,{get itemId(){return e(l)[0]}});var S=u(b,2),B=d(S,!0);i(S),i(m),z(()=>J(B,e(l)[1])),v(p,m)};A(_,p=>{e(l)[1]>0&&p(x)})}v(o,c)}),v(g,s)}var oa=(g,t)=>te(t,!e(t)),da=I('<button class="flex  dark:odd:bg-gray-950 odd:bg-gray-100 gap-2 px-2 items-center dark:hover:bg-gray-700 hover:bg-gray-300 w-full group "><span><!></span> <span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs "> </span> <em class="text-right flex-grow"> </em> <span class="flex w-18 justify-end gap-1"><!></span></button>');function ca(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(r,"$defaultTier",a);let{defaultTier:r}=_e,o=Te(!0),l=w(()=>y.recipe[Number(t.recipeId)]),c=w(()=>s()[e(l).Type]/e(l).TimeSpend),_=w(()=>e(l).ResultCounts.reduce((L,R)=>R+L,0)),x=w(()=>t.requiredBuildings*e(c)*e(_)*60/(e(o)?t.devisor:1)),p=w(()=>Math.round(e(x)*100)/100);var m=da();m.__click=[oa,o];var b=d(m);let S;var B=d(b);{var q=L=>{var R=Je("🔓");v(L,R)},D=L=>{var R=Je("🔒");v(L,R)};A(B,L=>{e(o)?L(q):L(D,!1)})}i(b);var f=u(b,2),P=d(f,!0);i(f);var k=u(f,4),N=d(k,!0);i(k);var T=u(k,2),O=d(T);i(T);var V=u(T,2),Q=d(V);i(V);var ne=u(V,2),be=d(ne);mt(be,{get outputs(){return e(x)}}),i(ne),i(m),z((L,R)=>{var H;S=ge(b,1,"w-4 group-hover:opacity-100",null,S,L),J(P,R),J(N,((H=e(l))==null?void 0:H.Name)??"recipe"+t.recipeId),J(O,`tier ${s()[e(l).Type]??""}`),J(Q,`${e(p)??""}/s`)},[()=>({"opacity-0":e(o)}),()=>Math.round(t.requiredBuildings/(e(o)?t.devisor:1)*100)/100]),v(g,m),Oe(),n()}De(["click"]);var ua=I('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300"><span> </span> <span class="text-right flex-grow"> </span></div>'),va=I('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300 px-1"><span> </span></div>'),ga=I('<div><h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function pa(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(c,"$fabsByType",a),r=()=>ee(l,"$requiredBuildingsByRecipeId",a),o=()=>ee(p,"$deficitByItemId",a);let{requiredBuildingsByRecipeId:l,fabsByType:c,recipe:_,requiredBuildings:x,deficitByItemId:p}=t.planner;var m=ga(),b=u(d(m),2);we(b,5,()=>Object.entries(s()),Be,(q,D)=>{var f=ua();const P=w(()=>{const[V,Q]=e(D);return{fabType:V,requiredFabs:Q}});var k=d(f),N=d(k,!0);i(k);var T=u(k,2),O=d(T,!0);i(T),i(f),z(V=>{J(N,e(P).fabType),J(O,V)},[()=>Math.ceil(e(P).requiredFabs/t.devisor)]),v(q,f)}),i(b);var S=u(b,4);we(S,1,()=>Object.entries(r()??{}),Be,(q,D,f,P)=>{const k=w(()=>{const[N,T]=e(D);return{recipeId:N,requiredBuildings:T}});ca(q,{get recipeId(){return e(k).recipeId},get requiredBuildings(){return e(k).requiredBuildings},get devisor(){return t.devisor}})});var B=u(S,4);we(B,5,()=>Object.entries(o()),Be,(q,D)=>{var f=va();const P=w(()=>{const[T]=e(D);return{itemId:T}});var k=d(f),N=d(k,!0);i(k),i(f),z(()=>J(N,y.item[e(P).itemId].Name)),v(q,f)}),i(B),i(m),v(g,m),Oe(),n()}var _a=(g,t)=>{var a;return(a=t.close)==null?void 0:a.call(t)},fa=(g,t)=>{var a;return(a=t.close)==null?void 0:a.call(t)},ba=I('<button class="dark:bg-slate-800 dark:hover:bg-slate-700 bg-slate-200 hover:bg-slate-300 w-12 py-2 absolute right-0 top-0 h-full">✖️</button>'),ma=I('<h6 class="flex items-center justify-between sticky top-0  bg-gray-50/70 dark:bg-gray-950/70"><!> <!></h6>'),ha=I('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl dark:bg-black opacity-70 top-0 left-0 z-20 cursor-default " aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-50 dark:bg-gray-950  dark:text-amber-50 fixed outline-1 rounded-2xl outline-slate-600 overflow-y-scroll z-70 flex flex-col  gap-2 scroll-mt-20"><!> <!></dialog>',1);function Ye(g,t){Ee(t,!0),Gt(()=>{var c;return(c=t.close)==null?void 0:c.call(t)});var a=ha(),n=Y(a);n.__click=[_a,t];var s=u(n,2),r=d(s);{var o=c=>{var _=ma(),x=d(_);ot(x,()=>t.header??Fe);var p=u(x,2);{var m=b=>{var S=ba();S.__click=[fa,t],v(b,S)};A(p,b=>{t.close&&b(m)})}i(_),v(c,_)};A(r,c=>{(t.header||t.close)&&c(o)})}var l=u(r,2);ot(l,()=>t.children),i(s),zt("scroll",n,c=>{c.stopImmediatePropagation()}),v(g,a),Oe()}De(["click"]);var xa=I('<img class="h-6" alt="">');function vt(g,t){Ee(t,!0);const a=w(()=>t.filename.split("/")),n=w(()=>e(a)&&e(a)[e(a).length-1]),s=w(()=>e(n)&&nt+`/dsp_sprites/${e(n)}.png`);var r=xa();z(()=>Qe(r,"src",e(s))),v(g,r),Oe()}var Ia=(g,t)=>{var a;return(a=t.deletecb)==null?void 0:a.call(t)},ya=I(`<style scoped="">input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* display: none; <- Crashes Chrome on hover */
            -webkit-appearance: none;
            margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
        }

        input[type=number] {
            -moz-appearance: textfield;
        }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),ka=I('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),wa=I("<button><!></button>");function Ba(g,t){Ee(t,!0);let a=Te(dt(t.targetAmount));_t(()=>{t.planner.amountEditable&&t.targetAmount!==e(a)&&t.planner.setAmount(e(a))});var n=wa();n.__click=[Ia,t];let s;var r=d(n);{var o=c=>{var _=ya(),x=u(Y(_),2),p=d(x);{var m=B=>{vt(B,{get filename(){return t.recipe.IconPath}})},b=B=>{const q=w(()=>{var D,f;return(f=(D=t.recipe)==null?void 0:D.Results)==null?void 0:f[0]});ke(B,{get itemId(){return e(q)}})};A(p,B=>{var q;(q=t.recipe)!=null&&q.IconPath?B(m):B(b,!1)})}var S=u(p,2);at(S),i(x),rt(S,()=>e(a),B=>te(a,B)),v(c,_)},l=c=>{var _=ka(),x=u(d(_),2);{var p=B=>{vt(B,{get filename(){return t.recipe.IconPath}})},m=B=>{ke(B,{get itemId(){return t.itemId}})};A(x,B=>{var q;(q=t.recipe)!=null&&q.IconPath?B(p):B(m,!1)})}var b=u(x,2),S=d(b,!0);i(b),i(_),z(B=>{et(b,`padding-left: ${t.planner.depth*1.1}rem`),J(S,B)},[()=>Math.round(t.targetAmount*100)/100]),v(c,_)};A(r,c=>{t.planner.amountEditable?c(o):c(l,!1)})}i(n),z(c=>{n.disabled=!t.deletecb||!t.planner,s=ge(n,1,"dark:bg-slate-800 bg-slate-200  text-center rounded-r-lg  outline-slate-500",null,s,c)},[()=>({"dark:hover:bg-red-700":!t.planner.amountEditable,"hover:bg-red-300":!t.planner.amountEditable,"outline-1":t.planner.amountEditable})]),v(g,n),Oe()}De(["click"]);var Ra=I('<h3 class="dark:bg-blue-800 bg-blue-300 py-2 px-4  text-center w-full"><input class="w-24" type="number"> <span class="text-xs dark:text-slate-400 text-slate-700">x</span> <span class="w-14 text-right"> </span> <span> </span></h3>'),Pa=(g,t)=>te(t,!1),Ta=I('<!> <button class="dark:bg-green-800 bg-green-200 dark:hover:bg-green-700 hover:bg-green-300 py-2 rounded-xl mt-auto">close</button>',1),Sa=I("<option><!> </option>"),Na=I("<option> </option>"),qa=I('<a class="dark:bg-gray-800 bg-gray-200 dark:hover:bg-slate-700 hover:bg-slate-300">➡️</a>'),Ea=I('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),Oa=I('<a class="dark:bg-gray-800 dark:hover:bg-slate-700 bg-gray-200 hover:bg-slate-300">➡️</a>'),ja=(g,t)=>te(t,!0),Ma=I('<button class="py-1 rounded-xl px-4 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300">🔎</button>'),Aa=I('<span class="flex-grow"> <!></span> <!>',1),Ca=I('<div class="ml-auto"><!></div>'),Da=(g,t,a,n)=>{var s;return e(t)<0&&((s=y.producedVia[e(a)])==null?void 0:s.length)>0&&n.planner.planFor(e(a))},Va=I('<div class="flex items-center"><span class="pl-2">📝</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Fa=I('<div class="flex items-center"><span class="px-3.5"></span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),za=I("<div><!></div>"),Ja=I('<div class="flex gap-2 dark:hover:bg-gray-700 hover:bg-gray-300"><button><!></button> <!></div>'),La=I('<div class="flex flex-col gap-0.5 "></div>'),Ha=I('<!> <div class="flex gap-1 max-w-2xl items-center dark:hover:bg-gray-700 hover:bg-gray-300  flex-wrap @container"><!> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function ht(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(k,"$recipeId",a),r=()=>ee(N,"$requiredBuildings",a),o=()=>ee(P,"$recipe",a),l=()=>ee(f,"$itemId",a),c=()=>ee(V,"$targetAmount",a),_=()=>ee(R,"$options",a),x=()=>ee(D,"$item",a),p=()=>ee(T,"$children",a),m=()=>ee(L,"$inputsOutputs",a),b=()=>ee(ne,"$providedItemsPerInterval",a),S=()=>ee(Q,"$childrenProvideItemsPerInterval",a),B=()=>ee(be,"$requiredItemsPerInterval",a),q=()=>ee(O,"$childrenByItemId",a);let{item:D,itemId:f,recipe:P,recipeId:k,requiredBuildings:N,children:T,childrenByItemId:O,targetAmount:V,childrenProvideItemsPerInterval:Q,providedItemsPerInterval:ne,requiredItemsPerInterval:be,inputsOutputs:L,options:R,header:H}=t.planner,oe=Te(dt(s())),me=Te(!1);_t(()=>{e(oe)!==s()&&t.planner.setRecipeId(e(oe))});let ue=Te(1),he=w(()=>!e(ue)||isNaN(e(ue))?1:e(ue)),ae=w(()=>Math.ceil(r()/e(he)));var Se=Ha(),Z=Y(Se);{var F=re=>{Ye(re,{close:()=>te(me,!1),header:pe=>{var C=Ra(),de=d(C);at(de);var X=u(de,4),Ie=d(X,!0);i(X);var ye=u(X,2),M=d(ye);i(ye),i(C),z(()=>{J(Ie,e(ae)),J(M,`${o().Name??""}s`)}),rt(de,()=>e(ue),K=>te(ue,K)),v(pe,C)},children:(pe,C)=>{var de=Ta(),X=Y(de);pa(X,{get planner(){return t.planner},get devisor(){return e(he)}});var Ie=u(X,2);Ie.__click=[Pa,me],v(pe,de)},$$slots:{default:!0}})};A(Z,re=>{e(me)&&re(F)})}var h=u(Z,2),U=d(h);Ba(U,{get planner(){return t.planner},get recipe(){return o()},get itemId(){return l()},get targetAmount(){return c()},get deletecb(){return t.deletecb}});var E=u(U,2),j=d(E),G=d(j);{var $=re=>{var se=Ea(),pe=Y(se),C=d(pe);{var de=M=>{var K=Sa();K.value=(K.__value=void 0)==null?"":void 0;var ce=d(K);{var Me=Ae=>{var Ce=Je("orbital collector");v(Ae,Ce)},We=Ae=>{var Ce=Je("mining");v(Ae,Ce)};A(ce,Ae=>{y.canBeExtracted[l()]?Ae(Me):Ae(We,!1)})}var Le=u(ce);i(K),z(()=>{ut(K,s()===void 0),J(Le,` (${x().Name??""})`)}),v(M,K)};A(C,M=>{(y.canBeExtracted[l()]||y.canBeMined[l()])&&M(de)})}var X=u(C);we(X,1,_,Be,(M,K)=>{var ce=Na(),Me={},We=d(ce,!0);i(ce),z(()=>{Me!==(Me=y.recipe[e(K)].ID)&&(ce.value=(ce.__value=y.recipe[e(K)].ID)==null?"":y.recipe[e(K)].ID),ut(ce,s()===y.recipe[e(K)].ID),J(We,y.recipe[e(K)].Name)}),v(M,ce)}),i(pe);var Ie=u(pe,2);{var ye=M=>{var K=qa();z(ce=>Qe(K,"href",ce),[()=>it.recipe(o().ID)+"?targetAmount="+Math.round(r())+"&depth=10"]),v(M,K)};A(Ie,M=>{!t.planner.amountEditable&&o()&&M(ye)})}Ht(pe,()=>e(oe),M=>te(oe,M)),v(re,se)},ve=re=>{var se=Aa(),pe=Y(se),C=d(pe),de=u(C);{var X=M=>{var K=Oa();z(ce=>Qe(K,"href",ce),[()=>it.recipe(o().ID)+"?targetAmount="+Math.round(r())+"&depth=10"]),v(M,K)};A(de,M=>{t.planner.amountEditable||M(X)})}i(pe);var Ie=u(pe,2);{var ye=M=>{var K=Ma();K.__click=[ja,me],v(M,K)};A(Ie,M=>{p().length>1&&!t.planner.amountEditable&&M(ye)})}z(()=>{var M;return J(C,`${((M=o())==null?void 0:M.Name)??""} `)}),v(re,se)};A(G,re=>{l()&&(_().length>1||_().length>=1&&y.canBeExtracted[l()]||y.canBeMined[l()])?re($):re(ve,!1)})}i(j),i(E);var W=u(E,2);{var Pe=re=>{var se=Ca(),pe=d(se);sa(pe,{get planner(){return t.planner}}),i(se),v(re,se)};A(W,re=>{r()&&s()&&re(Pe)})}i(h);var xe=u(h,2);{var qe=re=>{var se=La();we(se,5,m,Be,(pe,C)=>{var de=Re();const X=w(()=>{var M,K,ce;return(((M=b())==null?void 0:M[e(C)])??0)+(((K=S())==null?void 0:K[e(C)])??0)-(((ce=B())==null?void 0:ce[e(C)])??0)}),Ie=w(()=>q()[e(C)]);var ye=Y(de);He(ye,()=>e(C),M=>{var K=Re(),ce=Y(K);{var Me=Le=>{ht(Le,{get planner(){return e(Ie)},deletecb:()=>t.planner.deleteChild(e(C))})},We=Le=>{var Ae=Ja(),Ce=d(Ae);let ct;Ce.__click=[Da,X,C,t];var yt=d(Ce);{var kt=Ne=>{var fe=Va(),Ge=u(d(fe),2);ke(Ge,{get itemId(){return e(C)}});var Ve=u(Ge,2),Ke=d(Ve,!0);i(Ve),i(fe),z(Xe=>{et(Ve,`padding-left: ${(t.planner.depth+.5)*1.1}rem`),J(Ke,Xe)},[()=>Math.round(e(X)*100)/100]),v(Ne,fe)},wt=(Ne,fe)=>{{var Ge=Ve=>{var Ke=Fa(),Xe=u(d(Ke),2);ke(Xe,{get itemId(){return e(C)}});var lt=u(Xe,2),Pt=d(lt,!0);i(lt),i(Ke),z(Tt=>{et(lt,`padding-left: ${(t.planner.depth+.5)*1.1}rem`),J(Pt,Tt)},[()=>Math.round(e(X)*100)/100]),v(Ve,Ke)};A(Ne,Ve=>{e(C)!==l()&&e(X)!==0&&Ve(Ge)},fe)}};A(yt,Ne=>{var fe;e(X)<0&&((fe=y.producedVia[e(C)])==null?void 0:fe.length)>0?Ne(kt):Ne(wt,!1)})}i(Ce);var Bt=u(Ce,2);{var Rt=Ne=>{var fe=za();let Ge;var Ve=d(fe);Ut(Ve,{get itemId(){return e(C)}}),i(fe),z(Ke=>Ge=ge(fe,1,"flex gap-2 items-center ",null,Ge,Ke),[()=>({"text-green-500":e(X)>0,"text-red-500":e(X)<0})]),v(Ne,fe)};A(Bt,Ne=>{e(C)!==l()&&e(X)!==0&&Ne(Rt)})}i(Ae),z(Ne=>{var fe;ct=ge(Ce,1,"dark:bg-slate-800 bg-slate-200   text-center rounded-r-lg",null,ct,Ne),Ce.disabled=e(X)>0||!((fe=y.producedVia[e(C)])!=null&&fe.length)},[()=>{var Ne,fe;return{"dark:hover:bg-green-800":e(X)<0&&((Ne=y.producedVia[e(C)])==null?void 0:Ne.length)>0,"hover:bg-green-200":e(X)<0&&((fe=y.producedVia[e(C)])==null?void 0:fe.length)>0}}]),v(Le,Ae)};A(ce,Le=>{e(Ie)?Le(Me):Le(We,!1)})}v(M,K)}),v(pe,de)}),i(se),v(re,se)};A(xe,re=>{var se;((se=m())==null?void 0:se.size)>0&&re(qe)})}v(g,Se),Oe(),n()}De(["click"]);var Ua=I('<img class="h-6" alt="">');function xt(g,t){Ee(t,!0);let a=w(()=>y.recipe[t.recipeId]);const n=w(()=>{var c;return(c=e(a))==null?void 0:c.IconPath.split("/")}),s=w(()=>e(n)&&e(n)[e(n).length-1]),r=w(()=>e(s)&&nt+`/dsp_sprites/${e(s)}.png`);var o=Re(),l=Y(o);He(l,()=>t.recipeId,c=>{var _=Re(),x=Y(_);{var p=b=>{var S=Ua();z(()=>Qe(S,"src",e(r))),v(b,S)},m=b=>{const S=w(()=>{var B,q;return(q=(B=e(a))==null?void 0:B.Results)==null?void 0:q[0]});ke(b,{get itemId(){return e(S)}})};A(x,b=>{e(s)?b(p):b(m,!1)})}v(c,_)}),v(g,o),Oe()}var Ga=I('<label for="recipeName" class="py-2 text-center">ingredient or recipe name</label> <input id="recipeName">',1),Ka=I('<div class="flex flex-col items-stretch group w-full "><a class="  dark:hover:bg-slate-700 hover:bg-slate-300  md:px-4 md:py-2 w-full flex gap-2"><span class="w-8"><!></span><span class="flex-grow"> </span></a></div>'),Za=I('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur bg-gray-50/70  dark:bg-gray-950/70 lg:dark:bg-transparent lg:bg-transparent "><!> <!></div> <!>',1);function gt(g,t){Ee(t,!0);let a=Te(dt([])),n=st(),s=st(),r=st(),o=Te(""),l=w(()=>t.recipeName??e(o)),c=w(()=>e(l)?y.items.filter(f=>{var P;return f.Name.toLowerCase().includes((P=e(l))==null?void 0:P.toLowerCase())}).map(f=>f.ID):[]),_=w(()=>(()=>{const f=new Set;return e(c).forEach(P=>{for(const k of y.relatedRecipes[P]??[])f.add(k)}),f})()),x=w(()=>y.recipees.filter(f=>e(a).length>0?e(a).includes(f.Type):!0).filter(f=>e(l)?e(_).has(f.ID):!0).filter(f=>n.checked===null?!0:n.checked?y.buildableRecipees.has(f.ID):!y.buildableRecipees.has(f.ID)).filter(f=>s.checked===null?!0:s.checked?y.fluidRecipees.has(f.ID):!y.fluidRecipees.has(f.ID)).filter(f=>r.checked===null?!0:r.checked?y.entityRecipees.has(f.ID):!y.entityRecipees.has(f.ID)));new Set(y.recipees.map(f=>f.Type));var p=Za(),m=Y(p),b=d(m);A(b,f=>{});var S=u(b,2);{var B=f=>{var P=Je();z(k=>J(P,k),[()=>t.children()]),v(f,P)},q=f=>{var P=Re(),k=Y(P);{var N=O=>{},T=O=>{var V=Ga(),Q=u(Y(V),2);at(Q),rt(Q,()=>e(o),ne=>te(o,ne)),v(O,V)};A(k,O=>{t.recipeName!==void 0?O(N):O(T,!1)})}v(f,P)};A(S,f=>{t.children?f(B):f(q,!1)})}i(m);var D=u(m,2);we(D,17,()=>e(x),Be,(f,P)=>{var k=Ka(),N=d(k),T=d(N),O=d(T);xt(O,{get recipeId(){return e(P).ID}}),i(T);var V=u(T),Q=d(V,!0);i(V),i(N),i(k),z(ne=>{Qe(N,"href",ne),J(Q,e(P).Name)},[()=>it.recipe(e(P).ID)]),v(f,k)}),v(g,p),Oe()}De(["click"]);var Qa=(g,t)=>te(t,!e(t)),Wa=(g,t,a,n)=>t(e(a),e(n)),Xa=I("<button><!> <span> </span></button>"),Ya=I('<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 rounded-t"> </h4> <div class="flex dark:bg-gray-600 bg-slate-100 "></div></div>'),$a=(g,t)=>te(t,!e(t)),er=I("<button><!></button>"),tr=I('<span class="flex gap-1"><span> </span> <!> <span> </span></span>'),ar=I('<!> <span> </span> <span class="px-2"> </span> <span class="flex w-full justify-center gap-2"><span class="w-10 "><!></span> <span class="flex flex-grow justify-center gap-2"><span></span> <span>➡️</span> <span></span></span></span>',1),rr=I('<span class="w-10  "><!></span> <span class="flex-grow">Mining</span> <span class="w-10  "><!></span>',1),nr=I('<span class="w-10  "><!></span> <span class="flex-grow">Extraction</span> <span class="w-10  "><!></span>',1),lr=I('<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 rounded-t flex gap-2 justify-center"><!> </h4> <div class="flex dark:bg-gray-600 bg-slate-100  flex-wrap"><!> <!> <!></div></div>'),sr=I(`<button>default tier for
	new factories <span class="ml-auto shadow-2xl"><!></span></button> <!> <button>default recipe to procure item <span class="ml-auto shadow-2xl "><!></span></button> <!>`,1);function ir(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(o,"$defaultTierReadable",a),r=()=>ee(l,"$defaultRecipes",a);let o=_e.defaultTier,l=_e.defaultRecipes,c=Te(!0),_=Te(!0);const x=(R,H)=>{const oe={...s(),[R]:H};localStorage.setItem("defaultTiers",JSON.stringify(oe)),_e.defaultTier.set(oe)},p=(R,H)=>{const oe={...r(),[R]:H};localStorage.setItem("defaultRecipes",JSON.stringify(oe)),_e.defaultRecipes.set(oe)};var m=sr(),b=Y(m);b.__click=[Qa,c];let S;var B=u(d(b)),q=d(B);{var D=R=>{var H=Je("🔼");v(R,H)},f=R=>{var H=Je("🔽");v(R,H)};A(q,R=>{e(c)?R(D):R(f,!1)})}i(B),i(b);var P=u(b,2);{var k=R=>{var H=Re(),oe=Y(H);we(oe,1,()=>Object.keys(s()),Be,(me,ue)=>{var he=Re(),ae=Y(he);{var Se=Z=>{var F=Ya(),h=d(F),U=d(h,!0);i(h);var E=u(h,2);we(E,21,()=>_e.availableTiers[e(ue)],Be,(j,G)=>{var $=Xa();const ve=w(()=>_e.factoryItems[e(ue)][e(G)]),W=w(()=>e(G)===s()[e(ue)]);let Pe;$.__click=[Wa,x,ue,G];var xe=d($);ke(xe,{get itemId(){return e(ve)}});var qe=u(xe,2),re=d(qe,!0);i(qe),i($),z(se=>{Pe=ge($,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2  rounded-lg",null,Pe,se),J(re,e(G))},[()=>({"dark:outline-amber-100":e(W),"outline-1":e(W),active:e(W),"dark:bg-slate-500":e(W),"bg-white":e(W),"dark:hover:bg-slate-400":e(W),"dark:text-white":e(W),"dark:hover:bg-slate-700":!e(W),"dark:text-gray-300":!e(W),"dark:bg-slate-800":!e(W),"bg-slate-200":!e(W)})]),v(j,$)}),i(E),i(F),z(()=>J(U,e(ue))),v(Z,F)};A(ae,Z=>{var F;((F=_e.availableTiers[e(ue)])==null?void 0:F.length)>1&&Z(Se)})}v(me,he)}),v(R,H)};A(P,R=>{e(c)&&R(k)})}var N=u(P,2);N.__click=[$a,_];let T;var O=u(d(N)),V=d(O);{var Q=R=>{var H=Je("🔼");v(R,H)},ne=R=>{var H=Je("🔽");v(R,H)};A(V,R=>{e(_)?R(Q):R(ne,!1)})}i(O),i(N);var be=u(N,2);{var L=R=>{var H=Re();const oe=(he,ae=Fe,Se=Fe,Z=Fe)=>{var F=er();let h;F.__click=function(...E){var j;(j=Se())==null||j.apply(this,E)};var U=d(F);ot(U,Z),i(F),z(E=>h=ge(F,1,"w-full shadow-xl py-2 m-4 flex items-center justify-center gap-2  rounded-lg flex-wrap",null,h,E),[()=>({"dark:outline-amber-100":ae(),"outline-1":ae(),active:ae(),"dark:bg-slate-500":ae(),"bg-white":ae(),"dark:hover:bg-slate-400":ae(),"dark:text-white":ae(),"dark:hover:bg-slate-700":!ae(),"dark:text-gray-300":!ae(),"dark:bg-slate-800":!ae(),"bg-slate-200":!ae()})]),v(he,F)},me=(he,ae=Fe,Se=Fe,Z=Fe)=>{const F=w(()=>y.recipe[Z()]),h=(E,j=Fe,G=Fe)=>{var $=tr();const ve=w(()=>y.item[G()]);var W=d($),Pe=d(W,!0);i(W);var xe=u(W,2);ke(xe,{get itemId(){return G()}});var qe=u(xe,2),re=d(qe,!0);i(qe),i($),z(()=>{J(Pe,j()),J(re,e(ve).Name)}),v(E,$)},U=E=>{var j=ar();const G=w(()=>s()[e(F).Type]),$=w(()=>_e.factoryItems[e(F).Type][e(G)]);var ve=Y(j);xt(ve,{get recipeId(){return Z()}});var W=u(ve,2),Pe=d(W,!0);i(W);var xe=u(W,2),qe=d(xe);i(xe);var re=u(xe,2),se=d(re),pe=d(se);ke(pe,{get itemId(){return e($)},small:!1}),i(se);var C=u(se,2),de=d(C);we(de,21,()=>e(F).Items,Be,(Ie,ye,M)=>{h(Ie,()=>e(F).ItemCounts[M],()=>e(ye))}),i(de);var X=u(de,4);we(X,21,()=>e(F).Results,Be,(Ie,ye,M)=>{h(Ie,()=>e(F).ResultCounts[M],()=>e(ye))}),i(X),i(C),i(re),z(()=>{J(Pe,e(F).Name),J(qe,`⌚ ${e(F).TimeSpend/60}s`)}),v(E,j)};oe(he,ae,()=>()=>p(Se(),Z()),()=>U)};var ue=Y(H);we(ue,17,()=>Object.entries(y.alternativeRecipe),Be,(he,ae)=>{let Se=()=>e(ae)[0],Z=()=>e(ae)[1];var F=Re();const h=w(()=>Number(Se()));var U=Y(F);{var E=j=>{var G=lr(),$=d(G),ve=d($);ke(ve,{get itemId(){return e(h)}});var W=u(ve);i($);var Pe=u($,2),xe=d(Pe);{var qe=C=>{const de=w(()=>r()[e(h)]===null),X=Ie=>{var ye=rr(),M=Y(ye),K=d(M);ke(K,{itemId:2316,small:!1}),i(M);var ce=u(M,4),Me=d(ce);ke(Me,{itemId:2301,small:!1}),i(ce),v(Ie,ye)};oe(C,()=>e(de),()=>()=>p(e(h),null),()=>X)};A(xe,C=>{y.canBeMined[e(h)]&&C(qe)})}var re=u(xe,2);{var se=C=>{const de=w(()=>r()[e(h)]===null),X=Ie=>{var ye=nr(),M=Y(ye),K=d(M);ke(K,{itemId:2105,small:!1}),i(M);var ce=u(M,4),Me=d(ce);ke(Me,{itemId:2306,small:!1}),i(ce),v(Ie,ye)};oe(C,()=>e(de),()=>()=>p(e(h),null),()=>X)};A(re,C=>{y.canBeExtracted[e(h)]&&C(se)})}var pe=u(re,2);we(pe,17,Z,Be,(C,de)=>{const X=w(()=>e(de)===r()[e(h)]);me(C,()=>e(X),()=>e(h),()=>e(de))}),i(Pe),i(G),z(()=>J(W,` ${y.item[e(h)].Name??""}`)),v(j,G)};A(U,j=>{(Z().length>1||Z().length===1&&(y.canBeExtracted[e(h)]||y.canBeMined[e(h)]))&&j(E)})}v(he,F)}),v(R,H)};A(be,R=>{e(_)&&R(L)})}z((R,H)=>{S=ge(b,1,"dark:bg-blue-800 dark:hover:bg-blue-700 bg-blue-300 hover:bg-blue-400 hover:shadow-2xl  rounded-t py-5 px-4 flex",null,S,R),T=ge(N,1,"dark:bg-blue-800 dark:hover:bg-blue-700 bg-blue-300 hover:bg-blue-400 hover:shadow-2xl  rounded-t py-5 px-4 flex",null,T,H)},[()=>({"bg-blue-300":!e(c),"bg-blue-400":e(c)}),()=>({"bg-blue-300":!e(_),"bg-blue-400":e(_)})]),v(g,m),Oe(),n()}De(["click"]);var or=(g,t)=>e(t).select(),dr=I("<button> </button>"),cr=I('<h4 class="py-2 dark:bg-slate-800 bg-slate-200 rounded-t-lg flex gap-2 justify-center  w-full items-center sticky top-0"><span> </span> <span></span></h4>');function It(g,t){var a=cr(),n=d(a),s=d(n,!0);i(n);var r=u(n,2);we(r,21,()=>t.options,Be,(o,l)=>{var c=dr();let _;c.__click=[or,l];var x=d(c,!0);i(c),z(p=>{_=ge(c,1,"px-4 py-2 first:rounded-l-lg last:rounded-r-lg  outline-gray-600 ",null,_,p),J(x,e(l).label)},[()=>({"bg-blue-300":t.selectedOption===(e(l).elem??e(l).label),"bg-gray-300":t.selectedOption!==(e(l).elem??e(l).label),"hover:bg-blue-500":t.selectedOption===(e(l).elem??e(l).label),"hover:bg-gray-500":t.selectedOption!==(e(l).elem??e(l).label),"dark:bg-blue-700":t.selectedOption===(e(l).elem??e(l).label),"dark:bg-gray-700":t.selectedOption!==(e(l).elem??e(l).label)})]),v(o,c)}),i(r),i(a),z(()=>J(s,t.label)),v(g,a)}De(["click"]);var ur=I('<div class="relative"><em class="absolute w-full h-full text-right left-0 top-0 dark:backdrop-brightness-85 bg-white/50 dark:bg-black/30 "> </em> <!></div>'),vr=I('<div class="opacity-70 scale-90"><!></div>'),gr=I('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 dark:backdrop-brightness-75 "> </span></div>'),pr=I('<div class="flex flex-col"><!></div>'),_r=I('<div class="dark:odd:bg-gray-950 odd:bg-gray-200 py-1"><div class="gap-3 px-2 flex items-center justify-between"><div class="justify-self-center w-14 text-center p-0.5 flex flex-col"></div> <span class="flex-grow"> </span> <!></div></div>'),fr=I('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0  gap-0.5 overflow-y-auto max-h-screen scrollbar-thin"><!> <!></div>');function pt(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(c,"$itemId",a),r=()=>ee(l,"$requiredBuildingsByRecipeId",a),o=()=>ee(_,"$defaultTier",a);let{requiredBuildingsByRecipeId:l,itemId:c}=t.planner,{defaultTier:_}=_e,x=[{label:"buildings",select:()=>te(p,"buildings")},{label:"throughput",select:()=>te(p,"throughput")}],p=Te("buildings"),m=w(()=>t.activeTally??e(p));var b=fr(),S=d(b);{var B=D=>{It(D,{options:x,get selectedOption(){return e(m)},label:"required"})};A(S,D=>{t.activeTally||D(B)})}var q=u(S,2);He(q,s,D=>{var f=Re(),P=Y(f);we(P,1,()=>Object.entries(r()),Be,(k,N)=>{var T=Re();const O=w(()=>{const[ne,be]=e(N);return{recipeId:ne,requiredBuildings:be}});var V=Y(T);{var Q=ne=>{var be=_r();const L=w(()=>y.recipe[Number(e(O).recipeId)]),R=w(()=>o()[e(L).Type]/e(L).TimeSpend);var H=d(be),oe=d(H);we(oe,21,()=>e(L).Results,Be,(Z,F,h)=>{var U=ur();const E=w(()=>e(O).requiredBuildings*e(R)*e(L).ResultCounts[h]*60);var j=d(U),G=d(j);i(j);var $=u(j,2);ke($,{get itemId(){return e(F)}}),i(U),z(ve=>J(G,`${ve??""}/s`),[()=>Math.round(e(E)*100)/100]),v(Z,U)}),i(oe);var me=u(oe,2),ue=d(me,!0);i(me);var he=u(me,2);{var ae=Z=>{var F=gr();const h=w(()=>String(Math.round(e(O).requiredBuildings*10)/10)),U=w(()=>e(h).indexOf(".")),E=w(()=>e(U)===-1?1:0);var j=d(F),G=d(j);He(G,o,W=>{var Pe=vr(),xe=d(Pe);ke(xe,{get itemId(){var qe;return _e.factoryItems[(qe=e(L))==null?void 0:qe.Type][o()[e(L).Type]]}}),i(Pe),v(W,Pe)}),i(j);var $=u(j,2),ve=d($,!0);i($),i(F),z(()=>{et(F,`padding-right: ${e(E)+.5}em`),J(ve,e(h))}),v(Z,F)},Se=(Z,F)=>{{var h=U=>{var E=Re(),j=Y(E);we(j,17,()=>e(L).Results,Be,(G,$,ve)=>{var W=pr();const Pe=w(()=>e(O).requiredBuildings*e(R)*e(L).ResultCounts[ve]*60);var xe=d(W);mt(xe,{get outputs(){return e(Pe)}}),i(W),v(G,W)}),v(U,E)};A(Z,U=>{e(m)==="throughput"&&U(h)},F)}};A(he,Z=>{e(m)==="buildings"?Z(ae):Z(Se,!1)})}i(H),i(be),z(()=>{var Z;return J(ue,((Z=e(L))==null?void 0:Z.Name)??"recipe"+e(O).recipeId)}),v(ne,be)};A(V,ne=>{e(O).recipeId&&ne(Q)})}v(k,T)}),v(D,f)}),i(b),v(g,b),Oe(),n()}var br=(g,t)=>t(null),mr=(g,t,a)=>t(a),hr=(g,t)=>t(60),xr=I('<span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button></span>'),Ir=(g,t)=>te(t,!0),yr=(g,t)=>te(t,!0),kr=(g,t)=>te(t,!0),wr=(g,t)=>t(null),Br=(g,t,a)=>t(a),Rr=(g,t)=>t(60),Pr=I('<span class="px-3 py-1 dark:bg-slate-800 bg-slate-200 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button> <span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button></span></span></span>');function Tr(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(e(_),"$timeSpendChanged",a),r=()=>ee(e(l),"$targetInterval",a),o=()=>ee(e(c),"$timeSpend",a);let l=w(()=>t.planner.targetInterval),c=w(()=>t.planner.timeSpend),_=w(()=>t.planner.timeSpendChanged),{defaultInterval:x}=_e,p=Te(!1);const m=60*60,b=f=>{t.planner.setInterval(f),te(p,!1),x.set(f),localStorage==null||localStorage.setItem("defaultInterval",JSON.stringify({interval:f}))};var S=Re(),B=Y(S);{var q=f=>{var P=xr(),k=d(P);let N;k.__click=[br,b];var T=d(k);i(k);var O=u(k,2);let V;O.__click=[mr,b,m];var Q=u(O,2);let ne;Q.__click=[hr,b],i(P),z((be,L,R,H)=>{N=ge(k,1,"px-1.5 py-2 multi hover:bg-slate-700",null,N,be),J(T,`Cycle (${L??""}s)`),V=ge(O,1,"px-1.5 py-2 multi hover:bg-slate-700",null,V,R),ne=ge(Q,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ne,H)},[()=>({"animate-flash":s(),active:r()===0}),()=>Math.round(o()/60*100)/100,()=>({active:r()===m}),()=>({active:r()===60})]),v(f,P)},D=f=>{var P=Pr(),k=u(d(P)),N=d(k);let T;N.__click=[Ir,p];var O=d(N);i(N);var V=u(N,2);let Q;V.__click=[yr,p];var ne=u(V,2);let be;ne.__click=[kr,p];var L=u(ne,2),R=d(L);let H;R.__click=[wr,b];var oe=d(R);i(R);var me=u(R,2);let ue;me.__click=[Br,b,m];var he=u(me,2);let ae;he.__click=[Rr,b],i(L),i(k),i(P),z((Se,Z,F,h,U,E,j,G)=>{T=ge(N,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,T,Se),J(O,`Cycle (${Z??""}s)`),Q=ge(V,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,Q,F),be=ge(ne,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,be,h),H=ge(R,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,H,U),J(oe,`Cycle (${E??""}s)`),ue=ge(me,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,ue,j),ae=ge(he,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,ae,G)},[()=>({"animate-flash":s(),active:r()===null,hidden:r()!==null}),()=>Math.round(o()/60*100)/100,()=>({active:r()===m,hidden:r()!==m}),()=>({active:r()===60,hidden:r()!==60}),()=>({"animate-flash":s()&&r()===0,active:r()===null}),()=>Math.round(o()/60*100)/100,()=>({active:r()===m}),()=>({active:r()===60})]),v(f,P)};A(B,f=>{e(p)?f(q):f(D,!1)})}v(g,S),Oe(),n()}De(["click"]);var Sr=I('<link rel="icon">'),Nr=I('<span class="dark:bg-slate-700/70 bg-slate-300/70 w-full py-2 px-12">Factory Globals</span>'),qr=(g,t)=>t(),Er=(g,t)=>te(t,!1),Or=I('<div class="md:px-5 flex flex-col  gap-2 "><!> <span class="flex-grow"></span> <button class="dark:bg-green-800 dark:hover:bg-green-700  bg-green-300 hover:bg-green-400 w-full py-1">apply to existing</button> <button class="dark:bg-green-800 dark:hover:bg-green-700 bg-green-300 hover:bg-green-400 w-full py-1">apply to future</button></div>'),jr=(g,t)=>te(t,!e(t)),Mr=(g,t)=>te(t,!e(t)),Ar=(g,t)=>te(t,!0),Cr=I('<div class="flex w-full px-12 py-0.5 dark:bg-blue-700/70 bg-blue-300/70 "><label for="recipeName" class="py-2 text-center w-1/3 ">ingredient or recipe name</label> <input id="recipeName" class="flex-grow"></div>'),Dr=I('<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap justify-center"><div class="lg:max-w-xs xl:block hidden max-h-screen  ml-auto overflow-y-auto scrollbar-thin "><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto overflow-y-auto max-h-screen   scrollbar-thin"><div class="flex  text-sm py-1 gap-2 sticky top-0 z-10 bg-slate-50/70 dark:bg-slate-950/70"><!> <span class="px-3 py-3 flex-grow text-right"></span> <button> </button> <button> </button> <button class="px-3 py-3 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-l-lg">⚙️</button></div> <!></div> <div class="hidden lg:block max-w-sm w-full"><!></div></div> <!> <!>',1);function $r(g,t){Ee(t,!0);const[a,n]=Ue(),s=()=>ee(o,"$defaultTier",a),r=()=>ee(e(c),"$header",a);let{defaultTier:o}=_e,l=w(()=>new tt(t.data.recipeId,void 0,void 0,void 0,void 0,t.data.depth,t.data.targetAmount)),c=w(()=>e(l).header),_=Te(!1),x=Te(!1),p=Te(!1);const m=h=>{h||(h=e(l));const U=ze(h.recipe);if(U){const E=U.Type,j=s()[E];h.tier.set(j)}ze(h.children).forEach(E=>m(E)),te(_,!1)};let b=Te(""),S=[{label:"buildings",select:()=>te(B,"buildings")},{label:"throughput",select:()=>te(B,"throughput")}],B=Te("buildings");var q=Dr();Jt(h=>{var U=Sr();z(()=>{var E,j;Ft.title=(E=r())==null?void 0:E[1],Qe(U,"href",(j=r())==null?void 0:j[0])}),v(h,U)});var D=Y(q);{var f=h=>{Ye(h,{close:()=>te(_,!1),header:E=>{var j=Nr();v(E,j)},children:(E,j)=>{var G=Or(),$=d(G);ir($,{});var ve=u($,4);ve.__click=[qr,m];var W=u(ve,2);W.__click=[Er,_],i(G),v(E,G)},$$slots:{default:!0}})};A(D,h=>{e(_)&&h(f)})}var P=u(D,2),k=d(P),N=d(k);gt(N,{}),i(k);var T=u(k,2),O=d(T),V=d(O);Tr(V,{get planner(){return e(l)}});var Q=u(V,4);let ne;Q.__click=[jr,p];var be=d(Q,!0);i(Q);var L=u(Q,2);let R;L.__click=[Mr,x];var H=d(L,!0);i(L);var oe=u(L,2);oe.__click=[Ar,_],i(O);var me=u(O,2);He(me,()=>e(l),h=>{ht(h,{get planner(){return e(l)}})}),i(T);var ue=u(T,2),he=d(ue);He(he,()=>e(l),h=>{pt(h,{get planner(){return e(l)}})}),i(ue),i(P);var ae=u(P,2);{var Se=h=>{Ye(h,{close:()=>te(x,!1),header:E=>{var j=Cr(),G=u(d(j),2);at(G),i(j),rt(G,()=>e(b),$=>te(b,$)),v(E,j)},children:(E,j)=>{gt(E,{get recipeName(){return e(b)}})},$$slots:{header:!0,default:!0}})};A(ae,h=>{e(x)&&h(Se)})}var Z=u(ae,2);{var F=h=>{Ye(h,{close:()=>te(p,!1),header:E=>{It(E,{options:S,get selectedOption(){return e(B)},label:"required"})},children:(E,j)=>{var G=Re(),$=Y(G);He($,()=>e(l),ve=>{pt(ve,{get planner(){return e(l)},get activeTally(){return e(B)}})}),v(E,G)},$$slots:{header:!0,default:!0}})};A(Z,h=>{e(p)&&h(F)})}z((h,U)=>{ne=ge(Q,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg lg:hidden",null,ne,h),J(be,e(p)?"✖️":"📃"),R=ge(L,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg xl:hidden",null,R,U),J(H,e(x)?"✖️":"🔍")},[()=>({"dark:bg-slate-600":e(x),"dark:bg-slate-800":!e(x)}),()=>({"dark:bg-slate-600":e(x),"dark:bg-slate-800":!e(x)})]),v(g,q),Oe(),n()}De(["click"]);export{$r as component,Yr as universal};
