var vt=Object.defineProperty;var pt=(u,s,e)=>s in u?vt(u,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[s]=e;var S=(u,s,e)=>pt(u,typeof s!="symbol"?s+"":s,e);import{c as ye,a as g,t as $,b as mt}from"../chunks/e-TftYpV.js";import{at as ft,aG as ht,Q as bt,z as _t,A as Se,B as gt,K as It,J as xt,L as yt,U as kt,p as be,f as H,g as r,b as he,a as _e,s as x,c as v,r as c,h as se,t as D,M as Ue,e as X}from"../chunks/DKDpRE7g.js";import{d as ke,s as M}from"../chunks/CQBbwnrn.js";import{i as L}from"../chunks/PbJpwx8q.js";import{t as Pt,s as fe,c as Ke,b as wt,o as De}from"../chunks/Cs5HLVpE.js";import{s as Pe,a as A}from"../chunks/DSW42VuP.js";import{D as h,e as ce,i as ue,I as $t}from"../chunks/CRa7tc_X.js";import{w as W,d as T,g as ae}from"../chunks/DRXOzK2u.js";import{r as Je,b as Ge,L as Bt,s as St}from"../chunks/BCod4-4X.js";import{p as je}from"../chunks/BlFFt1pI.js";import{i as Rt}from"../chunks/CaJYm0qw.js";function Qe(u,s,e){Se&&gt();var a=u,n=kt,t,i=ft()?ht:bt;_t(()=>{i(n,n=s())&&(t&&It(t),t=xt(()=>e(a)))}),Se&&(a=yt)}function Me(u,s,e,a){var n=u.__style;if(Se||n!==s){var t=Pt(s);(!Se||t!==u.getAttribute("style"))&&(t==null?u.removeAttribute("style"):u.style.cssText=t),u.__style=s}return a}const At=!1,Et=({params:u,url:s})=>{const{id:e}=u,a=Number(e),n=s.searchParams.get("depth"),t=s.searchParams.get("targetAmount");return{recipeId:a,depth:n&&parseInt(n)||1,targetAmount:t&&parseInt(t)||1}},Er=Object.freeze(Object.defineProperty({__proto__:null,load:Et,prerender:At},Symbol.toStringTag,{value:"Module"})),re=(u,s)=>{const e=localStorage==null?void 0:localStorage.getItem(`dt.${u}`);return e?W(parseFloat(e)):W(s)},de={defaultTier:{Smelt:re("Smelt",1),Assemble:re("Assemble",.75),Research:re("Research",1),Chemical:re("Chemical",1),Refine:re("Refine",1),Particle:re("Particle",1),Fractionate:re("Fractionate",1),Proliferator:re("Proliferator",1)},availableTiers:{Smelt:[1,2],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1],Particle:[1],Fractionate:[1],Proliferator:[.125,.2,.25]}};class qt{constructor(s,e,a,n,t,i,l){this.recipeId=s,this.itemId=e,this.targetAmount=a,this.targetInterval=n,this.tier=t,this.proliferator=i,this.timeSpend=l}}const xe=(u,s)=>{const e={...u};return Object.entries(s).forEach(([a,n])=>{const t=Number(a);e[t]=(e[t]??0)+n}),e};class Re extends qt{constructor(e,a,n,t,i=0,l=1,m){var p;const b=!!(a&&(h.canBeExtracted[a]||h.canBeMined[a]));!e&&!b&&(e=(p=h.alternativeRecipe[a])==null?void 0:p[0]);const f=W(e),d=e?h.recipe[e]:void 0;let y=d==null?void 0:d.Results.findIndex(w=>a===w);const B=!a;!a&&(y??-1)>=0&&(a=d==null?void 0:d.Results[y??0]);const P=W(a),o=W((d==null?void 0:d.ResultCounts[y??0])??m??1),_=n?T([P,n],([w,K])=>K[w]):o,k=W(d!=null&&d.Type?ae(de.defaultTier[d.Type]):1),E=W(ae(de.defaultTier.Proliferator)),O=W(0),I=T([f,k],([w,K])=>{var J;return((J=h.recipe[w])==null?void 0:J.TimeSpend)/K});t||(t=T([O,I],([w,K])=>w>0?w:K));super(f,P,_,t,k,E,I);S(this,"amountEditable");S(this,"manualAmount",W());S(this,"manualInterval");S(this,"children",W([]));S(this,"canBeMined",T(this.itemId,e=>h.canBeMined[e]));S(this,"canBeExtracted",T(this.itemId,e=>h.canBeExtracted[e]));S(this,"item",T(this.itemId,e=>h.item[e]));S(this,"recipe",T(this.recipeId,e=>h.recipe[e]));S(this,"options",T(this.itemId,e=>h.alternativeRecipe[e]));S(this,"timeSpendChanged",T(this.timeSpend,(e,a)=>{a(!!e);const n=setTimeout(()=>a(!e),1400);return()=>clearTimeout(n)}));S(this,"relativeSpeed",T([this.targetInterval,this.timeSpend],([e,a])=>e/a));S(this,"requiredBuildings",T([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([e,a,n,t,i])=>{const l=a==null?void 0:a.Results.findIndex(b=>n===b),m=e/(a==null?void 0:a.ResultCounts[l])/t;return isNaN(m)?e:m}));S(this,"providedItemsPerInterval",T([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([e,a,n,t,i])=>{if(!e&&t&&(h.canBeMined[t]||h.canBeExtracted[t]))return{[t]:i};const l={};return e==null||e.Results.forEach((m,b)=>{l[m]=e.ResultCounts[b]*a*n}),l}));S(this,"childrenProvideItemsPerInterval",T(this.children,(e,a)=>{const n=new Array(e.length),t=e.map((l,m)=>l.providedItemsPerInterval.subscribe(b=>{n[m]=b;const f=n.filter(d=>!!d).reduce((d,y)=>xe(d,y),{});a(f)})),i=n.filter(l=>!!l).reduce((l,m)=>xe(l,m),{});return a(i),()=>t.forEach(l=>l())}));S(this,"requiredBuildingsByItemId",T([this.children,this.itemId,this.recipe,this.requiredBuildings],([e,a,n,t],i)=>{const l=new Array(e.length),m=e.map((f,d)=>f.requiredBuildingsByItemId.subscribe(y=>{l[d]=y;const B=l.filter(P=>!!P).reduce((P,o)=>xe(P,o),{});if(n){const P=a??n.Results[0];B[P]=(B[P]??0)+t}i(B)})),b=l.filter(f=>!!f).reduce((f,d)=>xe(f,d),{});if(n){const f=a??n.Results[0];b[f]=(b[f]??0)+t}return i(b),()=>m.forEach(f=>f())}));S(this,"childrenByItemId",T(this.children,(e,a)=>{const n=new Array(e.length),t=e.map((l,m)=>l.itemId.subscribe(b=>{n[m]=[b,l];const f=n.filter(d=>!!d).reduce((d,[y,B])=>(d[y]=B,d),{});a(f)})),i=n.filter(l=>!!l).reduce((l,[m,b])=>(l[m]=b,l),{});return a(i),()=>t.forEach(l=>l())}));S(this,"requiredItemsPerInterval",T([this.recipe,this.relativeSpeed,this.requiredBuildings],([e,a,n])=>{const t={};return e==null||e.Items.forEach((i,l)=>t[i]=e.ItemCounts[l]*a*n),t}));S(this,"inputsOutputs",T([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([e,a,n])=>{const t=new Set;return Object.keys(a).forEach(i=>{t.add(Number(i))}),Object.keys(e??{}).forEach(i=>{t.add(Number(i))}),Object.keys(n).forEach(i=>{t.add(Number(i))}),t}));S(this,"surplus",T([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([e,a,n,t])=>{const i=xe(e,n);return Object.entries(a).forEach(([l,m])=>i[Number(l)]=(i[Number(l)]??0)-m),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));S(this,"deficit",T([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([e,a])=>{const n={...e};return Object.entries(a).forEach(([t,i])=>n[Number(t)]=(n[Number(t)]??0)-i),Object.entries(n).filter(([,t])=>t>=0).forEach(([t])=>delete n[Number(t)]),Object.keys(n).forEach(t=>{var l;const i=Number(t);(l=h.producedVia[i])!=null&&l.length||delete n[i]}),n}));S(this,"totals",T([this.itemId,this.requiredBuildings,this.children],([e,a,n])=>{const t={};return t[e]=a,n.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,m])=>{const b=Number(l);t[b]=(t[b]??0)+m})}),t}));this.depth=i,this.amountEditable=B,this.manualAmount=o,this.manualInterval=O,l>i&&this.children.set(this.dbd(l))}setAmount(e){this.manualAmount.set(e)}setRecipeId(e){this.recipeId.set(e),this.expand()}deleteChild(e){this.children.update(a=>{const n=a.findIndex(t=>ae(t.itemId)===e);return a.splice(n,1),a})}setInterval(e){this.manualInterval.set(e)}expand(){this.children.set(this.dbd())}planFor(e){this.children.update(a=>(a.push(new Re(void 0,e,this.requiredItemsPerInterval,this.targetInterval,this.depth+1)),a))}dbd(e){const a=[],n=ae(this.recipe);return n==null||n.Items.forEach((t,i)=>{var b;if(!((b=h.alternativeRecipe[t])!=null&&b.length))return;const l=new Re(void 0,t,this.requiredItemsPerInterval,this.targetInterval,this.depth+1,e);a.push(l);const m=ae(l.providedItemsPerInterval);Object.entries(m).forEach(([f,d])=>{})}),a}}var Nt=(u,s,e)=>s(r(e)),Tt=$("<button> </button>"),Ot=$('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),Ct=(u,s)=>se(s,!0),Dt=$('<button class="text-center min-w-16 h-10 rounded-l-lg bg-slate-800 hover:bg-slate-700 py-2 px-3 flex justify-around items-end gap-2 relative "><span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function Mt(u,s){be(s,!0);const[e,a]=Pe(),n=()=>A(l,"$recipe",e),t=()=>A(m,"$tier",e),i=()=>A(b,"$requiredBuildings",e);let{recipe:l,tier:m,requiredBuildings:b}=s.planner,f=he(!1);const d=_=>{s.planner.tier.set(_),se(f,!1)};var y=ye(),B=H(y);{var P=_=>{var k=Ot(),E=x(v(k),2);ce(E,1,()=>de.availableTiers[n().Type],ue,(O,I)=>{var p=Tt();let w;p.__click=[Nt,d,I];var K=v(p,!0);c(p),D(J=>{w=fe(p,1,"px-2 py-1 outline-slate-600 hover:bg-slate-700 text-sm  rounded",null,w,J),M(K,r(I))},[()=>({"outline-1":r(I)===t(),active:r(I)===t()})]),g(O,p)}),c(k),g(_,k)},o=_=>{var k=Dt();k.__click=[Ct,f];var E=v(k),O=v(E);c(E);var I=x(E,2),p=v(I,!0);c(I),c(k),D(w=>{M(O,`tier ${t()??""}`),M(p,w)},[()=>Math.round(i()*100)/100]),g(_,k)};L(B,_=>{r(f)?_(P):_(o,!1)})}g(u,y),_e(),a()}ke(["click"]);var jt=(u,s)=>s.deletecb(),Vt=$(`<style scoped="">input[type=number]::-webkit-inner-spin-button {
              opacity: 1
          }</style> <input type="number" class="text-left rounded-r-lg w-16">`,1),Ft=$('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <span class="text-sm py-2 block pr-4"> </span></div>'),zt=$("<option>extraction/mining</option>"),Lt=$("<option> </option>"),Ut=$(" <select><!><!></select>",1),Gt=(u,s,e,a)=>{var n;return r(s)<0&&((n=h.producedVia[r(e)])==null?void 0:n.length)>0&&a.planner.planFor(r(e))},Kt=$('<div class="flex items-center"><span class="pl-2">📝</span>️ <span class="text-sm py-2 block pr-4"> </span></div>'),Jt=$('<div class="flex items-center"><span class="px-3.5"></span>️ <span class="text-sm py-2 block pr-4"> </span></div>'),Qt=$("<div><!></div>"),Zt=$('<div class="flex gap-2"><button><!></button> <!></div>'),Ht=$('<div class="flex flex-col gap-0.5"></div>'),Wt=$('<div class="flex gap-1 max-w-2xl items-center"><button class="bg-slate-800 hover:bg-slate-700  text-center rounded-r-lg  "><!></button> <div class="flex-grow px-4"><h5><!></h5></div> <!></div> <!>',1);function Ze(u,s){be(s,!0);const[e,a]=Pe(),n=()=>A(J,"$targetAmount",e),t=()=>A(O,"$recipeId",e),i=()=>A(k,"$itemId",e),l=()=>A(Ee,"$options",e),m=()=>A(_,"$item",e),b=()=>A(E,"$recipe",e),f=()=>A(p,"$requiredBuildings",e),d=()=>A($e,"$inputsOutputs",e),y=()=>A(Ae,"$providedItemsPerInterval",e),B=()=>A(we,"$childrenProvideItemsPerInterval",e),P=()=>A(ge,"$requiredItemsPerInterval",e),o=()=>A(K,"$childrenByItemId",e);let{item:_,itemId:k,recipe:E,recipeId:O,targetInterval:I,requiredBuildings:p,children:w,childrenByItemId:K,targetAmount:J,childrenProvideItemsPerInterval:we,providedItemsPerInterval:Ae,requiredItemsPerInterval:ge,inputsOutputs:$e,deficit:Ve,options:Ee,tier:Fe}=s.planner,ve=he(je(n())),pe=he(je(t()));Ue(()=>{s.planner.amountEditable&&n()!==r(ve)&&s.planner.setAmount(r(ve))}),Ue(()=>{r(pe)!==t()&&s.planner.setRecipeId(r(pe))});var q=Wt(),j=H(q),V=v(j);V.__click=[jt,s];var ee=v(V);{var qe=R=>{var C=Vt(),U=x(H(C),2);Je(U),Ke(U,()=>r(ve),N=>se(ve,N)),g(R,C)},He=R=>{var C=Ft(),U=x(v(C),2),N=v(U,!0);c(U),c(C),D(ne=>{Me(U,`padding-left: ${s.planner.depth*1.1}rem`),M(N,ne)},[()=>Math.round(n()*100)/100]),g(R,C)};L(ee,R=>{s.planner.amountEditable?R(qe):R(He,!1)})}c(V);var Ne=x(V,2),ze=v(Ne),We=v(ze);{var Xe=R=>{var C=Ut(),U=H(C),N=x(U),ne=v(N);{var Z=Y=>{var F=zt();F.value=(F.__value=void 0)==null?"":void 0,D(()=>Ge(F,t()===void 0)),g(Y,F)};L(ne,Y=>{(h.canBeExtracted[i()]||h.canBeMined[i()])&&Y(Z)})}var Be=x(ne);ce(Be,1,l,ue,(Y,F)=>{var Q=Lt(),le={},Te=v(Q,!0);c(Q),D(()=>{le!==(le=h.recipe[r(F)].ID)&&(Q.value=(Q.__value=h.recipe[r(F)].ID)==null?"":h.recipe[r(F)].ID),Ge(Q,O===h.recipe[r(F)].ID),M(Te,h.recipe[r(F)].Name)}),g(Y,Q)}),c(N),D(()=>M(U,`${m().Name??""}: `)),wt(N,()=>r(pe),Y=>se(pe,Y)),g(R,C)},Ye=R=>{var C=mt();D(()=>{var U;return M(C,(U=b())==null?void 0:U.Name)}),g(R,C)};L(We,R=>{i()&&(l().length>1||l().length>=1&&h.canBeExtracted[i()]||h.canBeMined[i()])?R(Xe):R(Ye,!1)})}c(ze),c(Ne);var et=x(Ne,2);{var tt=R=>{Mt(R,{get planner(){return s.planner}})};L(et,R=>{f()&&t()&&R(tt)})}c(j);var rt=x(j,2);{var at=R=>{var C=Ht();ce(C,5,d,ue,(U,N)=>{var ne=ye();const Z=X(()=>{var F,Q,le;return(((F=y())==null?void 0:F[r(N)])??0)+(((Q=B())==null?void 0:Q[r(N)])??0)-(((le=P())==null?void 0:le[r(N)])??0)}),Be=X(()=>o()[r(N)]);var Y=H(ne);Qe(Y,()=>r(N),F=>{var Q=ye(),le=H(Q);{var Te=me=>{Ze(me,{get planner(){return r(Be)},deletecb:()=>s.planner.deleteChild(r(N))})},st=me=>{var Oe=Zt(),Ie=v(Oe);let Le;Ie.__click=[Gt,Z,N,s];var nt=v(Ie);{var lt=z=>{var G=Kt(),te=x(v(G),2),ie=v(te,!0);c(te),c(G),D(oe=>{Me(te,`padding-left: ${(s.planner.depth+.5)*1.1}rem`),M(ie,oe)},[()=>Math.round(r(Z)*100)/100]),g(z,G)},it=(z,G)=>{{var te=ie=>{var oe=Jt(),Ce=x(v(oe),2),ct=v(Ce,!0);c(Ce),c(oe),D(ut=>{Me(Ce,`padding-left: ${(s.planner.depth+.5)*1.1}rem`),M(ct,ut)},[()=>Math.round(r(Z)*100)/100]),g(ie,oe)};L(z,ie=>{r(N)!==i()&&r(Z)!==0&&ie(te)},G)}};L(nt,z=>{var G;r(Z)<0&&((G=h.producedVia[r(N)])==null?void 0:G.length)>0?z(lt):z(it,!1)})}c(Ie);var ot=x(Ie,2);{var dt=z=>{var G=Qt();let te;var ie=v(G);$t(ie,{get itemId(){return r(N)}}),c(G),D(oe=>te=fe(G,1,"flex gap-2 items-center",null,te,oe),[()=>({"text-green-500":r(Z)>0,"text-red-500":r(Z)<0})]),g(z,G)};L(ot,z=>{r(N)!==i()&&r(Z)!==0&&z(dt)})}c(Oe),D(z=>Le=fe(Ie,1,"bg-slate-800 text-center rounded-r-lg",null,Le,z),[()=>{var z;return{"hover:bg-slate-700":r(Z)<0&&((z=h.producedVia[r(N)])==null?void 0:z.length)>0}}]),g(me,Oe)};L(le,me=>{r(Be)?me(Te):me(st,!1)})}g(F,Q)}),g(U,ne)}),c(C),g(R,C)};L(rt,R=>{var C;((C=d())==null?void 0:C.size)>0&&R(at)})}g(u,q),_e(),a()}ke(["click"]);var Xt=$('<div class="flex flex-col items-stretch group w-full "><div class="my-2 z-30"><a class="w-xs"> </a></div></div>'),Yt=$('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur-3xl backdrop-opacity-75  z-50"><!> <label for="recipeName">ingredient or recipe name</label><input id="recipeName"></div> <!>',1);function er(u,s){be(s,!0);let e=he(je([])),a=De(),n=De(),t=De(),i=he(""),l=X(()=>r(i)?h.items.filter(o=>o.Name.toLowerCase().includes(r(i).toLowerCase())).map(o=>o.ID):[]),m=X(()=>(()=>{const o=new Set;return r(l).forEach(_=>{for(const k of h.relatedRecipes[_]??[])o.add(k)}),o})()),b=X(()=>h.recipees.filter(o=>r(e).length>0?r(e).includes(o.Type):!0).filter(o=>r(i)?r(m).has(o.ID):!0).filter(o=>a.checked===null?!0:a.checked?h.buildableRecipees.has(o.ID):!h.buildableRecipees.has(o.ID)).filter(o=>n.checked===null?!0:n.checked?h.fluidRecipees.has(o.ID):!h.fluidRecipees.has(o.ID)).filter(o=>t.checked===null?!0:t.checked?h.entityRecipees.has(o.ID):!h.entityRecipees.has(o.ID)));new Set(h.recipees.map(o=>o.Type));var f=Yt(),d=H(f),y=v(d);L(y,o=>{});var B=x(y,3);Je(B),c(d);var P=x(d,2);ce(P,17,()=>r(b),ue,(o,_)=>{var k=Xt(),E=v(k),O=v(E),I=v(O,!0);c(O),c(E),c(k),D(p=>{St(O,"href",p),M(I,r(_).Name)},[()=>Bt.recipe(r(_).ID)]),g(o,k)}),Ke(B,()=>r(i),o=>se(i,o)),g(u,f),_e()}ke(["click"]);var tr=$('<button class="flex-grow shadow-xl py-2 m-4 outline-amber-100 outline-1 active bg-slate-500 hover:bg-slate-400  text-white rounded-lg"> </button>'),rr=$('<button class="flex-grow shadow-xl py-2 m-4	bg-slate-800 hover:bg-slate-700 text-gray-300 rounded-lg"> </button>'),ar=$('<button class="flex-grow shadow-xl py-2 m-4 outline-amber-100 outline-1 active rounded-lg bg-slate-500 hover:bg-slate-400  text-white"> </button>'),sr=$('<button class="flex-grow shadow-xl py-2 m-4 bg-slate-800 hover:bg-slate-700 text-gray-300 rounded-lg"> </button>'),nr=$('<h3 class="bg-blue-800  rounded-t py-5 px-4">default tier for new factories</h3> <div><h4 class="bg-blue-900 py-2 px-4 rounded-t">Smelting</h4> <div class="flex bg-gray-600 "></div></div> <div><h4 class="bg-blue-900 py-2 px-4 rounded-t">Assembler</h4> <div class="flex bg-gray-600 "></div></div>',1);function lr(u,s){be(s,!1);const[e,a]=Pe(),n=()=>A(i,"$Smelt",e),t=()=>A(l,"$Assemble",e);let{Smelt:i,Assemble:l}=de.defaultTier;const m=(P,o,_)=>{localStorage.setItem(`dt.${P}`,o),_.set(o)};Rt();var b=nr(),f=x(H(b),2),d=x(v(f),2);ce(d,5,()=>de.availableTiers.Smelt,ue,(P,o)=>{var _=ye(),k=H(_);{var E=I=>{var p=tr();p.__click=()=>m("Smelt",r(o),i);var w=v(p,!0);c(p),D(()=>M(w,r(o))),g(I,p)},O=I=>{var p=rr();p.__click=()=>m("Smelt",r(o),i);var w=v(p,!0);c(p),D(()=>M(w,r(o))),g(I,p)};L(k,I=>{r(o)===n()?I(E):I(O,!1)})}g(P,_)}),c(d),c(f);var y=x(f,2),B=x(v(y),2);ce(B,5,()=>de.availableTiers.Assemble,ue,(P,o)=>{var _=ye(),k=H(_);{var E=I=>{var p=ar();p.__click=()=>m("Assemble",r(o),l);var w=v(p,!0);c(p),D(()=>M(w,r(o))),g(I,p)},O=I=>{var p=sr();p.__click=()=>m("Assemble",r(o),l);var w=v(p,!0);c(p),D(()=>M(w,r(o))),g(I,p)};L(k,I=>{r(o)===t()?I(E):I(O,!1)})}g(P,_)}),c(B),c(y),g(u,b),_e(),a()}ke(["click"]);var ir=$('<div class="flex odd:bg-gray-950 gap-2 px-2"><span class="flex-grow"> </span> <span> </span></div>'),or=$('<div class="max-w-sm flex flex-col mr-auto gap-0.5"><h4 class="px-4 py-2 bg-slate-800 rounded-t-lg">all required buildings</h4> <!></div>');function dr(u,s){be(s,!0);const[e,a]=Pe(),n=()=>A(t,"$requiredBuildingsByItemId",e);let{requiredBuildingsByItemId:t}=s.planner;var i=or(),l=x(v(i),2);ce(l,1,()=>Object.entries(n()),ue,(m,b)=>{var f=ir();const d=X(()=>{const[_,k]=r(b);return{itemId:_,requiredBuildings:k}});var y=v(f),B=v(y,!0);c(y);var P=x(y,2),o=v(P,!0);c(P),c(f),D(_=>{M(B,_),M(o,r(d).requiredBuildings)},[()=>{var _;return((_=h.item[Number(r(d).itemId)])==null?void 0:_.Name)??"itemId"+r(d).itemId}]),g(m,f)}),c(i),g(u,i),_e(),a()}var cr=(u,s)=>s(),ur=(u,s)=>se(s,!1),vr=$('<dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-950 z-50 md:px-5 text-amber-50 flex flex-col py-4 gap-2"><!> <span class="flex-grow"></span> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to existing</button> <button class="bg-green-800 hover:bg-green-700 w-full py-1">apply to future</button></dialog>'),pr=(u,s)=>r(s).setInterval(0),mr=(u,s,e)=>r(s).setInterval(e),fr=(u,s)=>r(s).setInterval(60),hr=$("<button>Second</button>"),br=(u,s)=>se(s,!0),_r=$(`<!> <div class="flex gap-12"><div class="max-w-sm lg:block hidden max-h-screen  ml-auto overflow-y-auto"><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto"><div class="flex  text-sm py-1"><span class="px-3 py-1 bg-slate-800 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <!></span></span> <span class="px-3 py-3 flex-grow text-right"></span> <button class="px-3 py-3 bg-slate-800 hover:bg-slate-700 rounded-l-lg">⚙️ Required Fabs to Process
				Items</button></div> <!></div> <!></div>`,1);function qr(u,s){be(s,!0);const[e,a]=Pe(),n=()=>A(r(f),"$timeSpendChanged",e),t=()=>A(r(m),"$targetInterval",e),i=()=>A(r(b),"$timeSpend",e);let l=X(()=>new Re(s.data.recipeId,void 0,void 0,void 0,void 0,s.data.depth,s.data.targetAmount)),m=X(()=>r(l).targetInterval),b=X(()=>r(l).timeSpend),f=X(()=>r(l).timeSpendChanged);const d=60*60;let y=he(!1);const B=q=>{q||(q=r(l));const j=ae(q.recipe);if(j){const V=j.Type,ee=ae(de.defaultTier[V]);q.tier.set(ee)}ae(q.children).forEach(V=>B(V)),se(y,!1)};var P=_r(),o=H(P);{var _=q=>{var j=vr(),V=v(j);lr(V,{});var ee=x(V,4);ee.__click=[cr,B];var qe=x(ee,2);qe.__click=[ur,y],c(j),g(q,j)};L(o,q=>{r(y)&&q(_)})}var k=x(o,2),E=v(k),O=v(E);er(O,{}),c(E);var I=x(E,2),p=v(I),w=v(p),K=x(v(w)),J=v(K);let we;J.__click=[pr,l];var Ae=v(J);c(J);var ge=x(J,2);let $e;ge.__click=[mr,l,d];var Ve=x(ge,2);{var Ee=q=>{var j=hr();let V;j.__click=[fr,l],D(ee=>V=fe(j,1,"px-1.5 py-2 multi hover:bg-slate-700",null,V,ee),[()=>({active:t()===60})]),g(q,j)};L(Ve,q=>{i()!==60&&q(Ee)})}c(K),c(w);var Fe=x(w,4);Fe.__click=[br,y],c(p);var ve=x(p,2);Qe(ve,()=>r(l),q=>{Ze(q,{get planner(){return r(l)}})}),c(I);var pe=x(I,2);dr(pe,{get planner(){return r(l)}}),c(k),D((q,j,V)=>{we=fe(J,1,"px-1.5 py-2 multi hover:bg-slate-700",null,we,q),M(Ae,`Cycle (${j??""}s)`),$e=fe(ge,1,"px-1.5 py-2 multi hover:bg-slate-700",null,$e,V)},[()=>({"animate-flash":n(),active:t()===i()}),()=>Math.round(i()/60*100)/100,()=>({active:t()===d})]),g(u,P),_e(),a()}ke(["click"]);export{qr as component,Er as universal};
