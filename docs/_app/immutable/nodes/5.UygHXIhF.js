var Bt=Object.defineProperty;var Pt=(p,r,t)=>r in p?Bt(p,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[r]=t;var L=(p,r,t)=>Pt(p,typeof r!="symbol"?r+"":r,t);import{c as _e,t as x,a as v,b as Ue}from"../chunks/SEFiO7Wc.js";import{au as Rt,aH as Tt,$ as qt,k as Nt,q as Xe,F as St,M as Et,l as At,u as Ot,U as jt,p as ke,f as Z,t as j,g as e,e as R,a as we,b as xe,s as f,c,r as o,h as ee,n as Ct,P as gt,aI as Mt}from"../chunks/DmcGTwsI.js";import{d as Ce,s as V,a as Dt}from"../chunks/Du9jbAs8.js";import{i as E}from"../chunks/EpEpNsMH.js";import{s as Ge,r as et,b as dt,L as st}from"../chunks/Dybf1Zoa.js";import{t as Vt,s as me,c as tt,b as Ft,o as nt}from"../chunks/BcNb4ca1.js";import{s as Ke,a as D}from"../chunks/Dj6-fczb.js";import{D as P,e as Ie,i as ye,I as zt}from"../chunks/DwoWQO3a.js";import{w as Ee,d as K,g as Le}from"../chunks/CN8cQY8P.js";import{a as rt,o as Ht}from"../chunks/DRUN5bgD.js";import{p as it}from"../chunks/BCnrR-HL.js";import{s as ct}from"../chunks/BQcd2C11.js";function Je(p,r,t){Xe&&St();var a=p,n=jt,s,i=Rt()?Tt:qt;Nt(()=>{i(n,n=r())&&(s&&Et(s),s=At(()=>t(a)))}),Xe&&(a=Ot)}function Ye(p,r,t,a){var n=p.__style;if(Xe||n!==r){var s=Vt(r);(!Xe||s!==p.getAttribute("style"))&&(s==null?p.removeAttribute("style"):p.style.cssText=s),p.__style=r}return a}const Lt=!1,Ut=({params:p,url:r})=>{const{id:t}=p,a=Number(t),n=r.searchParams.get("depth"),s=r.searchParams.get("targetAmount");return{recipeId:a,depth:n&&parseInt(n)||1,targetAmount:s&&parseInt(s)||1}},Sa=Object.freeze(Object.defineProperty({__proto__:null,load:Ut,prerender:Lt},Symbol.toStringTag,{value:"Module"})),Gt=()=>{const p=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(p){const r=JSON.parse(p);return Object.keys(r).forEach(t=>{bt[t].find(a=>a===r[t])||(r[t]=pt[t],console.log(t,r[t]))}),Ee(r)}},bt={Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[0,.125,.2,.25]},pt={Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:0},be={defaultTier:Gt()??Ee(pt),availableTiers:bt,factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,2:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{0:null,.125:1141,.2:1142,.25:1143}}};class Jt{constructor(r,t,a,n,s,i,l){this.recipeId=r,this.itemId=t,this.targetAmount=a,this.targetInterval=n,this.tier=s,this.proliferator=i,this.timeSpend=l}}const He=(p,r)=>{const t={...p};return Object.entries(r).forEach(([a,n])=>{const s=Number(a);t[s]=(t[s]??0)+n}),t};class $e extends Jt{constructor(t,a,n,s,i=0,l=1,d){var N;const b=!!(a&&(P.canBeExtracted[a]||P.canBeMined[a]));!t&&!b&&(t=(N=P.alternativeRecipe[a])==null?void 0:N[0]);const g=Ee(t),h=t?P.recipe[t]:void 0;let _=h==null?void 0:h.Results.findIndex(q=>a===q);const m=!a;!a&&(_??-1)>=0&&(a=h==null?void 0:h.Results[_??0]);const T=Ee(a),y=Ee((h==null?void 0:h.ResultCounts[_??0])??d??1),k=n?K([T,n],([q,A])=>A[q]):y,I=Ee(h!=null&&h.Type?Le(be.defaultTier)[h.Type]:1),u=Ee(Le(be.defaultTier).Proliferator),w=Ee(0),B=K([g,I],([q,A])=>{var S;return((S=P.recipe[q])==null?void 0:S.TimeSpend)/A});s||(s=K([w,B],([q,A])=>q>0?q:A));super(g,T,k,s,I,u,B);L(this,"amountEditable");L(this,"manualAmount",Ee());L(this,"manualInterval");L(this,"children",Ee([]));L(this,"canBeMined",K(this.itemId,t=>P.canBeMined[t]));L(this,"canBeExtracted",K(this.itemId,t=>P.canBeExtracted[t]));L(this,"item",K(this.itemId,t=>P.item[t]));L(this,"recipe",K(this.recipeId,t=>P.recipe[t]));L(this,"header",K([this.itemId,this.recipe],([t,a])=>{var d;const n=t??((d=a==null?void 0:a.Results)==null?void 0:d[0]);if(!n)return;const s=P.item[n],i=s.IconPath.split("/"),l=i[i.length-1];return l&&[rt+`/dsp_sprites/${l}.png`,s.Name]}));L(this,"options",K(this.itemId,t=>P.alternativeRecipe[t]));L(this,"timeSpendChanged",K(this.timeSpend,(t,a)=>{a(!!t);const n=setTimeout(()=>a(!t),1400);return()=>clearTimeout(n)}));L(this,"relativeSpeed",K([this.targetInterval,this.timeSpend],([t,a])=>t/a));L(this,"requiredBuildings",K([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([t,a,n,s,i])=>{const l=a==null?void 0:a.Results.findIndex(b=>n===b),d=t/(a==null?void 0:a.ResultCounts[l])/s;return isNaN(d)?t:d}));L(this,"providedItemsPerInterval",K([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([t,a,n,s,i])=>{if(!t&&s&&(P.canBeMined[s]||P.canBeExtracted[s]))return{[s]:i};const l={};return t==null||t.Results.forEach((d,b)=>{l[d]=t.ResultCounts[b]*a*n}),l}));L(this,"childrenProvideItemsPerInterval",K(this.children,(t,a)=>{const n=new Array(t.length),s=t.map((l,d)=>l.providedItemsPerInterval.subscribe(b=>{n[d]=b;const g=n.filter(h=>!!h).reduce((h,_)=>He(h,_),{});a(g)})),i=n.filter(l=>!!l).reduce((l,d)=>He(l,d),{});return a(i),()=>s.forEach(l=>l())}));L(this,"requiredBuildingsByRecipeId",K([this.children,this.recipeId,this.requiredBuildings],([t,a,n],s)=>{const i=new Array(t.length),l=t.map((b,g)=>b.requiredBuildingsByRecipeId.subscribe(h=>{i[g]=h;const _=i.filter(m=>!!m).reduce((m,T)=>He(m,T),{});if(a){const m=a;_[m]=(_[m]??0)+n}s(_)})),d=i.filter(b=>!!b).reduce((b,g)=>He(b,g),{});if(a){const b=a;d[b]=(d[b]??0)+n}return s(d),()=>l.forEach(b=>b())}));L(this,"fabsByType",K(this.requiredBuildingsByRecipeId,t=>Object.entries(t).reduce((a,[n,s])=>{const i=Number(n),l=P.recipe[i].Type;return a[l]=(a[l]??0)+Math.ceil(s),a},{})));L(this,"childrenByItemId",K(this.children,(t,a)=>{const n=new Array(t.length),s=t.map((l,d)=>l.itemId.subscribe(b=>{n[d]=[b,l];const g=n.filter(h=>!!h).reduce((h,[_,m])=>(h[_]=m,h),{});a(g)})),i=n.filter(l=>!!l).reduce((l,[d,b])=>(l[d]=b,l),{});return a(i),()=>s.forEach(l=>l())}));L(this,"requiredItemsPerInterval",K([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,n])=>{const s={};return t==null||t.Items.forEach((i,l)=>s[i]=t.ItemCounts[l]*a*n),s}));L(this,"deficitRequiredItemsPerInterval",K([this.recipe,this.relativeSpeed,this.requiredBuildings],([t,a,n])=>{const s={};return t==null||t.Items.forEach((i,l)=>s[i]=-(t.ItemCounts[l]*a*n)),s}));L(this,"inputsOutputs",K([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([t,a,n])=>{const s=new Set;return Object.keys(a).forEach(i=>{s.add(Number(i))}),Object.keys(t??{}).forEach(i=>{s.add(Number(i))}),Object.keys(n).forEach(i=>{s.add(Number(i))}),s}));L(this,"surplus",K([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([t,a,n,s])=>{const i=He(t,n);return Object.entries(a).forEach(([l,d])=>i[Number(l)]=(i[Number(l)]??0)-d),Object.entries(i).filter(([,l])=>l<=0).forEach(([l])=>delete i[Number(l)]),i}));L(this,"deficit",K([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([t,a])=>{const n={...t};return Object.entries(a).forEach(([s,i])=>n[Number(s)]=(n[Number(s)]??0)-i),Object.entries(n).filter(([,s])=>s>=0).forEach(([s])=>delete n[Number(s)]),n}));L(this,"deficitByItemId",K([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([t,a,n,s,i],l)=>{const d=new Array(t.length),b=t.map((h,_)=>h.deficitByItemId.subscribe(m=>{d[_]=m;const T=d.filter(y=>!!y).reduce((y,k)=>He(y,k),n?a:{[s]:-i});l(T)})),g=d.filter(h=>!!h).reduce((h,_)=>He(h,_),n?a:{[s]:-i});return l(g),()=>b.forEach(h=>h())}));L(this,"totals",K([this.itemId,this.requiredBuildings,this.children],([t,a,n])=>{const s={};return s[t]=a,n.map(i=>i.totals).forEach(i=>{Object.entries(i).forEach(([l,d])=>{const b=Number(l);s[b]=(s[b]??0)+d})}),s}));this.depth=i,this.amountEditable=m,this.manualAmount=y,this.manualInterval=w,l>i&&this.children.set(this.dbd(l))}setAmount(t){this.manualAmount.set(t)}setRecipeId(t){this.recipeId.set(t),this.expand()}deleteChild(t){this.children.update(a=>{const n=a.findIndex(s=>Le(s.itemId)===t);return a.splice(n,1),a})}setInterval(t){this.manualInterval.set(t)}expand(){this.children.set(this.dbd())}planFor(t){this.children.update(a=>(a.push(new $e(void 0,t,this.requiredItemsPerInterval,this.targetInterval,this.depth+1)),a))}dbd(t){const a=[],n=Le(this.recipe);return n==null||n.Items.forEach((s,i)=>{var b;if(!((b=P.alternativeRecipe[s])!=null&&b.length))return;const l=new $e(void 0,s,this.requiredItemsPerInterval,this.targetInterval,this.depth+1,t);a.push(l);const d=Le(l.providedItemsPerInterval);Object.entries(d).forEach(([g,h])=>{})}),a}}var Kt=x('<img class="h-6" alt="">');function Te(p,r){ke(r,!0);let t=R(()=>P.item[r.itemId]);const a=R(()=>{var d;return(d=e(t))==null?void 0:d.IconPath.split("/")}),n=R(()=>e(a)&&e(a)[e(a).length-1]),s=R(()=>e(n)&&rt+`/dsp_sprites/${e(n)}.png`);var i=_e(),l=Z(i);Je(l,()=>r.itemId,d=>{var b=Kt();j(()=>Ge(b,"src",e(s))),v(d,b)}),v(p,i),we()}var Zt=(p,r,t)=>r(e(t)),Qt=x("<button> <!></button>"),Wt=x('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),Xt=(p,r)=>ee(r,!0),Yt=x('<button class="text-center min-w-16 h-10 rounded-l-lg dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-600 hover:bg-slate-400 py-2 px-3 flex justify-around items-end gap-2 relative  "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function $t(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(l,"$recipe",t),s=()=>D(d,"$tier",t),i=()=>D(b,"$requiredBuildings",t);let{recipe:l,tier:d,requiredBuildings:b}=r.planner,g=xe(!1);const h=k=>{r.planner.tier.set(k),ee(g,!1)};var _=_e(),m=Z(_);{var T=k=>{var I=Wt(),u=f(c(I),2);Ie(u,1,()=>be.availableTiers[n().Type],ye,(w,B)=>{var N=Qt();let q;N.__click=[Zt,h,B];var A=c(N),S=f(A);Te(S,{get itemId(){var Q;return be.factoryItems[(Q=n())==null?void 0:Q.Type][e(B)]}}),o(N),j(Q=>{q=me(N,1,"px-2 py-1 outline-slate-600 dark:hover:bg-slate-600 hover:bg-slate-400 text-sm  rounded",null,q,Q),V(A,`${e(B)??""} `)},[()=>({"outline-1":e(B)===s(),active:e(B)===s()})]),v(w,N)}),o(I),v(k,I)},y=k=>{var I=Yt();I.__click=[Xt,g];var u=c(I),w=c(u);Te(w,{get itemId(){var S;return be.factoryItems[(S=n())==null?void 0:S.Type][s()]}}),o(u);var B=f(u,2),N=c(B);o(B);var q=f(B,2),A=c(q,!0);o(q),o(I),j(S=>{V(N,`tier ${s()??""}`),V(A,S)},[()=>Math.round(i()*100)/100]),v(k,I)};E(m,k=>{e(g)?k(T):k(y,!1)})}v(p,_),we(),a()}Ce(["click"]);var er=x('<div class="flex gap-1 relative justify-center"><!> <span class="absolute  mx-auto text-center top-0 px-1    rounded-3xl bg-white/70 dark:bg-black/30  "> </span></div>');function ft(p,r){const t=i=>{switch(!0){case i<=6:return[[2001,1]];case i<=12:return[[2002,1]];case i<=30:return[[2003,1]];default:const l=Math.ceil(Math.ceil(i)/30),d=Math.ceil(l/4);return[[2014,d>1?4:l],[2003,d]]}};let a=R(()=>t(r.outputs));var n=_e(),s=Z(n);Ie(s,17,()=>e(a),ye,(i,l)=>{var d=_e(),b=Z(d);{var g=h=>{var _=er(),m=c(_);Te(m,{get itemId(){return e(l)[0]}});var T=f(m,2),y=c(T,!0);o(T),o(_),j(()=>V(y,e(l)[1])),v(h,_)};E(b,h=>{e(l)[1]>0&&h(g)})}v(i,d)}),v(p,n)}var tr=(p,r)=>ee(r,!e(r)),rr=x('<button class="flex  dark:odd:bg-gray-950 odd:bg-gray-100 gap-2 px-2 items-center dark:hover:bg-gray-700 hover:bg-gray-300 w-full group "><span><!></span> <span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs "> </span> <em class="text-right flex-grow"> </em> <span class="flex w-18 justify-end gap-1"><!></span></button>');function ar(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(s,"$defaultTier",t);let{defaultTier:s}=be,i=xe(!0),l=R(()=>P.recipe[Number(r.recipeId)]),d=R(()=>n()[e(l).Type]/e(l).TimeSpend),b=R(()=>e(l).ResultCounts.reduce((G,U)=>U+G,0)),g=R(()=>r.requiredBuildings*e(d)*e(b)*60/(e(i)?r.devisor:1)),h=R(()=>Math.round(e(g)*100)/100);var _=rr();_.__click=[tr,i];var m=c(_);let T;var y=c(m);{var k=G=>{var U=Ue("🔓");v(G,U)},I=G=>{var U=Ue("🔒");v(G,U)};E(y,G=>{e(i)?G(k):G(I,!1)})}o(m);var u=f(m,2),w=c(u,!0);o(u);var B=f(u,4),N=c(B,!0);o(B);var q=f(B,2),A=c(q);o(q);var S=f(q,2),Q=c(S);o(S);var X=f(S,2),le=c(X);ft(le,{get outputs(){return e(g)}}),o(X),o(_),j((G,U)=>{var ge;T=me(m,1,"w-4 group-hover:opacity-100",null,T,G),V(w,U),V(N,((ge=e(l))==null?void 0:ge.Name)??"recipe"+r.recipeId),V(A,`tier ${n()[e(l).Type]??""}`),V(Q,`${e(h)??""}/s`)},[()=>({"opacity-0":e(i)}),()=>Math.round(r.requiredBuildings/(e(i)?r.devisor:1)*100)/100]),v(p,_),we(),a()}Ce(["click"]);var nr=x('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300"><span> </span> <span class="text-right flex-grow"> </span></div>'),sr=x('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300 px-1"><span> </span></div>'),lr=x('<div><h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function ir(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(d,"$fabsByType",t),s=()=>D(l,"$requiredBuildingsByRecipeId",t),i=()=>D(h,"$deficitByItemId",t);let{requiredBuildingsByRecipeId:l,fabsByType:d,recipe:b,requiredBuildings:g,deficitByItemId:h}=r.planner;var _=lr(),m=f(c(_),2);Ie(m,5,()=>Object.entries(n()),ye,(k,I)=>{var u=nr();const w=R(()=>{const[S,Q]=e(I);return{fabType:S,requiredFabs:Q}});var B=c(u),N=c(B,!0);o(B);var q=f(B,2),A=c(q,!0);o(q),o(u),j(S=>{V(N,e(w).fabType),V(A,S)},[()=>Math.ceil(e(w).requiredFabs/r.devisor)]),v(k,u)}),o(m);var T=f(m,4);Ie(T,1,()=>Object.entries(s()??{}),ye,(k,I,u,w)=>{const B=R(()=>{const[N,q]=e(I);return{recipeId:N,requiredBuildings:q}});ar(k,{get recipeId(){return e(B).recipeId},get requiredBuildings(){return e(B).requiredBuildings},get devisor(){return r.devisor}})});var y=f(T,4);Ie(y,5,()=>Object.entries(i()),ye,(k,I)=>{var u=sr();const w=R(()=>{const[q]=e(I);return{itemId:q}});var B=c(u),N=c(B,!0);o(B),o(u),j(()=>V(N,P.item[e(w).itemId].Name)),v(k,u)}),o(y),o(_),v(p,_),we(),a()}var or=(p,r)=>{var t;return(t=r.close)==null?void 0:t.call(r)},dr=(p,r)=>{var t;return(t=r.close)==null?void 0:t.call(r)},cr=x('<button class="dark:bg-slate-800 dark:hover:bg-slate-700 bg-slate-200 hover:bg-slate-300 w-12 py-2 absolute right-0 top-0 h-full">✖️</button>'),ur=x('<h6 class="flex items-center justify-between sticky top-0  bg-gray-50/70 dark:bg-gray-950/70"><!> <!></h6>'),vr=x('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl dark:bg-black opacity-70 top-0 left-0 z-10" aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-50 dark:bg-gray-950  dark:text-amber-50 fixed outline-1 rounded-2xl outline-slate-600 overflow-y-scroll z-10 flex flex-col  gap-2 scroll-mt-20"><!> <!></dialog>',1);function lt(p,r){ke(r,!0),Ht(()=>{var d;return(d=r.close)==null?void 0:d.call(r)});var t=vr(),a=Z(t);a.__click=[or,r];var n=f(a,2),s=c(n);{var i=d=>{var b=ur(),g=c(b);ct(g,()=>r.header??Ct);var h=f(g,2);{var _=m=>{var T=cr();T.__click=[dr,r],v(m,T)};E(h,m=>{r.close&&m(_)})}o(b),v(d,b)};E(s,d=>{(r.header||r.close)&&d(i)})}var l=f(s,2);ct(l,()=>r.children),o(n),v(p,t),we()}Ce(["click"]);var gr=x('<img class="h-6" alt="">');function ut(p,r){ke(r,!0);const t=R(()=>r.filename.split("/")),a=R(()=>e(t)&&e(t)[e(t).length-1]),n=R(()=>e(a)&&rt+`/dsp_sprites/${e(a)}.png`);var s=gr();j(()=>Ge(s,"src",e(n))),v(p,s),we()}var br=(p,r)=>{var t;return(t=r.deletecb)==null?void 0:t.call(r)},pr=x(`<style scoped="">input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* display: none; <- Crashes Chrome on hover */
            -webkit-appearance: none;
            margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
        }

        input[type=number] {
            -moz-appearance: textfield;
        }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),fr=x('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),hr=x("<button><!></button>");function mr(p,r){ke(r,!0);let t=xe(it(r.targetAmount));gt(()=>{r.planner.amountEditable&&r.targetAmount!==e(t)&&r.planner.setAmount(e(t))});var a=hr();a.__click=[br,r];let n;var s=c(a);{var i=d=>{var b=pr(),g=f(Z(b),2),h=c(g);{var _=y=>{ut(y,{get filename(){return r.recipe.IconPath}})},m=y=>{const k=R(()=>{var I,u;return(u=(I=r.recipe)==null?void 0:I.Results)==null?void 0:u[0]});Te(y,{get itemId(){return e(k)}})};E(h,y=>{var k;(k=r.recipe)!=null&&k.IconPath?y(_):y(m,!1)})}var T=f(h,2);et(T),o(g),tt(T,()=>e(t),y=>ee(t,y)),v(d,b)},l=d=>{var b=fr(),g=f(c(b),2);{var h=y=>{ut(y,{get filename(){return r.recipe.IconPath}})},_=y=>{Te(y,{get itemId(){return r.itemId}})};E(g,y=>{var k;(k=r.recipe)!=null&&k.IconPath?y(h):y(_,!1)})}var m=f(g,2),T=c(m,!0);o(m),o(b),j(y=>{Ye(m,`padding-left: ${r.planner.depth*1.1}rem`),V(T,y)},[()=>Math.round(r.targetAmount*100)/100]),v(d,b)};E(s,d=>{r.planner.amountEditable?d(i):d(l,!1)})}o(a),j(d=>{a.disabled=!r.deletecb||!r.recipe,n=me(a,1,"dark:bg-slate-800 bg-slate-200  text-center rounded-r-lg  outline-slate-500",null,n,d)},[()=>({"dark:hover:bg-red-700":!r.planner.amountEditable,"hover:bg-red-300":!r.planner.amountEditable,"outline-1":r.planner.amountEditable})]),v(p,a),we()}Ce(["click"]);var _r=x('<h3 class="dark:bg-blue-800 bg-blue-300 py-2 px-4  text-center w-full"><input class="w-24" type="number"> <span class="text-xs dark:text-slate-400 text-slate-700">x</span> <span class="w-14 text-right"> </span> <span> </span></h3>'),xr=(p,r)=>ee(r,!1),Ir=x('<!> <button class="dark:bg-green-800 bg-green-200 dark:hover:bg-green-700 hover:bg-green-300 py-2 rounded-xl mt-auto">close</button>',1),yr=x("<option><!> </option>"),kr=x("<option> </option>"),wr=x('<a class="dark:bg-gray-800 bg-gray-200 dark:hover:bg-slate-700 hover:bg-slate-300">➡️</a>'),Br=x('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),Pr=x('<a class="dark:bg-gray-800 dark:hover:bg-slate-700 bg-gray-200 hover:bg-slate-300">➡️</a>'),Rr=(p,r)=>ee(r,!0),Tr=x('<button class="py-1 rounded-xl px-4 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300">🔎</button>'),qr=x('<span class="flex-grow"> <!></span> <!>',1),Nr=x('<div class="ml-auto"><!></div>'),Sr=(p,r,t,a)=>{var n;return e(r)<0&&((n=P.producedVia[e(t)])==null?void 0:n.length)>0&&a.planner.planFor(e(t))},Er=x('<div class="flex items-center"><span class="pl-2">📝</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Ar=x('<div class="flex items-center"><span class="px-3.5"></span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Or=x("<div><!></div>"),jr=x('<div class="flex gap-2 dark:hover:bg-gray-700 hover:bg-gray-300"><button><!></button> <!></div>'),Cr=x('<div class="flex flex-col gap-0.5 "></div>'),Mr=x('<!> <div class="flex gap-1 max-w-2xl items-center dark:hover:bg-gray-700 hover:bg-gray-300  flex-wrap @container"><!> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function ht(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(B,"$recipeId",t),s=()=>D(N,"$requiredBuildings",t),i=()=>D(w,"$recipe",t),l=()=>D(u,"$itemId",t),d=()=>D(S,"$targetAmount",t),b=()=>D(U,"$options",t),g=()=>D(I,"$item",t),h=()=>D(q,"$children",t),_=()=>D(G,"$inputsOutputs",t),m=()=>D(X,"$providedItemsPerInterval",t),T=()=>D(Q,"$childrenProvideItemsPerInterval",t),y=()=>D(le,"$requiredItemsPerInterval",t),k=()=>D(A,"$childrenByItemId",t);let{item:I,itemId:u,recipe:w,recipeId:B,requiredBuildings:N,children:q,childrenByItemId:A,targetAmount:S,childrenProvideItemsPerInterval:Q,providedItemsPerInterval:X,requiredItemsPerInterval:le,inputsOutputs:G,options:U,header:ge}=r.planner,de=xe(it(n())),ie=xe(!1);gt(()=>{e(de)!==n()&&r.planner.setRecipeId(e(de))});let ce=xe(1),te=R(()=>!e(ce)||isNaN(e(ce))?1:e(ce)),Me=R(()=>Math.ceil(s()/e(te)));var Ae=Mr(),pe=Z(Ae);{var ae=H=>{lt(H,{close:()=>ee(ie,!1),header:ne=>{var z=_r(),he=c(z);et(he);var W=f(he,4),qe=c(W,!0);o(W);var De=f(W,2),C=c(De);o(De),o(z),j(()=>{V(qe,e(Me)),V(C,`${i().Name??""}s`)}),tt(he,()=>e(ce),M=>ee(ce,M)),v(ne,z)},children:(ne,z)=>{var he=Ir(),W=Z(he);ir(W,{get planner(){return r.planner},get devisor(){return e(te)}});var qe=f(W,2);qe.__click=[xr,ie],v(ne,he)},$$slots:{default:!0}})};E(pe,H=>{e(ie)&&H(ae)})}var oe=f(pe,2),Pe=c(oe);mr(Pe,{get planner(){return r.planner},get recipe(){return i()},get itemId(){return l()},get targetAmount(){return d()},get deletecb(){return r.deletecb}});var ue=f(Pe,2),Re=c(ue),fe=c(Re);{var Oe=H=>{var $=Br(),ne=Z($),z=c(ne);{var he=C=>{var M=yr();M.value=(M.__value=void 0)==null?"":void 0;var se=c(M);{var Ze=Ne=>{var Se=Ue("orbital collector");v(Ne,Se)},Qe=Ne=>{var Se=Ue("mining");v(Ne,Se)};E(se,Ne=>{P.canBeExtracted[l()]?Ne(Ze):Ne(Qe,!1)})}var Ve=f(se);o(M),j(()=>{dt(M,n()===void 0),V(Ve,` (${g().Name??""})`)}),v(C,M)};E(z,C=>{(P.canBeExtracted[l()]||P.canBeMined[l()])&&C(he)})}var W=f(z);Ie(W,1,b,ye,(C,M)=>{var se=kr(),Ze={},Qe=c(se,!0);o(se),j(()=>{Ze!==(Ze=P.recipe[e(M)].ID)&&(se.value=(se.__value=P.recipe[e(M)].ID)==null?"":P.recipe[e(M)].ID),dt(se,n()===P.recipe[e(M)].ID),V(Qe,P.recipe[e(M)].Name)}),v(C,se)}),o(ne);var qe=f(ne,2);{var De=C=>{var M=wr();j(se=>Ge(M,"href",se),[()=>st.recipe(i().ID)+"?targetAmount="+Math.round(s())+"&depth=10"]),v(C,M)};E(qe,C=>{!r.planner.amountEditable&&i()&&C(De)})}Ft(ne,()=>e(de),C=>ee(de,C)),v(H,$)},O=H=>{var $=qr(),ne=Z($),z=c(ne),he=f(z);{var W=C=>{var M=Pr();j(se=>Ge(M,"href",se),[()=>st.recipe(i().ID)+"?targetAmount="+Math.round(s())+"&depth=10"]),v(C,M)};E(he,C=>{r.planner.amountEditable||C(W)})}o(ne);var qe=f(ne,2);{var De=C=>{var M=Tr();M.__click=[Rr,ie],v(C,M)};E(qe,C=>{h().length>1&&!r.planner.amountEditable&&C(De)})}j(()=>{var C;return V(z,`${((C=i())==null?void 0:C.Name)??""} `)}),v(H,$)};E(fe,H=>{l()&&(b().length>1||b().length>=1&&P.canBeExtracted[l()]||P.canBeMined[l()])?H(Oe):H(O,!1)})}o(Re),o(ue);var Y=f(ue,2);{var F=H=>{var $=Nr(),ne=c($);$t(ne,{get planner(){return r.planner}}),o($),v(H,$)};E(Y,H=>{s()&&n()&&H(F)})}o(oe);var J=f(oe,2);{var Be=H=>{var $=Cr();Ie($,5,_,ye,(ne,z)=>{var he=_e();const W=R(()=>{var C,M,se;return(((C=m())==null?void 0:C[e(z)])??0)+(((M=T())==null?void 0:M[e(z)])??0)-(((se=y())==null?void 0:se[e(z)])??0)}),qe=R(()=>k()[e(z)]);var De=Z(he);Je(De,()=>e(z),C=>{var M=_e(),se=Z(M);{var Ze=Ve=>{ht(Ve,{get planner(){return e(qe)},deletecb:()=>r.planner.deleteChild(e(z))})},Qe=Ve=>{var Ne=jr(),Se=c(Ne);let ot;Se.__click=[Sr,W,z,r];var mt=c(Se);{var _t=ve=>{var re=Er(),Fe=f(c(re),2);Te(Fe,{get itemId(){return e(z)}});var je=f(Fe,2),ze=c(je,!0);o(je),o(re),j(We=>{Ye(je,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),V(ze,We)},[()=>Math.round(e(W)*100)/100]),v(ve,re)},xt=(ve,re)=>{{var Fe=je=>{var ze=Ar(),We=f(c(ze),2);Te(We,{get itemId(){return e(z)}});var at=f(We,2),kt=c(at,!0);o(at),o(ze),j(wt=>{Ye(at,`padding-left: ${(r.planner.depth+.5)*1.1}rem`),V(kt,wt)},[()=>Math.round(e(W)*100)/100]),v(je,ze)};E(ve,je=>{e(z)!==l()&&e(W)!==0&&je(Fe)},re)}};E(mt,ve=>{var re;e(W)<0&&((re=P.producedVia[e(z)])==null?void 0:re.length)>0?ve(_t):ve(xt,!1)})}o(Se);var It=f(Se,2);{var yt=ve=>{var re=Or();let Fe;var je=c(re);zt(je,{get itemId(){return e(z)}}),o(re),j(ze=>Fe=me(re,1,"flex gap-2 items-center ",null,Fe,ze),[()=>({"text-green-500":e(W)>0,"text-red-500":e(W)<0})]),v(ve,re)};E(It,ve=>{e(z)!==l()&&e(W)!==0&&ve(yt)})}o(Ne),j(ve=>{var re;ot=me(Se,1,"dark:bg-slate-800 bg-slate-200   text-center rounded-r-lg",null,ot,ve),Se.disabled=e(W)>0||!((re=P.producedVia[e(z)])!=null&&re.length)},[()=>{var ve,re;return{"dark:hover:bg-green-800":e(W)<0&&((ve=P.producedVia[e(z)])==null?void 0:ve.length)>0,"hover:bg-green-200":e(W)<0&&((re=P.producedVia[e(z)])==null?void 0:re.length)>0}}]),v(Ve,Ne)};E(se,Ve=>{e(qe)?Ve(Ze):Ve(Qe,!1)})}v(C,M)}),v(ne,he)}),o($),v(H,$)};E(J,H=>{var $;(($=_())==null?void 0:$.size)>0&&H(Be)})}v(p,Ae),we(),a()}Ce(["click"]);var Dr=x('<img class="h-6" alt="">');function Vr(p,r){ke(r,!0);let t=R(()=>P.recipe[r.recipeId]);const a=R(()=>{var d;return(d=e(t))==null?void 0:d.IconPath.split("/")}),n=R(()=>e(a)&&e(a)[e(a).length-1]),s=R(()=>e(n)&&rt+`/dsp_sprites/${e(n)}.png`);var i=_e(),l=Z(i);Je(l,()=>r.recipeId,d=>{var b=_e(),g=Z(b);{var h=m=>{var T=Dr();j(()=>Ge(T,"src",e(s))),v(m,T)},_=m=>{const T=R(()=>{var y,k;return(k=(y=e(t))==null?void 0:y.Results)==null?void 0:k[0]});Te(m,{get itemId(){return e(T)}})};E(g,m=>{e(n)?m(h):m(_,!1)})}v(d,b)}),v(p,i),we()}var Fr=x('<label for="recipeName" class="py-2 text-center">ingredient or recipe name</label> <input id="recipeName">',1),zr=x('<div class="flex flex-col items-stretch group w-full "><a class="  dark:hover:bg-slate-700 hover:bg-slate-300  md:px-4 md:py-2 w-full flex gap-2"><span class="w-8"><!></span><span class="flex-grow"> </span></a></div>'),Hr=x('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur bg-gray-50/70  dark:bg-gray-950/70 lg:dark:bg-transparent lg:bg-transparent "><!> <!></div> <!>',1);function vt(p,r){ke(r,!0);let t=xe(it([])),a=nt(),n=nt(),s=nt(),i=xe(""),l=R(()=>r.recipeName??e(i)),d=R(()=>e(l)?P.items.filter(u=>{var w;return u.Name.toLowerCase().includes((w=e(l))==null?void 0:w.toLowerCase())}).map(u=>u.ID):[]),b=R(()=>(()=>{const u=new Set;return e(d).forEach(w=>{for(const B of P.relatedRecipes[w]??[])u.add(B)}),u})()),g=R(()=>P.recipees.filter(u=>e(t).length>0?e(t).includes(u.Type):!0).filter(u=>e(l)?e(b).has(u.ID):!0).filter(u=>a.checked===null?!0:a.checked?P.buildableRecipees.has(u.ID):!P.buildableRecipees.has(u.ID)).filter(u=>n.checked===null?!0:n.checked?P.fluidRecipees.has(u.ID):!P.fluidRecipees.has(u.ID)).filter(u=>s.checked===null?!0:s.checked?P.entityRecipees.has(u.ID):!P.entityRecipees.has(u.ID)));new Set(P.recipees.map(u=>u.Type));var h=Hr(),_=Z(h),m=c(_);E(m,u=>{});var T=f(m,2);{var y=u=>{var w=Ue();j(B=>V(w,B),[()=>r.children()]),v(u,w)},k=u=>{var w=_e(),B=Z(w);{var N=A=>{},q=A=>{var S=Fr(),Q=f(Z(S),2);et(Q),tt(Q,()=>e(i),X=>ee(i,X)),v(A,S)};E(B,A=>{r.recipeName!==void 0?A(N):A(q,!1)})}v(u,w)};E(T,u=>{r.children?u(y):u(k,!1)})}o(_);var I=f(_,2);Ie(I,17,()=>e(g),ye,(u,w)=>{var B=zr(),N=c(B),q=c(N),A=c(q);Vr(A,{get recipeId(){return e(w).ID}}),o(q);var S=f(q),Q=c(S,!0);o(S),o(N),o(B),j(X=>{Ge(N,"href",X),V(Q,e(w).Name)},[()=>st.recipe(e(w).ID)]),v(u,B)}),v(p,h),we()}Ce(["click"]);var Lr=(p,r)=>ee(r,!e(r)),Ur=(p,r,t,a)=>r(e(t),e(a)),Gr=x("<button><!> <span> </span></button>"),Jr=x('<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 rounded-t"> </h4> <div class="flex dark:bg-gray-600 bg-slate-100 "></div></div>'),Kr=x("<div></div> <!>",1),Zr=x(`<button>default tier for
	new factories <span class="ml-auto shadow-2xl"><!></span></button> <!>`,1);function Qr(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(s,"$defaultTierReadable",t);let s=be.defaultTier;n();let i=xe(!0);const l=(I,u)=>{const w={...n(),[I]:u};localStorage.setItem("defaultTiers",JSON.stringify(w)),be.defaultTier.set(w)};var d=Zr(),b=Z(d);b.__click=[Lr,i];let g;var h=f(c(b)),_=c(h);{var m=I=>{var u=Ue("🔼");v(I,u)},T=I=>{var u=Ue("🔽");v(I,u)};E(_,I=>{e(i)?I(m):I(T,!1)})}o(h),o(b);var y=f(b,2);{var k=I=>{var u=Kr(),w=f(Z(u),2);Ie(w,1,()=>Object.keys(n()),ye,(B,N)=>{var q=_e(),A=Z(q);{var S=Q=>{var X=Jr(),le=c(X),G=c(le,!0);o(le);var U=f(le,2);Ie(U,21,()=>be.availableTiers[e(N)],ye,(ge,de)=>{var ie=Gr();const ce=R(()=>be.factoryItems[e(N)][e(de)]),te=R(()=>e(de)===n()[e(N)]);let Me;ie.__click=[Ur,l,N,de];var Ae=c(ie);Te(Ae,{get itemId(){return e(ce)}});var pe=f(Ae,2),ae=c(pe,!0);o(pe),o(ie),j(oe=>{Me=me(ie,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2  rounded-lg",null,Me,oe),V(ae,e(de))},[()=>({"dark:outline-amber-100":e(te),"outline-1":e(te),active:e(te),"dark:bg-slate-500":e(te),"bg-white":e(te),"dark:hover:bg-slate-400":e(te),"dark:text-white":e(te),"dark:hover:bg-slate-700":!e(te),"dark:text-gray-300":!e(te),"dark:bg-slate-800":!e(te),"bg-slate-200":!e(te)})]),v(ge,ie)}),o(U),o(X),j(()=>V(G,e(N))),v(Q,X)};E(A,Q=>{var X;((X=be.availableTiers[e(N)])==null?void 0:X.length)>1&&Q(S)})}v(B,q)}),v(I,u)};E(y,I=>{e(i)&&I(k)})}j(I=>g=me(b,1,"dark:bg-blue-800 dark:hover:bg-blue-700 bg-blue-300 hover:bg-blue-400 hover:shadow-2xl  rounded-t py-5 px-4 flex",null,g,I),[()=>({"bg-blue-300":!e(i),"bg-blue-400":e(i)})]),v(p,d),we(),a()}Ce(["click"]);var Wr=(p,r)=>ee(r,"bulidings"),Xr=(p,r)=>ee(r,"throughput"),Yr=x('<div class="relative"><em class="absolute w-full h-full text-right left-0 top-0 dark:backdrop-brightness-85 bg-white/50 dark:bg-black/30 "> </em> <!></div>'),$r=x('<div class="opacity-70 scale-90"><!></div>'),ea=x('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 dark:backdrop-brightness-75 "> </span></div>'),ta=x('<div class="flex flex-col"><!></div>'),ra=x('<div class="dark:odd:bg-gray-950 odd:bg-gray-200 py-1"><div class="gap-3 px-2 flex items-center justify-between"><div class="justify-self-center w-14 text-center p-0.5 flex flex-col"></div> <span class="flex-grow"> </span> <!></div></div>'),aa=x('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0 gap-0.5"><h4 class="px-4 py-2 dark:bg-slate-800 bg-slate-200 rounded-t-lg flex items-center"><span class="flex-grow">required</span> <button>buildings</button> <button>conveyors</button></h4> <!></div>');function na(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(d,"$itemId",t),s=()=>D(l,"$requiredBuildingsByRecipeId",t),i=()=>D(b,"$defaultTier",t);let{requiredBuildingsByRecipeId:l,itemId:d}=r.planner,{defaultTier:b}=be,g=xe("bulidings");var h=aa(),_=c(h),m=f(c(_),2);let T;m.__click=[Wr,g];var y=f(m,2);let k;y.__click=[Xr,g],o(_);var I=f(_,2);Je(I,n,u=>{var w=_e(),B=Z(w);Ie(B,1,()=>Object.entries(s()),ye,(N,q)=>{var A=_e();const S=R(()=>{const[le,G]=e(q);return{recipeId:le,requiredBuildings:G}});var Q=Z(A);{var X=le=>{var G=ra();const U=R(()=>P.recipe[Number(e(S).recipeId)]),ge=R(()=>i()[e(U).Type]/e(U).TimeSpend);var de=c(G),ie=c(de);Ie(ie,21,()=>e(U).Results,ye,(ae,oe,Pe)=>{var ue=Yr();const Re=R(()=>e(S).requiredBuildings*e(ge)*e(U).ResultCounts[Pe]*60);var fe=c(ue),Oe=c(fe);o(fe);var O=f(fe,2);Te(O,{get itemId(){return e(oe)}}),o(ue),j(Y=>V(Oe,`${Y??""}/s`),[()=>Math.round(e(Re)*100)/100]),v(ae,ue)}),o(ie);var ce=f(ie,2),te=c(ce,!0);o(ce);var Me=f(ce,2);{var Ae=ae=>{var oe=ea();const Pe=R(()=>String(Math.round(e(S).requiredBuildings*10)/10)),ue=R(()=>e(Pe).indexOf(".")),Re=R(()=>e(ue)===-1?1:0);var fe=c(oe),Oe=c(fe);Je(Oe,i,F=>{var J=$r(),Be=c(J);Te(Be,{get itemId(){var H;return be.factoryItems[(H=e(U))==null?void 0:H.Type][i()[e(U).Type]]}}),o(J),v(F,J)}),o(fe);var O=f(fe,2),Y=c(O,!0);o(O),o(oe),j(()=>{Ye(oe,`padding-right: ${e(Re)+.5}em`),V(Y,e(Pe))}),v(ae,oe)},pe=(ae,oe)=>{{var Pe=ue=>{var Re=_e(),fe=Z(Re);Ie(fe,17,()=>e(U).Results,ye,(Oe,O,Y)=>{var F=ta();const J=R(()=>e(S).requiredBuildings*e(ge)*e(U).ResultCounts[Y]*60);var Be=c(F);ft(Be,{get outputs(){return e(J)}}),o(F),v(Oe,F)}),v(ue,Re)};E(ae,ue=>{e(g)==="throughput"&&ue(Pe)},oe)}};E(Me,ae=>{e(g)==="bulidings"?ae(Ae):ae(pe,!1)})}o(de),o(G),j(()=>{var ae;return V(te,((ae=e(U))==null?void 0:ae.Name)??"recipe"+e(S).recipeId)}),v(le,G)};E(Q,le=>{e(S).recipeId&&le(X)})}v(N,A)}),v(u,w)}),o(h),j((u,w)=>{T=me(m,1," px-4 py-2 rounded-l-lg  outline-gray-600 ",null,T,u),k=me(y,1,"hover:bg-slate-500 px-4 py-2  rounded-r-lg  outline-gray-600",null,k,w)},[()=>({"bg-blue-300":e(g)==="bulidings","bg-gray-300":e(g)!=="bulidings","hover:bg-blue-500":e(g)==="bulidings","hover:bg-gray-500":e(g)!=="bulidings","dark:bg-blue-700":e(g)==="bulidings","dark:bg-gray-700":e(g)!=="bulidings"}),()=>({"bg-blue-300":e(g)==="throughput","bg-gray-300":e(g)!=="throughput","dark:bg-blue-700":e(g)==="throughput","dark:bg-gray-700":e(g)!=="throughput","hover:bg-blue-500":e(g)==="throughput","hover:bg-gray-500":e(g)!=="throughput"})]),v(p,h),we(),a()}Ce(["click"]);var sa=x('<link rel="icon">'),la=x('<span class="dark:bg-slate-700/70 bg-slate-300/70 w-full py-2 px-12">Factory Globals</span>'),ia=(p,r)=>r(),oa=(p,r)=>ee(r,!1),da=x('<div class="md:px-5 flex flex-col  gap-2 "><!> <span class="flex-grow"></span> <button class="dark:bg-green-800 dark:hover:bg-green-700  bg-green-300 hover:bg-green-400 w-full py-1">apply to existing</button> <button class="dark:bg-green-800 dark:hover:bg-green-700 bg-green-300 hover:bg-green-400 w-full py-1">apply to future</button></div>'),ca=(p,r)=>e(r).setInterval(0),ua=(p,r,t)=>e(r).setInterval(t),va=(p,r)=>e(r).setInterval(60),ga=x("<button>Second</button>"),ba=(p,r)=>ee(r,!e(r)),pa=(p,r)=>ee(r,!0),fa=x('<div class="flex w-full px-12 py-0.5 dark:bg-blue-700/70 bg-blue-300/70 "><label for="recipeName" class="py-2 text-center w-1/3 ">ingredient or recipe name</label> <input id="recipeName" class="flex-grow"></div>'),ha=x('<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap"><div class="lg:max-w-sm lg:block hidden max-h-screen  ml-auto overflow-y-auto"><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto"><div class="flex  text-sm py-1 gap-2"><span class="px-3 py-1 dark:bg-slate-800 bg-slate-200 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <!></span></span> <span class="px-3 py-3 flex-grow text-right"></span> <button> </button> <button class="px-3 py-3 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-l-lg">⚙️</button></div> <!></div> <!></div> <!>',1);function Ea(p,r){ke(r,!0);const[t,a]=Ke(),n=()=>D(b,"$defaultTier",t),s=()=>D(e(T),"$header",t),i=()=>D(e(m),"$timeSpendChanged",t),l=()=>D(e(h),"$targetInterval",t),d=()=>D(e(_),"$timeSpend",t);let{defaultTier:b}=be,g=R(()=>new $e(r.data.recipeId,void 0,void 0,void 0,void 0,r.data.depth,r.data.targetAmount)),h=R(()=>e(g).targetInterval),_=R(()=>e(g).timeSpend),m=R(()=>e(g).timeSpendChanged),T=R(()=>e(g).header);const y=60*60;let k=xe(!1),I=xe(!1);const u=O=>{O||(O=e(g));const Y=Le(O.recipe);if(Y){const F=Y.Type,J=n()[F];O.tier.set(J)}Le(O.children).forEach(F=>u(F)),ee(k,!1)};let w=xe("");var B=ha();Dt(O=>{var Y=sa();j(()=>{var F,J;Mt.title=(F=s())==null?void 0:F[1],Ge(Y,"href",(J=s())==null?void 0:J[0])}),v(O,Y)});var N=Z(B);{var q=O=>{lt(O,{close:()=>ee(k,!1),header:F=>{var J=la();v(F,J)},children:(F,J)=>{var Be=da(),H=c(Be);Qr(H,{});var $=f(H,4);$.__click=[ia,u];var ne=f($,2);ne.__click=[oa,k],o(Be),v(F,Be)},$$slots:{default:!0}})};E(N,O=>{e(k)&&O(q)})}var A=f(N,2),S=c(A),Q=c(S);vt(Q,{}),o(S);var X=f(S,2),le=c(X),G=c(le),U=f(c(G)),ge=c(U);let de;ge.__click=[ca,g];var ie=c(ge);o(ge);var ce=f(ge,2);let te;ce.__click=[ua,g,y];var Me=f(ce,2);{var Ae=O=>{var Y=ga();let F;Y.__click=[va,g],j(J=>F=me(Y,1,"px-1.5 py-2 multi hover:bg-slate-700",null,F,J),[()=>({active:l()===60})]),v(O,Y)};E(Me,O=>{d()!==60&&O(Ae)})}o(U),o(G);var pe=f(G,4);let ae;pe.__click=[ba,I];var oe=c(pe,!0);o(pe);var Pe=f(pe,2);Pe.__click=[pa,k],o(le);var ue=f(le,2);Je(ue,()=>e(g),O=>{ht(O,{get planner(){return e(g)}})}),o(X);var Re=f(X,2);Je(Re,()=>e(g),O=>{na(O,{get planner(){return e(g)}})}),o(A);var fe=f(A,2);{var Oe=O=>{lt(O,{close:()=>ee(I,!1),header:F=>{var J=fa(),Be=f(c(J),2);et(Be),o(J),tt(Be,()=>e(w),H=>ee(w,H)),v(F,J)},children:(F,J)=>{vt(F,{get recipeName(){return e(w)}})},$$slots:{default:!0}})};E(fe,O=>{e(I)&&O(Oe)})}j((O,Y,F,J)=>{de=me(ge,1,"px-1.5 py-2 multi hover:bg-slate-700",null,de,O),V(ie,`Cycle (${Y??""}s)`),te=me(ce,1,"px-1.5 py-2 multi hover:bg-slate-700",null,te,F),ae=me(pe,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg lg:hidden",null,ae,J),V(oe,e(I)?"✖️":"🔍")},[()=>({"animate-flash":i(),active:l()===d()}),()=>Math.round(d()/60*100)/100,()=>({active:l()===y}),()=>({"dark:bg-slate-600":e(I),"dark:bg-slate-800":!e(I)})]),v(p,B),we(),a()}Ce(["click"]);export{Ea as component,Sa as universal};
