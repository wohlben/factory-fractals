var St=Object.defineProperty;var Nt=(c,t,a)=>t in c?St(c,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[t]=a;var oe=(c,t,a)=>Nt(c,typeof t!="symbol"?t+"":t,a);import{c as Be,t as m,a as g,b as Ke}from"../chunks/B2N7zt_S.js";import{al as qt,aH as Ot,$ as Et,k as Dt,q as st,F as jt,M as Mt,l as At,u as Ct,U as Vt,p as De,f as Q,t as F,g as e,e as k,a as je,b as Pe,s as v,c as d,r as s,h as ae,n as Ue,P as xt,aI as Ft}from"../chunks/DKycTyQU.js";import{d as ze,s as J,e as Jt,a as zt}from"../chunks/bPv9y2md.js";import{i as j}from"../chunks/DgLyW3V9.js";import{s as et,r as rt,a as bt,L as gt,b as Lt}from"../chunks/DFTatlqr.js";import{t as Ht,s as fe,c as dt,b as Ut,o as vt}from"../chunks/Xa_5A0IR.js";import{s as Qe,a as Z}from"../chunks/DihnOsDB.js";import{D as y,e as ke,i as we,I as Gt}from"../chunks/BZ_lMHHJ.js";import{w as qe,g as Ge,d as ce}from"../chunks/C3ysPMtx.js";import{a as ct,o as Kt}from"../chunks/D9njOSYw.js";import{p as ft}from"../chunks/fW3SM2ok.js";import{s as pt}from"../chunks/DMSeiAlF.js";function Ze(c,t,a){st&&jt();var n=c,l=Vt,r,o=qt()?Ot:Et;Dt(()=>{o(l,l=t())&&(r&&Mt(r),r=At(()=>a(n)))}),st&&(n=Ct)}function it(c,t,a,n){var l=c.__style;if(st||l!==t){var r=Ht(t);(!st||r!==c.getAttribute("style"))&&(r==null?c.removeAttribute("style"):c.style.cssText=r),c.__style=t}return n}const Zt=!1,Qt=({params:c,url:t})=>{const{id:a}=c,n=Number(a),l=t.searchParams.get("depth"),r=t.searchParams.get("targetAmount");return{recipeId:n,depth:l&&parseInt(l)||null,targetAmount:r&&parseInt(r)||1}},tn=Object.freeze(Object.defineProperty({__proto__:null,load:Qt,prerender:Zt},Symbol.toStringTag,{value:"Module"})),Wt=()=>{const c=localStorage==null?void 0:localStorage.getItem("defaultTiers");if(c){const t=JSON.parse(c);return Object.keys(t).forEach(a=>{It[a].find(n=>n===t[a])||(t[a]=yt[a],console.log(a,t[a]))}),qe(t)}},Xt=()=>{const c=localStorage==null?void 0:localStorage.getItem("defaultInterval");if(c){const t=JSON.parse(c),a=t==null?void 0:t.interval;if(Object.values(ea).includes(a))return qe(a)}return qe(null)},Yt=()=>{const c=localStorage==null?void 0:localStorage.getItem("defaultDepth");if(c){const t=JSON.parse(c),a=t==null?void 0:t.depth;return qe(a??1)}return qe(1)},$t=()=>{const c=localStorage==null?void 0:localStorage.getItem("defaultRecipes"),t={};if(c){const a=JSON.parse(c);Object.entries(a).forEach(([n,l])=>{const r=Number(n),o=l&&Number(l);(o===null&&(y.canBeExtracted[r]||y.canBeMined[r])||o&&y.relatedRecipes[r].has(o))&&(t[r]=o)})}return qe(t)},It={Smelt:[1,2,3],Assemble:[.75,1,1.5,3],Research:[1,3],Refine:[1],Chemical:[1,2],Particle:[1],Fractionate:[1],Proliferator:[0,.125,.2,.25]},yt={Smelt:1,Assemble:.75,Research:1,Chemical:1,Refine:1,Particle:1,Fractionate:1,Proliferator:0},ea={cycle:null,minute:60*60,second:60},pe={defaultTier:Wt()??qe(yt),availableTiers:It,defaultInterval:Xt(),defaultDepth:Yt(),defaultRecipes:$t(),factoryItems:{Smelt:{1:2302,2:2315,3:2319},Assemble:{.75:2303,1:2304,1.5:2305,3:2318},Research:{1:2901,3:2902},Chemical:{1:2309,2:2317},Refine:{1:2308},Particle:{1:2310},Fractionate:{1:2314},Proliferator:{0:null,.125:1141,.2:1142,.25:1143}}};class ta{constructor(t,a,n,l,r,o,i){this.recipeId=t,this.itemId=a,this.targetAmount=n,this.targetInterval=l,this.tier=r,this.proliferator=o,this.timeSpend=i}}const $e=(c,t)=>{const a={...c};return Object.entries(t).forEach(([n,l])=>{const r=Number(n);a[r]=(a[r]??0)+l}),a};class ot extends ta{constructor(a,n,l,r,o=0,i=1,u){var N;const f=!!(n&&(y.canBeExtracted[n]||y.canBeMined[n]));if(!a&&n){const P=Ge(pe.defaultRecipes)[n];P&&(a=P)}!a&&!f&&(a=(N=y.alternativeRecipe[n])==null?void 0:N[0]);const x=qe(a),p=a?y.recipe[a]:void 0;let _=p==null?void 0:p.Results.findIndex(P=>n===P);const h=!n;!n&&(_??-1)>=0&&(n=p==null?void 0:p.Results[_??0]);const T=qe(n),w=qe((p==null?void 0:p.ResultCounts[_??0])??u??1),S=l?ce([T,l],([P,C])=>C[P]):w,O=qe(p!=null&&p.Type?Ge(pe.defaultTier)[p.Type]:1),b=qe(Ge(pe.defaultTier).Proliferator),R=qe(Ge(pe.defaultInterval)??null),I=ce([x,O],([P,C])=>{var M;return((M=y.recipe[P])==null?void 0:M.TimeSpend)/C});r||(r=R);super(x,T,S,r,O,b,I);oe(this,"amountEditable");oe(this,"manualAmount",qe());oe(this,"manualInterval");oe(this,"children",qe([]));oe(this,"canBeMined",ce(this.itemId,a=>y.canBeMined[a]));oe(this,"canBeExtracted",ce(this.itemId,a=>y.canBeExtracted[a]));oe(this,"item",ce(this.itemId,a=>y.item[a]));oe(this,"recipe",ce(this.recipeId,a=>y.recipe[a]));oe(this,"header",ce([this.itemId,this.recipe],([a,n])=>{var u;const l=a??((u=n==null?void 0:n.Results)==null?void 0:u[0]);if(!l)return;const r=y.item[l],o=r.IconPath.split("/"),i=o[o.length-1];return i&&[ct+`/dsp_sprites/${i}.png`,r.Name]}));oe(this,"options",ce(this.itemId,a=>y.alternativeRecipe[a]));oe(this,"timeSpendChanged",ce(this.timeSpend,(a,n)=>{n(!!a);const l=setTimeout(()=>n(!a),1400);return()=>clearTimeout(l)}));oe(this,"relativeSpeed",ce([this.targetInterval,this.timeSpend],([a,n])=>a?a/n:1));oe(this,"requiredBuildings",ce([this.targetAmount,this.recipe,this.itemId,this.relativeSpeed,this.proliferator],([a,n,l,r,o])=>{const i=n==null?void 0:n.Results.findIndex(f=>l===f),u=a/(n==null?void 0:n.ResultCounts[i])/r;return isNaN(u)?a:u}));oe(this,"providedItemsPerInterval",ce([this.recipe,this.relativeSpeed,this.requiredBuildings,this.itemId,this.targetAmount],([a,n,l,r,o])=>{if(!a&&r&&(y.canBeMined[r]||y.canBeExtracted[r]))return{[r]:o};const i={};return a==null||a.Results.forEach((u,f)=>{i[u]=a.ResultCounts[f]*n*l}),i}));oe(this,"childrenProvideItemsPerInterval",ce(this.children,(a,n)=>{const l=new Array(a.length),r=a.map((i,u)=>i.providedItemsPerInterval.subscribe(f=>{l[u]=f;const x=l.filter(p=>!!p).reduce((p,_)=>$e(p,_),{});n(x)})),o=l.filter(i=>!!i).reduce((i,u)=>$e(i,u),{});return n(o),()=>r.forEach(i=>i())}));oe(this,"requiredBuildingsByRecipeId",ce([this.children,this.recipeId,this.requiredBuildings],([a,n,l],r)=>{const o=new Array(a.length),i=a.map((f,x)=>f.requiredBuildingsByRecipeId.subscribe(p=>{o[x]=p;const _=o.filter(h=>!!h).reduce((h,T)=>$e(h,T),{});if(n){const h=n;_[h]=(_[h]??0)+l}r(_)})),u=o.filter(f=>!!f).reduce((f,x)=>$e(f,x),{});if(n){const f=n;u[f]=(u[f]??0)+l}return r(u),()=>i.forEach(f=>f())}));oe(this,"fabsByType",ce(this.requiredBuildingsByRecipeId,a=>Object.entries(a).reduce((n,[l,r])=>{const o=Number(l),i=y.recipe[o].Type;return n[i]=(n[i]??0)+Math.ceil(r),n},{})));oe(this,"childrenByItemId",ce(this.children,(a,n)=>{const l=new Array(a.length),r=a.map((i,u)=>i.itemId.subscribe(f=>{l[u]=[f,i];const x=l.filter(p=>!!p).reduce((p,[_,h])=>(p[_]=h,p),{});n(x)})),o=l.filter(i=>!!i).reduce((i,[u,f])=>(i[u]=f,i),{});return n(o),()=>r.forEach(i=>i())}));oe(this,"requiredItemsPerInterval",ce([this.recipe,this.relativeSpeed,this.requiredBuildings],([a,n,l])=>{const r={};return a==null||a.Items.forEach((o,i)=>r[o]=a.ItemCounts[i]*n*l),r}));oe(this,"deficitRequiredItemsPerInterval",ce([this.recipe,this.relativeSpeed,this.requiredBuildings],([a,n,l])=>{const r={};return a==null||a.Items.forEach((o,i)=>r[o]=-(a.ItemCounts[i]*n*l)),r}));oe(this,"inputsOutputs",ce([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval],([a,n,l])=>{const r=new Set;return Object.keys(n).forEach(o=>{r.add(Number(o))}),Object.keys(a??{}).forEach(o=>{r.add(Number(o))}),Object.keys(l).forEach(o=>{r.add(Number(o))}),r}));oe(this,"surplus",ce([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval,this.providedItemsPerInterval,this.itemId],([a,n,l,r])=>{const o=$e(a,l);return Object.entries(n).forEach(([i,u])=>o[Number(i)]=(o[Number(i)]??0)-u),Object.entries(o).filter(([,i])=>i<=0).forEach(([i])=>delete o[Number(i)]),o}));oe(this,"deficit",ce([this.childrenProvideItemsPerInterval,this.requiredItemsPerInterval],([a,n])=>{const l={...a};return Object.entries(n).forEach(([r,o])=>l[Number(r)]=(l[Number(r)]??0)-o),Object.entries(l).filter(([,r])=>r>=0).forEach(([r])=>delete l[Number(r)]),l}));oe(this,"deficitByItemId",ce([this.children,this.deficit,this.recipeId,this.itemId,this.targetAmount],([a,n,l,r,o],i)=>{const u=new Array(a.length),f=a.map((p,_)=>p.deficitByItemId.subscribe(h=>{u[_]=h;const T=u.filter(w=>!!w).reduce((w,S)=>$e(w,S),l?n:{[r]:-o});i(T)})),x=u.filter(p=>!!p).reduce((p,_)=>$e(p,_),l?n:{[r]:-o});return i(x),()=>f.forEach(p=>p())}));oe(this,"totals",ce([this.itemId,this.requiredBuildings,this.children],([a,n,l])=>{const r={};return r[a]=n,l.map(o=>o.totals).forEach(o=>{Object.entries(o).forEach(([i,u])=>{const f=Number(i);r[f]=(r[f]??0)+u})}),r}));this.depth=o,this.amountEditable=h,this.manualAmount=w,this.manualInterval=R,i>o&&this.children.set(this.dbd(i))}setAmount(a){this.manualAmount.set(a)}setRecipeId(a){this.recipeId.set(a),this.expand()}deleteChild(a){this.children.update(n=>{const l=n.findIndex(r=>Ge(r.itemId)===a);return n.splice(l,1),n})}setInterval(a){this.manualInterval.set(a)}expand(){this.children.set(this.dbd())}planFor(a){const n=ce([this.timeSpend,this.targetInterval],([l,r])=>r===null?l:r);this.children.update(l=>(l.push(new ot(void 0,a,this.requiredItemsPerInterval,n,this.depth+1)),l))}dbd(a){const n=ce([this.timeSpend,this.targetInterval],([o,i])=>i===null?o:i),l=[],r=Ge(this.recipe);return r==null||r.Items.forEach((o,i)=>{var x;if(!((x=y.alternativeRecipe[o])!=null&&x.length))return;const u=new ot(void 0,o,this.requiredItemsPerInterval,n,this.depth+1,a);l.push(u);const f=Ge(u.providedItemsPerInterval);Object.entries(f).forEach(([p,_])=>{})}),l}}var aa=m('<img alt="">');function ye(c,t){De(t,!0);let a=k(()=>y.item[t.itemId]);const n=k(()=>{var u;return(u=e(a))==null?void 0:u.IconPath.split("/")}),l=k(()=>e(n)&&e(n)[e(n).length-1]),r=k(()=>e(l)&&ct+`/dsp_sprites/${e(l)}.png`);var o=Be(),i=Q(o);Ze(i,()=>t.itemId,u=>{var f=aa();let x;F(p=>{et(f,"src",e(r)),x=fe(f,1,"",null,x,p)},[()=>({"h-6":t.small!==!1})]),g(u,f)}),g(c,o),je()}var ra=(c,t,a)=>t(e(a)),na=m("<button> <!></button>"),la=m('<div><span class="text-xs text-gray-400">Tier</span> <!></div>'),sa=(c,t)=>ae(t,!0),ia=m('<button class="text-center min-w-16 h-10 rounded-l-lg dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-600 hover:bg-slate-400 py-2 px-3 flex justify-around items-end gap-2 relative  "><span class="top-0 absolute left-0 scale-75 opacity-50"><!></span> <span class="text-xs text-gray-400 absolute top-0"> </span> <b class="bottom-0.5 absolute"> </b></button>');function oa(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(i,"$recipe",a),r=()=>Z(u,"$tier",a),o=()=>Z(f,"$requiredBuildings",a);let{recipe:i,tier:u,requiredBuildings:f}=t.planner,x=Pe(!1);const p=S=>{t.planner.tier.set(S),ae(x,!1)};var _=Be(),h=Q(_);{var T=S=>{var O=la(),b=v(d(O),2);ke(b,1,()=>pe.availableTiers[l().Type],we,(R,I)=>{var N=na();let P;N.__click=[ra,p,I];var C=d(N),M=v(C);ye(M,{get itemId(){var $;return pe.factoryItems[($=l())==null?void 0:$.Type][e(I)]}}),s(N),F($=>{P=fe(N,1,"px-2 py-1 outline-slate-600 dark:hover:bg-slate-600 hover:bg-slate-400 text-sm  rounded",null,P,$),J(C,`${e(I)??""} `)},[()=>({"outline-1":e(I)===r(),active:e(I)===r()})]),g(R,N)}),s(O),g(S,O)},w=S=>{var O=ia();O.__click=[sa,x];var b=d(O),R=d(b);ye(R,{get itemId(){var M;return pe.factoryItems[(M=l())==null?void 0:M.Type][r()]}}),s(b);var I=v(b,2),N=d(I);s(I);var P=v(I,2),C=d(P,!0);s(P),s(O),F(M=>{J(N,`tier ${r()??""}`),J(C,M)},[()=>Math.round(o()*100)/100]),g(S,O)};j(h,S=>{e(x)?S(T):S(w,!1)})}g(c,_),je(),n()}ze(["click"]);var da=m('<div class="flex gap-1 relative justify-center"><!> <span class="absolute  mx-auto text-center top-0 px-1    rounded-3xl bg-white/70 dark:bg-black/30  "> </span></div>');function kt(c,t){const a=o=>{switch(!0){case o<=6:return[[2001,1]];case o<=12:return[[2002,1]];case o<=30:return[[2003,1]];default:const i=Math.ceil(Math.ceil(o)/30),u=Math.ceil(i/4);return[[2014,u>1?4:i],[2003,u]]}};let n=k(()=>a(t.outputs));var l=Be(),r=Q(l);ke(r,17,()=>e(n),we,(o,i)=>{var u=Be(),f=Q(u);{var x=p=>{var _=da(),h=d(_);ye(h,{get itemId(){return e(i)[0]}});var T=v(h,2),w=d(T,!0);s(T),s(_),F(()=>J(w,e(i)[1])),g(p,_)};j(f,p=>{e(i)[1]>0&&p(x)})}g(o,u)}),g(c,l)}var ca=(c,t)=>ae(t,!e(t)),ua=m('<button class="flex  dark:odd:bg-gray-950 odd:bg-gray-100 gap-2 px-2 items-center dark:hover:bg-gray-700 hover:bg-gray-300 w-full group "><span><!></span> <span class="w-14 text-right"> </span> <span class="text-slate-300 text-xs">x</span> <span> </span> <span class="text-slate-400 text-xs "> </span> <em class="text-right flex-grow"> </em> <span class="flex w-18 justify-end gap-1"><!></span></button>');function va(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(r,"$defaultTier",a);let{defaultTier:r}=pe,o=Pe(!0),i=k(()=>y.recipe[Number(t.recipeId)]),u=k(()=>l()[e(i).Type]/e(i).TimeSpend),f=k(()=>e(i).ResultCounts.reduce((H,de)=>de+H,0)),x=k(()=>t.requiredBuildings*e(u)*e(f)*60/(e(o)?t.devisor:1)),p=k(()=>Math.round(e(x)*100)/100);var _=ua();_.__click=[ca,o];var h=d(_);let T;var w=d(h);{var S=H=>{var de=Ke("🔓");g(H,de)},O=H=>{var de=Ke("🔒");g(H,de)};j(w,H=>{e(o)?H(S):H(O,!1)})}s(h);var b=v(h,2),R=d(b,!0);s(b);var I=v(b,4),N=d(I,!0);s(I);var P=v(I,2),C=d(P);s(P);var M=v(P,2),$=d(M);s(M);var ne=v(M,2),ve=d(ne);kt(ve,{get outputs(){return e(x)}}),s(ne),s(_),F((H,de)=>{var ue;T=fe(h,1,"w-4 group-hover:opacity-100",null,T,H),J(R,de),J(N,((ue=e(i))==null?void 0:ue.Name)??"recipe"+t.recipeId),J(C,`tier ${l()[e(i).Type]??""}`),J($,`${e(p)??""}/s`)},[()=>({"opacity-0":e(o)}),()=>Math.round(t.requiredBuildings/(e(o)?t.devisor:1)*100)/100]),g(c,_),je(),n()}ze(["click"]);var ga=m('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300"><span> </span> <span class="text-right flex-grow"> </span></div>'),pa=m('<div class="flex gap-4 dark:hover:bg-gray-700 hover:bg-gray-300 px-1"><span> </span></div>'),fa=m('<div><h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Buildings</h5> <div class="mb-4 my-4 mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">Recipes</h5> <!> <h5 class="dark:bg-blue-900 bg-blue-300 text-center py-1 px-4 mt-4 mb-2">ingress</h5> <div class="mx-auto  grid grid-cols-2 gap-x-8 justify-center px-0.5"></div></div>');function ba(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(u,"$fabsByType",a),r=()=>Z(i,"$requiredBuildingsByRecipeId",a),o=()=>Z(p,"$deficitByItemId",a);let{requiredBuildingsByRecipeId:i,fabsByType:u,recipe:f,requiredBuildings:x,deficitByItemId:p}=t.planner;var _=fa(),h=v(d(_),2);ke(h,5,()=>Object.entries(l()),we,(S,O)=>{var b=ga();const R=k(()=>{const[M,$]=e(O);return{fabType:M,requiredFabs:$}});var I=d(b),N=d(I,!0);s(I);var P=v(I,2),C=d(P,!0);s(P),s(b),F(M=>{J(N,e(R).fabType),J(C,M)},[()=>Math.ceil(e(R).requiredFabs/t.devisor)]),g(S,b)}),s(h);var T=v(h,4);ke(T,1,()=>Object.entries(r()??{}),we,(S,O,b,R)=>{const I=k(()=>{const[N,P]=e(O);return{recipeId:N,requiredBuildings:P}});va(S,{get recipeId(){return e(I).recipeId},get requiredBuildings(){return e(I).requiredBuildings},get devisor(){return t.devisor}})});var w=v(T,4);ke(w,5,()=>Object.entries(o()),we,(S,O)=>{var b=pa();const R=k(()=>{const[P]=e(O);return{itemId:P}});var I=d(b),N=d(I,!0);s(I),s(b),F(()=>J(N,y.item[e(R).itemId].Name)),g(S,b)}),s(w),s(_),g(c,_),je(),n()}var _a=(c,t)=>{var a;return(a=t.close)==null?void 0:a.call(t)},ha=(c,t)=>{var a;return(a=t.close)==null?void 0:a.call(t)},ma=m('<button class="dark:bg-slate-800 dark:hover:bg-slate-700 bg-slate-200 hover:bg-slate-300 w-12 py-2 absolute right-0 top-0 h-full">✖️</button>'),xa=m('<h6 class="flex items-center justify-between sticky top-0  bg-gray-50/70 dark:bg-gray-950/70"><!> <!></h6>'),Ia=m('<button class="fixed overscroll-contain w-screen h-screen backdrop-blur-2xl dark:bg-black opacity-70 top-0 left-0 z-20 cursor-default " aria-label="close"></button> <dialog open class="max-w-2xl w-full h-full max-h-10/12 mx-auto top-1/12 bg-gray-50 dark:bg-gray-950  dark:text-amber-50 fixed outline-1 rounded-2xl outline-slate-600 overflow-y-scroll z-70 flex flex-col  gap-2 scroll-mt-20"><!> <!></dialog>',1);function lt(c,t){De(t,!0),Kt(()=>{var u;return(u=t.close)==null?void 0:u.call(t)});var a=Ia(),n=Q(a);n.__click=[_a,t];var l=v(n,2),r=d(l);{var o=u=>{var f=xa(),x=d(f);pt(x,()=>t.header??Ue);var p=v(x,2);{var _=h=>{var T=ma();T.__click=[ha,t],g(h,T)};j(p,h=>{t.close&&h(_)})}s(f),g(u,f)};j(r,u=>{(t.header||t.close)&&u(o)})}var i=v(r,2);pt(i,()=>t.children),s(l),Jt("scroll",n,u=>{u.stopImmediatePropagation()}),g(c,a),je()}ze(["click"]);var ya=m('<img class="h-6" alt="">');function _t(c,t){De(t,!0);const a=k(()=>t.filename.split("/")),n=k(()=>e(a)&&e(a)[e(a).length-1]),l=k(()=>e(n)&&ct+`/dsp_sprites/${e(n)}.png`);var r=ya();F(()=>et(r,"src",e(l))),g(c,r),je()}var ka=(c,t)=>{var a;return(a=t.deletecb)==null?void 0:a.call(t)},wa=m(`<style scoped="">input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* display: none; <- Crashes Chrome on hover */
            -webkit-appearance: none;
            margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
        }

        input[type=number] {
            -moz-appearance: textfield;
        }</style> <label class="flex items-center pl-2 gap-1"><!> <input type="number" class="text-left rounded-r-lg w-16 outline-none"></label>`,1),Ba=m('<div class="flex items-center"><span class="pl-2">🗑️</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),Ra=m("<button><!></button>");function Pa(c,t){De(t,!0);let a=Pe(ft(t.targetAmount));xt(()=>{t.planner.amountEditable&&t.targetAmount!==e(a)&&t.planner.setAmount(e(a))});var n=Ra();n.__click=[ka,t];let l;var r=d(n);{var o=u=>{var f=wa(),x=v(Q(f),2),p=d(x);{var _=w=>{_t(w,{get filename(){return t.recipe.IconPath}})},h=w=>{const S=k(()=>{var O,b;return(b=(O=t.recipe)==null?void 0:O.Results)==null?void 0:b[0]});ye(w,{get itemId(){return e(S)}})};j(p,w=>{var S;(S=t.recipe)!=null&&S.IconPath?w(_):w(h,!1)})}var T=v(p,2);rt(T),s(x),dt(T,()=>e(a),w=>ae(a,w)),g(u,f)},i=u=>{var f=Ba(),x=v(d(f),2);{var p=w=>{_t(w,{get filename(){return t.recipe.IconPath}})},_=w=>{ye(w,{get itemId(){return t.itemId}})};j(x,w=>{var S;(S=t.recipe)!=null&&S.IconPath?w(p):w(_,!1)})}var h=v(x,2),T=d(h,!0);s(h),s(f),F(w=>{it(h,`padding-left: ${t.planner.depth*1.1}rem`),J(T,w)},[()=>Math.round(t.targetAmount*100)/100]),g(u,f)};j(r,u=>{t.planner.amountEditable?u(o):u(i,!1)})}s(n),F(u=>{n.disabled=!t.deletecb||!t.planner,l=fe(n,1,"dark:bg-slate-800 bg-slate-200  text-center rounded-r-lg  outline-slate-500",null,l,u)},[()=>({"dark:hover:bg-red-700":!t.planner.amountEditable,"hover:bg-red-300":!t.planner.amountEditable,"outline-1":t.planner.amountEditable})]),g(c,n),je()}ze(["click"]);var Ta=m('<h3 class="dark:bg-blue-800 bg-blue-300 py-2 px-4  text-center w-full"><input class="w-24" type="number"> <span class="text-xs dark:text-slate-400 text-slate-700">x</span> <span class="w-14 text-right"> </span> <span> </span></h3>'),Sa=(c,t)=>ae(t,!1),Na=m('<!> <button class="dark:bg-green-800 bg-green-200 dark:hover:bg-green-700 hover:bg-green-300 py-2 rounded-xl mt-auto">close</button>',1),qa=m("<option><!> </option>"),Oa=m("<option> </option>"),Ea=m('<a class="dark:bg-gray-800 bg-gray-200 dark:hover:bg-slate-700 hover:bg-slate-300">➡️</a>'),Da=m('<select class="my-1 truncate contain-content"><!><!></select> <!>',1),ja=m('<a class="dark:bg-gray-800 dark:hover:bg-slate-700 bg-gray-200 hover:bg-slate-300">➡️</a>'),Ma=(c,t)=>ae(t,!0),Aa=m('<button class="py-1 rounded-xl px-4 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300">🔎</button>'),Ca=m('<span class="flex-grow"> <!></span> <!>',1),Va=m('<div class="ml-auto"><!></div>'),Fa=(c,t,a,n)=>{var l;return e(t)<0&&((l=y.producedVia[e(a)])==null?void 0:l.length)>0&&n.planner.planFor(e(a))},Ja=m('<div class="flex items-center"><span class="pl-2">📝</span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),za=m('<div class="flex items-center"><span class="px-3.5"></span>️ <!> <span class="text-sm py-2 block pr-4"> </span></div>'),La=m("<div><!></div>"),Ha=m('<div class="flex gap-2 dark:hover:bg-gray-700 hover:bg-gray-300"><button><!></button> <!></div>'),Ua=m('<div class="flex flex-col gap-0.5 "></div>'),Ga=m('<!> <div class="flex gap-1 max-w-2xl items-center dark:hover:bg-gray-700 hover:bg-gray-300  flex-wrap @container"><!> <div class="flex-grow px-4 "><div class="flex items-center gap-4"><!></div></div> <!></div> <!>',1);function wt(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(I,"$recipeId",a),r=()=>Z(N,"$requiredBuildings",a),o=()=>Z(R,"$recipe",a),i=()=>Z(b,"$itemId",a),u=()=>Z(M,"$targetAmount",a),f=()=>Z(de,"$options",a),x=()=>Z(O,"$item",a),p=()=>Z(P,"$children",a),_=()=>Z(H,"$inputsOutputs",a),h=()=>Z(ne,"$providedItemsPerInterval",a),T=()=>Z($,"$childrenProvideItemsPerInterval",a),w=()=>Z(ve,"$requiredItemsPerInterval",a),S=()=>Z(C,"$childrenByItemId",a);let{item:O,itemId:b,recipe:R,recipeId:I,requiredBuildings:N,children:P,childrenByItemId:C,targetAmount:M,childrenProvideItemsPerInterval:$,providedItemsPerInterval:ne,requiredItemsPerInterval:ve,inputsOutputs:H,options:de,header:ue}=t.planner,Te=Pe(ft(l())),Re=Pe(!1);xt(()=>{e(Te)!==l()&&t.planner.setRecipeId(e(Te))});let Oe=Pe(1),Ae=k(()=>!e(Oe)||isNaN(e(Oe))?1:e(Oe)),Ce=k(()=>Math.ceil(r()/e(Ae)));var Ve=Ga(),be=Q(Ve);{var Se=ie=>{lt(ie,{close:()=>ae(Re,!1),header:Y=>{var D=Ta(),te=d(D);rt(te);var G=v(te,4),K=d(G,!0);s(G);var Ie=v(G,2),E=d(Ie);s(Ie),s(D),F(()=>{J(K,e(Ce)),J(E,`${o().Name??""}s`)}),dt(te,()=>e(Oe),V=>ae(Oe,V)),g(Y,D)},children:(Y,D)=>{var te=Na(),G=Q(te);ba(G,{get planner(){return t.planner},get devisor(){return e(Ae)}});var K=v(G,2);K.__click=[Sa,Re],g(Y,te)},$$slots:{default:!0}})};j(be,ie=>{e(Re)&&ie(Se)})}var q=v(be,2),A=d(q);Pa(A,{get planner(){return t.planner},get recipe(){return o()},get itemId(){return i()},get targetAmount(){return u()},get deletecb(){return t.deletecb}});var B=v(A,2),ee=d(B),z=d(ee);{var W=ie=>{var X=Da(),Y=Q(X),D=d(Y);{var te=E=>{var V=qa();V.value=(V.__value=void 0)==null?"":void 0;var re=d(V);{var Ee=he=>{var me=Ke("orbital collector");g(he,me)},Le=he=>{var me=Ke("mining");g(he,me)};j(re,he=>{y.canBeExtracted[i()]?he(Ee):he(Le,!1)})}var _e=v(re);s(V),F(()=>{bt(V,l()===void 0),J(_e,` (${x().Name??""})`)}),g(E,V)};j(D,E=>{(y.canBeExtracted[i()]||y.canBeMined[i()])&&E(te)})}var G=v(D);ke(G,1,f,we,(E,V)=>{var re=Oa(),Ee={},Le=d(re,!0);s(re),F(()=>{Ee!==(Ee=y.recipe[e(V)].ID)&&(re.value=(re.__value=y.recipe[e(V)].ID)==null?"":y.recipe[e(V)].ID),bt(re,l()===y.recipe[e(V)].ID),J(Le,y.recipe[e(V)].Name)}),g(E,re)}),s(Y);var K=v(Y,2);{var Ie=E=>{var V=Ea();F(re=>et(V,"href",re),[()=>gt.recipe(o().ID)+"?targetAmount="+Math.round(r())+"&depth=10"]),g(E,V)};j(K,E=>{!t.planner.amountEditable&&o()&&E(Ie)})}Ut(Y,()=>e(Te),E=>ae(Te,E)),g(ie,X)},L=ie=>{var X=Ca(),Y=Q(X),D=d(Y),te=v(D);{var G=E=>{var V=ja();F(re=>et(V,"href",re),[()=>gt.recipe(o().ID)+"?targetAmount="+Math.round(r())+"&depth=10"]),g(E,V)};j(te,E=>{t.planner.amountEditable||E(G)})}s(Y);var K=v(Y,2);{var Ie=E=>{var V=Aa();V.__click=[Ma,Re],g(E,V)};j(K,E=>{p().length>1&&!t.planner.amountEditable&&E(Ie)})}F(()=>{var E;return J(D,`${((E=o())==null?void 0:E.Name)??""} `)}),g(ie,X)};j(z,ie=>{i()&&(f().length>1||f().length>=1&&y.canBeExtracted[i()]||y.canBeMined[i()])?ie(W):ie(L,!1)})}s(ee),s(B);var ge=v(B,2);{var se=ie=>{var X=Va(),Y=d(X);oa(Y,{get planner(){return t.planner}}),s(X),g(ie,X)};j(ge,ie=>{r()&&l()&&ie(se)})}s(q);var U=v(q,2);{var le=ie=>{var X=Ua();ke(X,5,_,we,(Y,D)=>{var te=Be();const G=k(()=>{var E,V,re;return(((E=h())==null?void 0:E[e(D)])??0)+(((V=T())==null?void 0:V[e(D)])??0)-(((re=w())==null?void 0:re[e(D)])??0)}),K=k(()=>S()[e(D)]);var Ie=Q(te);Ze(Ie,()=>e(D),E=>{var V=Be(),re=Q(V);{var Ee=_e=>{wt(_e,{get planner(){return e(K)},deletecb:()=>t.planner.deleteChild(e(D))})},Le=_e=>{var he=Ha(),me=d(he);let Je;me.__click=[Fa,G,D,t];var Fe=d(me);{var Me=Ne=>{var xe=Ja(),Xe=v(d(xe),2);ye(Xe,{get itemId(){return e(D)}});var He=v(Xe,2),Ye=d(He,!0);s(He),s(xe),F(nt=>{it(He,`padding-left: ${(t.planner.depth+.5)*1.1}rem`),J(Ye,nt)},[()=>Math.round(e(G)*100)/100]),g(Ne,xe)},tt=(Ne,xe)=>{{var Xe=He=>{var Ye=za(),nt=v(d(Ye),2);ye(nt,{get itemId(){return e(D)}});var ut=v(nt,2),Pt=d(ut,!0);s(ut),s(Ye),F(Tt=>{it(ut,`padding-left: ${(t.planner.depth+.5)*1.1}rem`),J(Pt,Tt)},[()=>Math.round(e(G)*100)/100]),g(He,Ye)};j(Ne,He=>{e(D)!==i()&&e(G)!==0&&He(Xe)},xe)}};j(Fe,Ne=>{var xe;e(G)<0&&((xe=y.producedVia[e(D)])==null?void 0:xe.length)>0?Ne(Me):Ne(tt,!1)})}s(me);var We=v(me,2);{var at=Ne=>{var xe=La();let Xe;var He=d(xe);Gt(He,{get itemId(){return e(D)}}),s(xe),F(Ye=>Xe=fe(xe,1,"flex gap-2 items-center ",null,Xe,Ye),[()=>({"text-green-500":e(G)>0,"text-red-500":e(G)<0})]),g(Ne,xe)};j(We,Ne=>{e(D)!==i()&&e(G)!==0&&Ne(at)})}s(he),F(Ne=>{var xe;Je=fe(me,1,"dark:bg-slate-800 bg-slate-200   text-center rounded-r-lg",null,Je,Ne),me.disabled=e(G)>0||!((xe=y.producedVia[e(D)])!=null&&xe.length)},[()=>{var Ne,xe;return{"dark:hover:bg-green-800":e(G)<0&&((Ne=y.producedVia[e(D)])==null?void 0:Ne.length)>0,"hover:bg-green-200":e(G)<0&&((xe=y.producedVia[e(D)])==null?void 0:xe.length)>0}}]),g(_e,he)};j(re,_e=>{e(K)?_e(Ee):_e(Le,!1)})}g(E,V)}),g(Y,te)}),s(X),g(ie,X)};j(U,ie=>{var X;((X=_())==null?void 0:X.size)>0&&ie(le)})}g(c,Ve),je(),n()}ze(["click"]);var Ka=m('<img class="h-6" alt="">');function Bt(c,t){De(t,!0);let a=k(()=>y.recipe[t.recipeId]);const n=k(()=>{var u;return(u=e(a))==null?void 0:u.IconPath.split("/")}),l=k(()=>e(n)&&e(n)[e(n).length-1]),r=k(()=>e(l)&&ct+`/dsp_sprites/${e(l)}.png`);var o=Be(),i=Q(o);Ze(i,()=>t.recipeId,u=>{var f=Be(),x=Q(f);{var p=h=>{var T=Ka();F(()=>et(T,"src",e(r))),g(h,T)},_=h=>{const T=k(()=>{var w,S;return(S=(w=e(a))==null?void 0:w.Results)==null?void 0:S[0]});ye(h,{get itemId(){return e(T)}})};j(x,h=>{e(l)?h(p):h(_,!1)})}g(u,f)}),g(c,o),je()}var Za=m('<label for="recipeName" class="py-2 text-center">ingredient or recipe name</label> <input id="recipeName">',1),Qa=m('<div class="flex flex-col items-stretch group w-full "><a class="  dark:hover:bg-slate-700 hover:bg-slate-300  md:px-4 md:py-2 w-full flex gap-2"><span class="w-8"><!></span><span class="flex-grow"> </span></a></div>'),Wa=m('<div class="flex gap-0.5 flex-col mb-4 sticky top-0 mr-2 backdrop-blur bg-gray-50/70  dark:bg-gray-950/70 lg:dark:bg-transparent lg:bg-transparent "><!> <!></div> <!>',1);function ht(c,t){De(t,!0);let a=Pe(ft([])),n=vt(),l=vt(),r=vt(),o=Pe(""),i=k(()=>t.recipeName??e(o)),u=k(()=>e(i)?y.items.filter(b=>{var R;return b.Name.toLowerCase().includes((R=e(i))==null?void 0:R.toLowerCase())}).map(b=>b.ID):[]),f=k(()=>(()=>{const b=new Set;return e(u).forEach(R=>{for(const I of y.relatedRecipes[R]??[])b.add(I)}),b})()),x=k(()=>y.recipees.filter(b=>e(a).length>0?e(a).includes(b.Type):!0).filter(b=>e(i)?e(f).has(b.ID):!0).filter(b=>n.checked===null?!0:n.checked?y.buildableRecipees.has(b.ID):!y.buildableRecipees.has(b.ID)).filter(b=>l.checked===null?!0:l.checked?y.fluidRecipees.has(b.ID):!y.fluidRecipees.has(b.ID)).filter(b=>r.checked===null?!0:r.checked?y.entityRecipees.has(b.ID):!y.entityRecipees.has(b.ID)));new Set(y.recipees.map(b=>b.Type));var p=Wa(),_=Q(p),h=d(_);j(h,b=>{});var T=v(h,2);{var w=b=>{var R=Ke();F(I=>J(R,I),[()=>t.children()]),g(b,R)},S=b=>{var R=Be(),I=Q(R);{var N=C=>{},P=C=>{var M=Za(),$=v(Q(M),2);rt($),dt($,()=>e(o),ne=>ae(o,ne)),g(C,M)};j(I,C=>{t.recipeName!==void 0?C(N):C(P,!1)})}g(b,R)};j(T,b=>{t.children?b(w):b(S,!1)})}s(_);var O=v(_,2);ke(O,17,()=>e(x),we,(b,R)=>{var I=Qa(),N=d(I),P=d(N),C=d(P);Bt(C,{get recipeId(){return e(R).ID}}),s(P);var M=v(P),$=d(M,!0);s(M),s(N),s(I),F(ne=>{et(N,"href",ne),J($,e(R).Name)},[()=>gt.recipe(e(R).ID)]),g(b,I)}),g(c,p),je()}ze(["click"]);var Xa=(c,t)=>{var a;return t((a=c.target)==null?void 0:a.value)},Ya=(c,t)=>ae(t,!e(t)),$a=(c,t,a,n)=>t(e(a),e(n)),er=m("<button><!> <span> </span></button>"),tr=m('<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 "> </h4> <div class="flex dark:bg-gray-600 bg-slate-100 "></div></div>'),ar=(c,t)=>ae(t,!e(t)),rr=m("<button><!></button>"),nr=m('<span class="flex gap-1"><span> </span> <!> <span> </span></span>'),lr=m('<!> <span> </span> <span class="px-2"> </span> <span class="flex w-full justify-center gap-2"><span class="w-10 "><!></span> <span class="flex flex-grow justify-center gap-2"><span></span> <span>➡️</span> <span></span></span></span>',1),sr=m('<span class="w-10  "><!></span> <span class="flex-grow">Mining</span> <span class="w-10  "><!></span>',1),ir=m('<span class="w-10  "><!></span> <span class="flex-grow">Extraction</span> <span class="w-10  "><!></span>',1),or=m('<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 rounded-t flex gap-2 justify-center"><!> </h4> <div class="flex dark:bg-gray-600 bg-slate-100  flex-wrap"><!> <!> <!></div></div>'),dr=m(`<div><h4 class="dark:bg-blue-900 bg-blue-300 py-2 px-4 rounded-t">depth to automatically plan on recipe selection</h4> <div class="flex dark:bg-gray-600 bg-slate-100"><input type="number"></div></div> <div class="group"><button>default tier for
		new factories <span class="ml-auto shadow-2xl"><!></span></button> <div class="pl-6 pb-4 flex gap-2 flex-col dark:bg-blue-800 dark:group-hover:bg-blue-700 bg-blue-300 group-hover:bg-blue-400"><!></div></div> <div class="group"><button>default recipe to procure item <span class="ml-auto shadow-2xl "><!></span></button> <div class="pl-6 pb-4 flex gap-2 flex-col dark:bg-blue-800 dark:group-hover:bg-blue-700 bg-blue-300 group-hover:bg-blue-400"><!></div></div>`,1);function cr(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(i,"$defaultTierReadable",a),r=()=>Z(u,"$defaultRecipes",a),o=()=>Z(f,"$defaultDepth",a);let i=pe.defaultTier,u=pe.defaultRecipes,f=pe.defaultDepth,x=Pe(!0),p=Pe(!0);const _=(q,A)=>{const B={...l(),[q]:A};localStorage.setItem("defaultTiers",JSON.stringify(B)),pe.defaultTier.set(B)},h=(q,A)=>{const B={...r(),[q]:A};localStorage.setItem("defaultRecipes",JSON.stringify(B)),pe.defaultRecipes.set(B)},T=q=>{const A=parseInt(q,10);isNaN(A)||(localStorage.setItem("defaultDepth",JSON.stringify({depth:A})),pe.defaultDepth.set(A))};var w=dr(),S=Q(w),O=v(d(S),2),b=d(O);rt(b),b.__change=[Xa,T],s(O),s(S);var R=v(S,2),I=d(R);I.__click=[Ya,x];let N;var P=v(d(I)),C=d(P);{var M=q=>{var A=Ke("🔼");g(q,A)},$=q=>{var A=Ke("🔽");g(q,A)};j(C,q=>{e(x)?q(M):q($,!1)})}s(P),s(I);var ne=v(I,2),ve=d(ne);{var H=q=>{var A=Be(),B=Q(A);ke(B,1,()=>Object.keys(l()),we,(ee,z)=>{var W=Be(),L=Q(W);{var ge=se=>{var U=tr(),le=d(U),ie=d(le,!0);s(le);var X=v(le,2);ke(X,21,()=>pe.availableTiers[e(z)],we,(Y,D)=>{var te=er();const G=k(()=>pe.factoryItems[e(z)][e(D)]),K=k(()=>e(D)===l()[e(z)]);let Ie;te.__click=[$a,_,z,D];var E=d(te);ye(E,{get itemId(){return e(G)}});var V=v(E,2),re=d(V,!0);s(V),s(te),F(Ee=>{Ie=fe(te,1,"flex-grow shadow-xl py-2 m-4 flex items-center justify-center gap-2  rounded-lg",null,Ie,Ee),J(re,e(D))},[()=>({"dark:outline-amber-100":e(K),"outline-1":e(K),active:e(K),"dark:bg-slate-500":e(K),"bg-white":e(K),"dark:hover:bg-slate-400":e(K),"dark:text-white":e(K),"dark:hover:bg-slate-700":!e(K),"dark:text-gray-300":!e(K),"dark:bg-slate-800":!e(K),"bg-slate-200":!e(K)})]),g(Y,te)}),s(X),s(U),F(()=>J(ie,e(z))),g(se,U)};j(L,se=>{var U;((U=pe.availableTiers[e(z)])==null?void 0:U.length)>1&&se(ge)})}g(ee,W)}),g(q,A)};j(ve,q=>{e(x)&&q(H)})}s(ne),s(R);var de=v(R,2),ue=d(de);ue.__click=[ar,p];let Te;var Re=v(d(ue)),Oe=d(Re);{var Ae=q=>{var A=Ke("🔼");g(q,A)},Ce=q=>{var A=Ke("🔽");g(q,A)};j(Oe,q=>{e(p)?q(Ae):q(Ce,!1)})}s(Re),s(ue);var Ve=v(ue,2),be=d(Ve);{var Se=q=>{var A=Be();const B=(W,L=Ue,ge=Ue,se=Ue)=>{var U=rr();let le;U.__click=function(...X){var Y;(Y=ge())==null||Y.apply(this,X)};var ie=d(U);pt(ie,se),s(U),F(X=>le=fe(U,1,"w-full shadow-xl py-2 m-4 flex items-center justify-center gap-2  rounded-lg flex-wrap",null,le,X),[()=>({"dark:outline-amber-100":L(),"outline-1":L(),active:L(),"dark:bg-slate-500":L(),"bg-white":L(),"dark:hover:bg-slate-400":L(),"dark:text-white":L(),"dark:hover:bg-slate-700":!L(),"dark:text-gray-300":!L(),"dark:bg-slate-800":!L(),"bg-slate-200":!L()})]),g(W,U)},ee=(W,L=Ue,ge=Ue,se=Ue)=>{const U=k(()=>y.recipe[se()]),le=(X,Y=Ue,D=Ue)=>{var te=nr();const G=k(()=>y.item[D()]);var K=d(te),Ie=d(K,!0);s(K);var E=v(K,2);ye(E,{get itemId(){return D()}});var V=v(E,2),re=d(V,!0);s(V),s(te),F(()=>{J(Ie,Y()),J(re,e(G).Name)}),g(X,te)},ie=X=>{var Y=lr();const D=k(()=>l()[e(U).Type]),te=k(()=>pe.factoryItems[e(U).Type][e(D)]);var G=Q(Y);Bt(G,{get recipeId(){return se()}});var K=v(G,2),Ie=d(K,!0);s(K);var E=v(K,2),V=d(E);s(E);var re=v(E,2),Ee=d(re),Le=d(Ee);ye(Le,{get itemId(){return e(te)},small:!1}),s(Ee);var _e=v(Ee,2),he=d(_e);ke(he,21,()=>e(U).Items,we,(Je,Fe,Me)=>{le(Je,()=>e(U).ItemCounts[Me],()=>e(Fe))}),s(he);var me=v(he,4);ke(me,21,()=>e(U).Results,we,(Je,Fe,Me)=>{le(Je,()=>e(U).ResultCounts[Me],()=>e(Fe))}),s(me),s(_e),s(re),F(()=>{J(Ie,e(U).Name),J(V,`⌚ ${e(U).TimeSpend/60}s`)}),g(X,Y)};B(W,L,()=>()=>h(ge(),se()),()=>ie)};var z=Q(A);ke(z,17,()=>Object.entries(y.alternativeRecipe),we,(W,L)=>{let ge=()=>e(L)[0],se=()=>e(L)[1];var U=Be();const le=k(()=>Number(ge()));var ie=Q(U);{var X=Y=>{var D=or(),te=d(D),G=d(te);ye(G,{get itemId(){return e(le)}});var K=v(G);s(te);var Ie=v(te,2),E=d(Ie);{var V=_e=>{const he=k(()=>r()[e(le)]===null),me=Je=>{var Fe=sr(),Me=Q(Fe),tt=d(Me);ye(tt,{itemId:2316,small:!1}),s(Me);var We=v(Me,4),at=d(We);ye(at,{itemId:2301,small:!1}),s(We),g(Je,Fe)};B(_e,()=>e(he),()=>()=>h(e(le),null),()=>me)};j(E,_e=>{y.canBeMined[e(le)]&&_e(V)})}var re=v(E,2);{var Ee=_e=>{const he=k(()=>r()[e(le)]===null),me=Je=>{var Fe=ir(),Me=Q(Fe),tt=d(Me);ye(tt,{itemId:2105,small:!1}),s(Me);var We=v(Me,4),at=d(We);ye(at,{itemId:2306,small:!1}),s(We),g(Je,Fe)};B(_e,()=>e(he),()=>()=>h(e(le),null),()=>me)};j(re,_e=>{y.canBeExtracted[e(le)]&&_e(Ee)})}var Le=v(re,2);ke(Le,17,se,we,(_e,he)=>{const me=k(()=>e(he)===r()[e(le)]);ee(_e,()=>e(me),()=>e(le),()=>e(he))}),s(Ie),s(D),F(()=>J(K,` ${y.item[e(le)].Name??""}`)),g(Y,D)};j(ie,Y=>{(se().length>1||se().length===1&&(y.canBeExtracted[e(le)]||y.canBeMined[e(le)]))&&Y(X)})}g(W,U)}),g(q,A)};j(be,q=>{e(p)&&q(Se)})}s(Ve),s(de),F((q,A)=>{Lt(b,o()),N=fe(I,1,"dark:bg-blue-800 dark:group-hover:bg-blue-700 bg-blue-300 group-hover:bg-blue-400 hover:shadow-2xl w-full rounded-t py-5 px-4 flex",null,N,q),Te=fe(ue,1,"dark:bg-blue-800 dark:group-hover:bg-blue-700 bg-blue-300 group-hover:bg-blue-400 hover:shadow-2xl  rounded-t py-5 px-4 flex w-full",null,Te,A)},[()=>({"bg-blue-300":!e(x),"bg-blue-400":e(x)}),()=>({"bg-blue-300":!e(p),"bg-blue-400":e(p)})]),g(c,w),je(),n()}ze(["change","click"]);var ur=(c,t)=>e(t).select(),vr=m("<button> </button>"),gr=m('<h4 class="py-2 dark:bg-slate-800 bg-slate-200 rounded-t-lg flex gap-2 justify-center  w-full items-center sticky top-0"><span> </span> <span></span></h4>');function Rt(c,t){var a=gr(),n=d(a),l=d(n,!0);s(n);var r=v(n,2);ke(r,21,()=>t.options,we,(o,i)=>{var u=vr();let f;u.__click=[ur,i];var x=d(u,!0);s(u),F(p=>{f=fe(u,1,"px-4 py-2 first:rounded-l-lg last:rounded-r-lg  outline-gray-600 ",null,f,p),J(x,e(i).label)},[()=>({"bg-blue-300":t.selectedOption===(e(i).elem??e(i).label),"bg-gray-300":t.selectedOption!==(e(i).elem??e(i).label),"hover:bg-blue-500":t.selectedOption===(e(i).elem??e(i).label),"hover:bg-gray-500":t.selectedOption!==(e(i).elem??e(i).label),"dark:bg-blue-700":t.selectedOption===(e(i).elem??e(i).label),"dark:bg-gray-700":t.selectedOption!==(e(i).elem??e(i).label)})]),g(o,u)}),s(r),s(a),F(()=>J(l,t.label)),g(c,a)}ze(["click"]);var pr=m('<div class="relative"><em class="absolute w-full h-full text-right left-0 top-0 dark:backdrop-brightness-85 bg-white/50 dark:bg-black/30 "> </em> <!></div>'),fr=m('<div class="opacity-70 scale-90"><!></div>'),br=m('<div class="text-right justify-self-end relative w-16"><div class="absolute right-0 top-0 z-0"><!></div> <span class="w-full h-full text-right top-0 dark:backdrop-brightness-75 "> </span></div>'),_r=m('<div class="flex flex-col"><!></div>'),hr=m('<div class="dark:odd:bg-gray-950 odd:bg-gray-200 py-1"><div class="gap-3 px-2 flex items-center justify-between"><div class="justify-self-center w-14 text-center p-0.5 flex flex-col"></div> <span class="flex-grow"> </span> <!></div></div>'),mr=m('<div class="md:max-w-sm w-full flex flex-col mx-auto lg:ml-0  gap-0.5 overflow-y-auto max-h-screen scrollbar-thin"><!> <!></div>');function mt(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(u,"$itemId",a),r=()=>Z(i,"$requiredBuildingsByRecipeId",a),o=()=>Z(f,"$defaultTier",a);let{requiredBuildingsByRecipeId:i,itemId:u}=t.planner,{defaultTier:f}=pe,x=[{label:"buildings",select:()=>ae(p,"buildings")},{label:"throughput",select:()=>ae(p,"throughput")}],p=Pe("buildings"),_=k(()=>t.activeTally??e(p));var h=mr(),T=d(h);{var w=O=>{Rt(O,{options:x,get selectedOption(){return e(_)},label:"required"})};j(T,O=>{t.activeTally||O(w)})}var S=v(T,2);Ze(S,l,O=>{var b=Be(),R=Q(b);ke(R,1,()=>Object.entries(r()),we,(I,N)=>{var P=Be();const C=k(()=>{const[ne,ve]=e(N);return{recipeId:ne,requiredBuildings:ve}});var M=Q(P);{var $=ne=>{var ve=hr();const H=k(()=>y.recipe[Number(e(C).recipeId)]),de=k(()=>o()[e(H).Type]/e(H).TimeSpend);var ue=d(ve),Te=d(ue);ke(Te,21,()=>e(H).Results,we,(be,Se,q)=>{var A=pr();const B=k(()=>e(C).requiredBuildings*e(de)*e(H).ResultCounts[q]*60);var ee=d(A),z=d(ee);s(ee);var W=v(ee,2);ye(W,{get itemId(){return e(Se)}}),s(A),F(L=>J(z,`${L??""}/s`),[()=>Math.round(e(B)*100)/100]),g(be,A)}),s(Te);var Re=v(Te,2),Oe=d(Re,!0);s(Re);var Ae=v(Re,2);{var Ce=be=>{var Se=br();const q=k(()=>String(Math.round(e(C).requiredBuildings*10)/10)),A=k(()=>e(q).indexOf(".")),B=k(()=>e(A)===-1?1:0);var ee=d(Se),z=d(ee);Ze(z,o,ge=>{var se=fr(),U=d(se);ye(U,{get itemId(){var le;return pe.factoryItems[(le=e(H))==null?void 0:le.Type][o()[e(H).Type]]}}),s(se),g(ge,se)}),s(ee);var W=v(ee,2),L=d(W,!0);s(W),s(Se),F(()=>{it(Se,`padding-right: ${e(B)+.5}em`),J(L,e(q))}),g(be,Se)},Ve=(be,Se)=>{{var q=A=>{var B=Be(),ee=Q(B);ke(ee,17,()=>e(H).Results,we,(z,W,L)=>{var ge=_r();const se=k(()=>e(C).requiredBuildings*e(de)*e(H).ResultCounts[L]*60);var U=d(ge);kt(U,{get outputs(){return e(se)}}),s(ge),g(z,ge)}),g(A,B)};j(be,A=>{e(_)==="throughput"&&A(q)},Se)}};j(Ae,be=>{e(_)==="buildings"?be(Ce):be(Ve,!1)})}s(ue),s(ve),F(()=>{var be;return J(Oe,((be=e(H))==null?void 0:be.Name)??"recipe"+e(C).recipeId)}),g(ne,ve)};j(M,ne=>{e(C).recipeId&&ne($)})}g(I,P)}),g(O,b)}),s(h),g(c,h),je(),n()}var xr=(c,t)=>t(null),Ir=(c,t,a)=>t(a),yr=(c,t)=>t(60),kr=m('<span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button></span>'),wr=(c,t)=>ae(t,!0),Br=(c,t)=>ae(t,!0),Rr=(c,t)=>ae(t,!0),Pr=(c,t)=>t(null),Tr=(c,t,a)=>t(a),Sr=(c,t)=>t(60),Nr=m('<span class="px-3 py-1 dark:bg-slate-800 bg-slate-200 rounded-r-lg">Items per <span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button> <span class="inline-flex"><button> </button> <button>Minute</button> <button>Second</button></span></span></span>');function qr(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(e(f),"$timeSpendChanged",a),r=()=>Z(e(i),"$targetInterval",a),o=()=>Z(e(u),"$timeSpend",a);let i=k(()=>t.planner.targetInterval),u=k(()=>t.planner.timeSpend),f=k(()=>t.planner.timeSpendChanged),{defaultInterval:x}=pe,p=Pe(!1);const _=60*60,h=b=>{t.planner.setInterval(b),ae(p,!1),x.set(b),localStorage==null||localStorage.setItem("defaultInterval",JSON.stringify({interval:b}))};var T=Be(),w=Q(T);{var S=b=>{var R=kr(),I=d(R);let N;I.__click=[xr,h];var P=d(I);s(I);var C=v(I,2);let M;C.__click=[Ir,h,_];var $=v(C,2);let ne;$.__click=[yr,h],s(R),F((ve,H,de,ue)=>{N=fe(I,1,"px-1.5 py-2 multi hover:bg-slate-700",null,N,ve),J(P,`Cycle (${H??""}s)`),M=fe(C,1,"px-1.5 py-2 multi hover:bg-slate-700",null,M,de),ne=fe($,1,"px-1.5 py-2 multi hover:bg-slate-700",null,ne,ue)},[()=>({"animate-flash":l(),active:r()===0}),()=>Math.round(o()/60*100)/100,()=>({active:r()===_}),()=>({active:r()===60})]),g(b,R)},O=b=>{var R=Nr(),I=v(d(R)),N=d(I);let P;N.__click=[wr,p];var C=d(N);s(N);var M=v(N,2);let $;M.__click=[Br,p];var ne=v(M,2);let ve;ne.__click=[Rr,p];var H=v(ne,2),de=d(H);let ue;de.__click=[Pr,h];var Te=d(de);s(de);var Re=v(de,2);let Oe;Re.__click=[Tr,h,_];var Ae=v(Re,2);let Ce;Ae.__click=[Sr,h],s(H),s(I),s(R),F((Ve,be,Se,q,A,B,ee,z)=>{P=fe(N,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,P,Ve),J(C,`Cycle (${be??""}s)`),$=fe(M,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,$,Se),ve=fe(ne,1,"px-1.5 py-2 multi hover:bg-slate-700 xl:hidden",null,ve,q),ue=fe(de,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,ue,A),J(Te,`Cycle (${B??""}s)`),Oe=fe(Re,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,Oe,ee),Ce=fe(Ae,1,"px-1.5 py-2 multi hover:bg-slate-700 hidden xl:inline",null,Ce,z)},[()=>({"animate-flash":l(),active:r()===null,hidden:r()!==null}),()=>Math.round(o()/60*100)/100,()=>({active:r()===_,hidden:r()!==_}),()=>({active:r()===60,hidden:r()!==60}),()=>({"animate-flash":l()&&r()===0,active:r()===null}),()=>Math.round(o()/60*100)/100,()=>({active:r()===_}),()=>({active:r()===60})]),g(b,R)};j(w,b=>{e(p)?b(S):b(O,!1)})}g(c,T),je(),n()}ze(["click"]);var Or=m('<link rel="icon">'),Er=m('<span class="dark:bg-slate-700/70 bg-slate-300/70 w-full py-2 px-12">Factory Globals</span>'),Dr=(c,t)=>t(),jr=(c,t)=>ae(t,!1),Mr=m('<div class="md:px-5 flex flex-col  gap-2 "><!> <span class="flex-grow"></span> <button class="dark:bg-green-800 dark:hover:bg-green-700  bg-green-300 hover:bg-green-400 w-full py-1">apply to existing</button> <button class="dark:bg-green-800 dark:hover:bg-green-700 bg-green-300 hover:bg-green-400 w-full py-1">apply to future</button></div>'),Ar=(c,t)=>ae(t,!e(t)),Cr=(c,t)=>ae(t,!e(t)),Vr=(c,t)=>ae(t,!0),Fr=m('<div class="flex w-full px-12 py-0.5 dark:bg-blue-700/70 bg-blue-300/70 "><label for="recipeName" class="py-2 text-center w-1/3 ">ingredient or recipe name</label> <input id="recipeName" class="flex-grow"></div>'),Jr=m('<!> <div class="flex gap-12 flex-wrap lg:flex-nowrap justify-center"><div class="lg:max-w-xs xl:block hidden max-h-screen  ml-auto overflow-y-auto scrollbar-thin "><!></div> <div class="max-w-2xl w-full lg:mx-0 mx-auto overflow-y-auto max-h-screen   scrollbar-thin"><div class="flex  text-sm py-1 gap-2 sticky top-0 z-10 bg-slate-50/70 dark:bg-slate-950/70"><!> <span class="px-3 py-3 flex-grow text-right"></span> <button> </button> <button> </button> <button class="px-3 py-3 dark:bg-slate-800 bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-l-lg">⚙️</button></div> <!></div> <div class="hidden lg:block max-w-sm w-full"><!></div></div> <!> <!>',1);function an(c,t){De(t,!0);const[a,n]=Qe(),l=()=>Z(u,"$defaultDepth",a),r=()=>Z(i,"$defaultTier",a),o=()=>Z(e(x),"$header",a);let{defaultTier:i,defaultDepth:u}=pe,f=k(()=>new ot(t.data.recipeId,void 0,void 0,void 0,void 0,t.data.depth??l(),t.data.targetAmount)),x=k(()=>e(f).header),p=Pe(!1),_=Pe(!1),h=Pe(!1);const T=B=>{B||(B=e(f));const ee=Ge(B.recipe);if(ee){const z=ee.Type,W=r()[z];B.tier.set(W)}Ge(B.children).forEach(z=>T(z)),ae(p,!1)};let w=Pe(""),S=[{label:"buildings",select:()=>ae(O,"buildings")},{label:"throughput",select:()=>ae(O,"throughput")}],O=Pe("buildings");var b=Jr();zt(B=>{var ee=Or();F(()=>{var z,W;Ft.title=(z=o())==null?void 0:z[1],et(ee,"href",(W=o())==null?void 0:W[0])}),g(B,ee)});var R=Q(b);{var I=B=>{lt(B,{close:()=>ae(p,!1),header:z=>{var W=Er();g(z,W)},children:(z,W)=>{var L=Mr(),ge=d(L);cr(ge,{});var se=v(ge,4);se.__click=[Dr,T];var U=v(se,2);U.__click=[jr,p],s(L),g(z,L)},$$slots:{default:!0}})};j(R,B=>{e(p)&&B(I)})}var N=v(R,2),P=d(N),C=d(P);ht(C,{}),s(P);var M=v(P,2),$=d(M),ne=d($);qr(ne,{get planner(){return e(f)}});var ve=v(ne,4);let H;ve.__click=[Ar,h];var de=d(ve,!0);s(ve);var ue=v(ve,2);let Te;ue.__click=[Cr,_];var Re=d(ue,!0);s(ue);var Oe=v(ue,2);Oe.__click=[Vr,p],s($);var Ae=v($,2);Ze(Ae,()=>e(f),B=>{wt(B,{get planner(){return e(f)}})}),s(M);var Ce=v(M,2),Ve=d(Ce);Ze(Ve,()=>e(f),B=>{mt(B,{get planner(){return e(f)}})}),s(Ce),s(N);var be=v(N,2);{var Se=B=>{lt(B,{close:()=>ae(_,!1),header:z=>{var W=Fr(),L=v(d(W),2);rt(L),s(W),dt(L,()=>e(w),ge=>ae(w,ge)),g(z,W)},children:(z,W)=>{ht(z,{get recipeName(){return e(w)}})},$$slots:{header:!0,default:!0}})};j(be,B=>{e(_)&&B(Se)})}var q=v(be,2);{var A=B=>{lt(B,{close:()=>ae(h,!1),header:z=>{Rt(z,{options:S,get selectedOption(){return e(O)},label:"required"})},children:(z,W)=>{var L=Be(),ge=Q(L);Ze(ge,()=>e(f),se=>{mt(se,{get planner(){return e(f)},get activeTally(){return e(O)}})}),g(z,L)},$$slots:{header:!0,default:!0}})};j(q,B=>{e(h)&&B(A)})}F((B,ee)=>{H=fe(ve,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg lg:hidden",null,H,B),J(de,e(h)?"✖️":"📃"),Te=fe(ue,1,"px-3 py-3  bg-slate-200 dark:hover:bg-slate-700 hover:bg-slate-300 rounded-lg xl:hidden",null,Te,ee),J(Re,e(_)?"✖️":"🔍")},[()=>({"dark:bg-slate-600":e(_),"dark:bg-slate-800":!e(_)}),()=>({"dark:bg-slate-600":e(_),"dark:bg-slate-800":!e(_)})]),g(c,b),je(),n()}ze(["click"]);export{an as component,tn as universal};
